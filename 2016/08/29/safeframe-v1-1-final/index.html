<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/xfe/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>






<link href="/xfe/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/xfe/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="translate,safeframe," />





  <link rel="alternate" href="/xfe/atom.xml" title="{XFE}" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/xfe/favicon.ico?v=0.5.0" />






<meta name="description" content="&amp;#x6211;&amp;#x662F;&amp;#x642C;&amp;#x8FD0;&amp;#x5DE5;&amp;#xFF0C;&amp;#x6709;&amp;#x5174;&amp;#x8DA3;&amp;#x8BF7;&amp;#x770B;&amp;#x539F;&amp;#x7FFB;&amp;#x8BD1; https://seminelee.github.io/2016/08/24/safeframe1/
iab.(Interactive Advertising Bureau)">
<meta property="og:type" content="article">
<meta property="og:title" content="safeframe-v1-1-final">
<meta property="og:url" content="http://sinaad.github.io/2016/08/29/safeframe-v1-1-final/index.html">
<meta property="og:site_name" content="{XFE}">
<meta property="og:description" content="&amp;#x6211;&amp;#x662F;&amp;#x642C;&amp;#x8FD0;&amp;#x5DE5;&amp;#xFF0C;&amp;#x6709;&amp;#x5174;&amp;#x8DA3;&amp;#x8BF7;&amp;#x770B;&amp;#x539F;&amp;#x7FFB;&amp;#x8BD1; https://seminelee.github.io/2016/08/24/safeframe1/
iab.(Interactive Advertising Bureau)">
<meta property="og:image" content="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/sf1.png">
<meta property="og:image" content="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/sf2.png">
<meta property="og:image" content="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/sf3.png">
<meta property="og:image" content="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/sf4.png">
<meta property="og:image" content="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/sf5.png">
<meta property="og:image" content="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/sf6.png">
<meta property="og:image" content="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/sf7.png">
<meta property="og:updated_time" content="2016-08-29T09:19:03.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="safeframe-v1-1-final">
<meta name="twitter:description" content="&amp;#x6211;&amp;#x662F;&amp;#x642C;&amp;#x8FD0;&amp;#x5DE5;&amp;#xFF0C;&amp;#x6709;&amp;#x5174;&amp;#x8DA3;&amp;#x8BF7;&amp;#x770B;&amp;#x539F;&amp;#x7FFB;&amp;#x8BD1; https://seminelee.github.io/2016/08/24/safeframe1/
iab.(Interactive Advertising Bureau)">
<meta name="twitter:image" content="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/sf1.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> safeframe-v1-1-final | {XFE} </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?13989991106bdad30ea927ab9ae93a09";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/xfe/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">{XFE}</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/xfe/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/xfe/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/xfe/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/xfe/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/xfe/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                safeframe-v1-1-final
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-29T11:02:26+08:00" content="2016-08-29">
              2016-08-29
            </time>
          </span>

          
          <span class="post-author">
            &nbsp; | &nbsp;
            seminelee（xiaomei）
          </span>
          

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/xfe/categories/translate/" itemprop="url" rel="index">
                    <span itemprop="name">translate</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/xfe/2016/08/29/safeframe-v1-1-final/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/29/safeframe-v1-1-final/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>&#x6211;&#x662F;&#x642C;&#x8FD0;&#x5DE5;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x8BF7;&#x770B;&#x539F;&#x7FFB;&#x8BD1; <a href="https://seminelee.github.io/2016/08/24/safeframe1/" target="_blank" rel="external">https://seminelee.github.io/2016/08/24/safeframe1/</a></p>
<h1 id="iab-Interactive-Advertising-Bureau"><a href="#iab-Interactive-Advertising-Bureau" class="headerlink" title="iab.(Interactive Advertising Bureau)"></a><strong>iab.(Interactive Advertising Bureau)</strong></h1><h3 id="&#x5B89;&#x5168;&#x6846;&#x67B6;"><a href="#&#x5B89;&#x5168;&#x6846;&#x67B6;" class="headerlink" title="&#x5B89;&#x5168;&#x6846;&#x67B6;"></a><strong>&#x5B89;&#x5168;&#x6846;&#x67B6;</strong></h3><h3 id="&#x7248;&#x672C;1-1-&#x8349;&#x6848;"><a href="#&#x7248;&#x672C;1-1-&#x8349;&#x6848;" class="headerlink" title="&#x7248;&#x672C;1.1 &#x8349;&#x6848;"></a>&#x7248;&#x672C;1.1 &#x8349;&#x6848;</h3><h4 id="2014&#x5E74;8&#x6708;&#x53D1;&#x5E03;"><a href="#2014&#x5E74;8&#x6708;&#x53D1;&#x5E03;" class="headerlink" title="2014&#x5E74;8&#x6708;&#x53D1;&#x5E03;"></a>2014&#x5E74;8&#x6708;&#x53D1;&#x5E03;</h4><hr>
<p><strong>&#x8FD9;&#x4E2A;&#x6587;&#x6863;&#x662F;IAB&#x5E7F;&#x544A;&#x6280;&#x672F;&#x59D4;&#x5458;&#x4F1A;&#x5F00;&#x53D1;&#x7684;</strong></p>
<p>SafeFrame&#x89C4;&#x8303;&#x662F;&#x7531;&#x6765;&#x81EA;21&#x4E2A;IAB&#x6210;&#x5458;&#x516C;&#x53F8;&#x7684;&#x5FD7;&#x613F;&#x8005;&#x7EC4;&#x6210;&#x7684;&#x5DE5;&#x4F5C;&#x5C0F;&#x7EC4;&#x5F00;&#x53D1;&#x7684;&#x3002;</p>
<p>SafeFrame&#x5DE5;&#x4F5C;&#x5C0F;&#x7EC4;&#x7684;&#x9886;&#x5BFC;&#x8005;&#x662F;&#xFF1A;</p>
<ul>
<li>&#x8096;&#x6069;&#xB7;&#x65AF;&#x5948;&#x5FB7;&#xFF0C;&#x96C5;&#x864E;&#x516C;&#x53F8;&#xFF08;Sean Snider, Yahoo!&#xFF09;</li>
<li>&#x666E;&#x62C9;&#x5DF4;&#x5361;&#x5C14;&#xB7;&#x6208;&#x4E9A;&#x5C14;&#xFF0C;&#x5FAE;&#x8F6F;&#x516C;&#x53F8;&#xFF08;Prabhakar Goyal, Microsoft&#xFF09;</li>
</ul>
<p>&#x4E3A;&#x8FD9;&#x4E2A;&#x6587;&#x6863;&#x4F5C;&#x51FA;&#x8D21;&#x732E;&#x7684;IAB&#x6210;&#x5458;&#x516C;&#x53F8;&#x6709;&#xFF1A;</p>
<ul>
<li>Adobe Systems Inc.</li>
<li>AOL &amp; ADTECH</li>
<li>Auditude</li>
<li>C3 Metrics</li>
<li>CBS Interactive</li>
<li>Disney Interactive Media Group</li>
<li>Dotomi</li>
<li>Editorial Projects in Education</li>
<li>FDG</li>
<li>FreeWheel</li>
<li>Google</li>
<li>HealthiNation</li>
<li>Media Rating Council - MRC</li>
<li>Microsoft</li>
<li>NBC Universal Digital Media</li>
<li>Network Advertising Initiative - NAI</li>
<li>OpenX Limited</li>
<li>Time Inc.</li>
<li>Turner Broadcasting System, Inc./CNN.com</li>
<li>Undertone</li>
<li>Yahoo!</li>
</ul>
<p><strong>IAB&#x4E2D;&#x8FD9;&#x9879;&#x5021;&#x8BAE;&#x7684;&#x5E26;&#x9886;&#x8005;&#x662F;&#x514B;&#x91CC;&#x65AF;&#xB7;&#x6885;&#x5E0C;&#x4E9A;&#xFF08;Chris Mejia&#xFF09;&#x548C;&#x51EF;&#x8482;&#xB7;&#x65AF;&#x7279;&#x52B3;&#x5FB7;&#xFF08;Katie Stroud &#xFF09;</strong></p>
<p>&#x5BF9;&#x672C;&#x6587;&#x6863;&#x8FDB;&#x884C;&#x8BC4;&#x8BBA;&#x8BF7;&#x8054;&#x7CFB;adtechnology@iab.net&#x3002;&#x8BF7;&#x4E00;&#x5B9A;&#x8981;&#x63D0;&#x53CA;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x7248;&#x672C;&#x53F7;&#xFF08;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x6B64;&#x9875;&#x7684;&#x53F3;&#x4E0B;&#x89D2;&#x627E;&#x5230;&#xFF0C;v1.1&#xFF09;&#x3002;</p>
<p>&#x77E5;&#x8BC6;&#x4EA7;&#x6743;&#x4E8B;&#x9879;&#xFF1A;&#x53C2;&#x4E0E;SafeFrame1.0&#x5DE5;&#x4F5C;&#x5C0F;&#x7EC4;&#x7684;&#x516C;&#x53F8;&#x5728;&#x751F;&#x4EA7;SafeFrame1.0&#x7248;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x6CA1;&#x6709;&#x4F5C;&#x51FA;&#x4E13;&#x5229;&#x7684;&#x8BF4;&#x660E;&#x3002;SafeFrame&#x7684;&#x672A;&#x6765;&#x7248;&#x672C;&#x5C06;&#x5728;&#x5373;&#x5C06;&#x53D1;&#x5E03;&#x7684;IAB&#x77E5;&#x8BC6;&#x4EA7;&#x6743;&#x653F;&#x7B56;&#x7684;&#x4E3B;&#x6301;&#x4E0B;&#x8FDB;&#x884C;&#x751F;&#x4EA7;&#x3002;</p>
<p>SafeFrame&#x5021;&#x8BAE;&#x7684;&#x66F4;&#x591A;&#x7EC6;&#x5219;&#x548C;&#x8D44;&#x6E90;&#x53EF;&#x4EE5;&#x5728;<a href="http://www.iab.net/safeframe&#x4E0A;&#x88AB;&#x627E;&#x5230;" target="_blank" rel="external">http://www.iab.net/safeframe&#x4E0A;&#x88AB;&#x627E;&#x5230;</a></p>
<p><strong>&#x5173;&#x4E8E;IAB&#x5E7F;&#x544A;&#x6280;&#x672F;&#x59D4;&#x5458;&#x4F1A;</strong></p>
<p>&#x5E7F;&#x544A;&#x6280;&#x672F;&#x59D4;&#x5458;&#x4F1A;&#x7531;&#x8D85;&#x8FC7;70&#x4E2A;&#x5728;&#x5E7F;&#x544A;&#x6280;&#x672F;&#x6709;&#x4E3B;&#x8981;&#x7684;&#x4E1A;&#x52A1;&#x7684;IAB&#x6210;&#x5458;&#x516C;&#x53F8;&#x7EC4;&#x6210;&#x3002;&#x5B83;&#x4E0E;IAB&#x5E7F;&#x544A;&#x7ECF;&#x8425;&#x7406;&#x4E8B;&#x4F1A;&#x5408;&#x4F5C;&#xFF0C;&#x4E3A;&#x6570;&#x5B57;&#x5E7F;&#x544A;&#x884C;&#x4E1A;&#x5236;&#x5B9A;&#x91CD;&#x8981;&#x6280;&#x672F;&#x6807;&#x51C6;&#x548C;&#x5B9E;&#x8DF5;&#x6700;&#x4F73;&#x505A;&#x6CD5;&#x3002;&#x4E00;&#x7FA4;&#x7CBE;&#x9009;&#x7684;&#x4E3B;&#x8981;&#x6210;&#x5458;&#x4F01;&#x4E1A;&#x4E5F;&#x53C2;&#x4E0E;&#x5230;&#x5E7F;&#x544A;&#x6280;&#x672F;&#x9886;&#x5BFC;&#x59D4;&#x5458;&#x4F1A;&#x91CC;&#xFF0C;&#x5EFA;&#x8BAE;IAB&#x7684;&#x7BA1;&#x7406;&#x5C42;&#x548C;&#x8463;&#x4E8B;&#x4F1A;&#x9876;&#x7EA7;&#x5E7F;&#x544A;&#x6280;&#x672F;&#x4F18;&#x5148;&#x3002;</p>
<p>&#x5E7F;&#x544A;&#x6280;&#x672F;&#x59D4;&#x5458;&#x4F1A;&#x7684;&#x4F7F;&#x547D;&#x662F;&#x5F00;&#x53D1;&#x90A3;&#x4E9B;&#x5C06;&#x964D;&#x4F4E;&#x6210;&#x672C;&#xFF0C;&#x5F00;&#x62D3;&#x65B0;&#x7684;&#x5E02;&#x573A;&#x673A;&#x4F1A;&#xFF0C;&#x5E76;&#x786E;&#x4FDD;&#x6570;&#x5B57;&#x5E7F;&#x544A;&#x884C;&#x4E1A;&#x7684;&#x957F;&#x671F;&#x589E;&#x957F;&#x7684;&#x6280;&#x672F;&#x89C4;&#x8303;&#x548C;&#x8981;&#x6C42;&#xFF0C;&#x5E76;&#x4FC3;&#x8FDB;&#x5176;&#x88AB;&#x91C7;&#x7528;&#x3002;</p>
<p>&#x8981;&#x67E5;&#x770B;&#x59D4;&#x5458;&#x4F1A;&#x6210;&#x5458;&#x516C;&#x53F8;&#x7684;&#x5B8C;&#x6574;&#x5217;&#x8868;&#xFF0C;&#x8BF7;&#x79FB;&#x6B65;&#x5230;&#xFF1A;<br><a href="http://www.iab.net/advertising_technology_council" target="_blank" rel="external">http://www.iab.net/advertising_technology_council</a></p>
<hr>
<h2 id="&#x76EE;&#x5F55;"><a href="#&#x76EE;&#x5F55;" class="headerlink" title="&#x76EE;&#x5F55;"></a>&#x76EE;&#x5F55;</h2><p>&#x3000;&#x6267;&#x884C;&#x6458;&#x8981;<br>&#x3000;&#x76EE;&#x6807;&#x53D7;&#x4F17;<br>&#x3000;&#x89C4;&#x683C;&#x66F4;&#x65B0;</p>
<p><strong>1. &#x6982;&#x51B5;</strong><br>&#x3000;&#x3000;1.1&#x3000;SafeFrames&#x7EC4;&#x4EF6;<br>&#x3000;&#x3000;&#x3000;1.1.1&#x3000;&#x7F51;&#x7AD9;<br>&#x3000;&#x3000;&#x3000;1.1.2&#x3000;&#x5916;&#x90E8;&#x65B9;<br>&#x3000;&#x3000;&#x3000;1.1.3&#x3000;&#x63A5;&#x53E3;<br>&#x3000;&#x3000;&#x3000;1.1.4&#x3000;&#x4E8C;&#x7EA7;&#x57DF;&#x540D;<br>&#x3000;&#x3000;1.2&#x3000;&#x4F18;&#x70B9;<br>&#x3000;&#x3000;&#x3000;1.2.1&#x3000;&#x5916;&#x90E8;&#x65B9;&#x548C;&#x7F51;&#x7AD9;&#x4E4B;&#x95F4;&#x7684;&#x900F;&#x660E;&#x5EA6;<br>&#x3000;&#x3000;&#x3000;1.2.2&#x3000;&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x7684;API<br>&#x3000;&#x3000;&#x3000;1.2.3&#x3000;&#x201C;&#x6C99;&#x76D2;&#x201D;&#x5916;&#x90E8;&#x5185;&#x5BB9;<br>&#x3000;&#x3000;&#x3000;1.2.4&#x3000;&#x7F51;&#x7AD9;&#x5B9A;&#x5236;&amp;&#x63A7;&#x5236;<br>&#x3000;&#x3000;1.3&#x3000;SafeFrames&#x548C;&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5C55;&#x89C6;<br>&#x3000;&#x3000;&#x3000;1.3.1&#x3000;&#x652F;&#x6301;3MS&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;<br>&#x3000;&#x3000;&#x3000;1.3.2&#x3000;&#x53EF;&#x89C1;&#x5EA6;&#x7279;&#x6027;&#x5BF9;&#x5916;&#x90E8;&#x65B9;&#x53EF;&#x9009;<br>&#x3000;&#x3000;1.4&#x3000;SafeFrames&#x548C;&#x89C6;&#x9891;&#x63D2;&#x64AD;&#x5E7F;&#x544A;<br>&#x3000;&#x3000;1.5&#x3000;SafeFrames&#x548C;&#x79FB;&#x52A8;&#x7AEF;<br>&#x3000;&#x3000;1.6&#x3000;&#x62A5;&#x544A;SafeFrame&#x7684;&#x6570;&#x636E;<br>&#x3000;&#x3000;1.7&#x3000;&#x533A;&#x522B;&#x4E8E;&#x5176;&#x4ED6;&#x89C4;&#x8303;<br>&#x3000;&#x3000;&#x3000;1.7.1&#x3000;IAB&#x53CB;&#x597D;&#x7684;iframe<br>&#x3000;&#x3000;&#x3000;1.7.2&#x3000;&#x8DE8;&#x6E90;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#xFF08;CORS&#xFF09;<br>&#x3000;&#x3000;1.8&#x3000;&#x8D85;&#x51FA;&#x8303;&#x56F4;&#x7684;&#x9879;<br>&#x3000;&#x3000;1.9&#x3000;&#x64CD;&#x4F5C;&#x6CE8;&#x610F;&#x4E8B;&#x9879;<br><strong>2. &#x7F51;&#x7AD9;&#x5B9E;&#x73B0;</strong><br>&#x3000;&#x3000;2.1&#x3000;SafeFrames&#x662F;&#x5982;&#x4F55;&#x8FD0;&#x4F5C;&#x7684;<br>&#x3000;&#x3000;&#x3000;2.1.1&#x3000;&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#xFF1A;&#x7F51;&#x7AD9;&#x8F6C;&#x6362;&#x5916;&#x90E8;&#x5185;&#x5BB9;<br>&#x3000;&#x3000;&#x3000;2.1.2&#x3000;&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#xFF1A;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x76F4;&#x63A5;&#x4F20;&#x9012;<br>&#x3000;&#x3000;&#x3000;2.1.3&#x3000;&#x6E32;&#x67D3;SafeFrame<br>&#x3000;&#x3000;&#x3000;2.1.4&#x3000;&#x901A;&#x8FC7;API&#x8FDB;&#x884C;&#x9875;&#x5185;&#x901A;&#x8BAF;<br>&#x3000;&#x3000;2.2&#x3000;&#x8981;&#x6C42;<br>&#x3000;&#x3000;&#x3000;2.2.1&#x3000;JavaScript&#x7684;&#x7F51;&#x7AD9;&#x5E93;&#x548C;API<br>&#x3000;&#x3000;&#x3000;2.2.2&#x3000;&#x4E8C;&#x7EA7;&#x57DF;&#x540D;<br>&#x3000;&#x3000;&#x3000;2.2.3&#x3000;&#x8D44;&#x6E90;&#x516C;&#x7EA6;<br>&#x3000;&#x3000;&#x3000;2.2.4&#x3000;SafeFrame&#x7684;URI&#x516C;&#x7EA6;<br>&#x3000;&#x3000;2.3&#x3000;&#x5B9E;&#x73B0;&#x6CE8;&#x610F;&#x4E8B;&#x9879;<br>&#x3000;&#x3000;2.4&#x3000;SafeFrame&#x7684;&#x6E32;&#x67D3;&#x7EC6;&#x5219;<br>&#x3000;&#x3000;2.5&#x3000;&#x901A;&#x4FE1;&#x673A;&#x5236;&#x7684;&#x7EC6;&#x5219;<br><strong>3. SafeFrame&#x6807;&#x7B7E;</strong><br>&#x3000;&#x3000;3.1&#x3000;SafeFrame&#x6807;&#x7B7E;&#x7ED3;&#x6784;&amp;&#x8981;&#x6C42;<br>&#x3000;&#x3000;&#x3000;3.1.1&#x3000;SCRIPT&#x6807;&#x7B7E;<br>&#x3000;&#x3000;&#x3000;3.1.2&#x3000;&#x4F7F;&#x7528;JavaScript&#x5904;&#x7406;&#x6570;&#x636E;&#x6807;&#x7B7E;<br>&#x3000;&#x3000;&#x3000;&#x3000;3.1.2.1&#x3000;&#x4F8B;&#x5B50;&#xFF1A;&#x4E00;&#x6B21;&#x6027;&#x5904;&#x7406;&#x6240;&#x6709;&#x6807;&#x7B7E;<br>&#x3000;&#x3000;&#x3000;&#x3000;3.1.2.2&#x3000;&#x4F8B;&#x5B50;&#xFF1A;&#x5728;&#x6570;&#x636E;&#x6807;&#x7B7E;&#x4E4B;&#x524D;&#x5148;&#x5B9A;&#x4E49;SafeFrame&#x7F51;&#x7AD9;&#x5E93;<br>&#x3000;&#x3000;&#x3000;&#x3000;3.1.2.3&#x3000;&#x4F8B;&#x5B50;&#xFF1A;&#x6709;&#x81EA;&#x52A8;&#x5F15;&#x5BFC;&#x7684;&#x5144;&#x5F1F;&#x6807;&#x7B7E;&#x7684;SafeFrame&#x6570;&#x636E;&#x6807;&#x7B7E;<br><strong>4. &#x7F51;&#x7AD9;API&#x5B9E;&#x65BD;&#x7EC6;&#x5219;</strong><br>&#x3000;&#x3000;4.1&#x3000;&#x547D;&#x540D;&#x7A7A;&#x95F4; <code>$sf.host</code><br>&#x3000;&#x3000;4.2&#x3000;&#x547D;&#x540D;&#x7A7A;&#x95F4; <code>$sf.host.conf</code><br>&#x3000;&#x3000;4.3&#x3000;&#x547D;&#x540D;&#x7A7A;&#x95F4; <code>$sf.info</code><br>&#x3000;&#x3000;4.4&#x3000;&#x7C7B; <code>$sf.host.Config</code><br>&#x3000;&#x3000;4.5&#x3000;&#x7C7B; <code>$sf.host.PosConfig</code><br>&#x3000;&#x3000;4.6&#x3000;&#x7C7B; <code>$sf.host.Position</code><br>&#x3000;&#x3000;4.7&#x3000;&#x7C7B; <code>$sf.host.PosMeta</code><br>&#x3000;&#x3000;4.8&#x3000;&#x51FD;&#x6570; <code>$sf.host.boot</code><br>&#x3000;&#x3000;4.9&#x3000;&#x51FD;&#x6570; <code>$sf.host.status</code><br>&#x3000;&#x3000;4.10&#x3000;&#x51FD;&#x6570; <code>$sf.host.nuke</code><br>&#x3000;&#x3000;4.11&#x3000;&#x51FD;&#x6570; <code>$sf.host.get</code><br>&#x3000;&#x3000;4.12&#x3000;&#x51FD;&#x6570; <code>$sf.host.render</code><br><strong>5. &#x5916;&#x90E8;&#x65B9;API&#x5B9E;&#x73B0;</strong><br>&#x3000;&#x3000;5.1&#x3000;&#x547D;&#x540D;&#x7A7A;&#x95F4; <code>$sf.ext</code><br>&#x3000;&#x3000;5.2&#x3000;&#x51FD;&#x6570; <code>$sf.ext.register</code><br>&#x3000;&#x3000;5.3&#x3000;&#x51FD;&#x6570; <code>$sf.ext.supports</code><br>&#x3000;&#x3000;5.4&#x3000;&#x51FD;&#x6570; <code>$sf.ext.geom</code><br>&#x3000;&#x3000;5.5&#x3000;&#x51FD;&#x6570; <code>$sf.ext.expand</code><br>&#x3000;&#x3000;5.6&#x3000;&#x51FD;&#x6570; <code>$sf.ext.collapse</code><br>&#x3000;&#x3000;5.7&#x3000;&#x51FD;&#x6570; <code>$sf.ext.status</code><br>&#x3000;&#x3000;5.8&#x3000;&#x51FD;&#x6570; <code>$sf.ext.meta</code><br>&#x3000;&#x3000;5.9&#x3000;&#x51FD;&#x6570; <code>$sf.ext.cookie</code><br>&#x3000;&#x3000;5.10&#x3000;&#x51FD;&#x6570; <code>$sf.ext.inViewPercentage</code><br>&#x3000;&#x3000;5.11&#x3000;&#x51FD;&#x6570; <code>$sf.ext.winHasFocus</code></p>
<hr>
<h3 id="&#x6267;&#x884C;&#x6458;&#x8981;"><a href="#&#x6267;&#x884C;&#x6458;&#x8981;" class="headerlink" title="&#x6267;&#x884C;&#x6458;&#x8981;"></a>&#x6267;&#x884C;&#x6458;&#x8981;</h3><p>SafeFrame1.0&#x6280;&#x672F;&#x662F;&#x6307;&#x4E00;&#x79CD;&#x652F;&#x6301;API&#x7684;iframe&#xFF0C;&#x5B83;&#x5F00;&#x8F9F;&#x4E86;&#x4E00;&#x6761;&#x53D1;&#x5E03;&#x5546;&#x9875;&#x9762;&#x5185;&#x5BB9;&#x4E0E;&#x5305;&#x542B;&#x5728;iframe&#x4E2D;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#xFF08;&#x5982;&#x5E7F;&#x544A;&#xFF09;&#x4E4B;&#x95F4;&#x6C9F;&#x901A;&#x7684;&#x7EBF;&#x8DEF;&#x3002;&#x56E0;&#x4E3A;&#x6709;&#x4E86;&#x8FD9;&#x6761;&#x6C9F;&#x901A;&#x7EBF;&#x8DEF;&#xFF0C;&#x6295;&#x653E;&#x5230;SafeFrame&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x80FD;&#x591F;&#x6536;&#x96C6;&#x6570;&#x636E;&#x5E76;&#x4E14;&#x62E5;&#x6709;&#x4E30;&#x5BCC;&#x7684;&#x4E92;&#x52A8;&#xFF0C;&#x5982;&#x5E7F;&#x544A;&#x6269;&#x5C55;&#x3002;&#x8FD9;&#x662F;&#x6807;&#x51C6;&#x7684;iframe&#x6240;&#x4E0D;&#x5177;&#x5907;&#x7684;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x6709;&#x7834;&#x574F;&#x6027;&#x7684;&#x5E7F;&#x544A;&#x884C;&#x4E3A;&#x548C;&#x7F51;&#x9875;&#x5185;&#x5D4C;&#x6295;&#x653E;&#x5E7F;&#x544A;&#x7684;&#x6F5C;&#x5728;&#x5B89;&#x5168;&#x98CE;&#x9669;&#xFF0C;&#x53D1;&#x5E03;&#x5546;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x5C06;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x6295;&#x653E;&#x5230;iframe&#x4E2D;&#x3002;</p>
<p>iframe&#x662F;&#x4E00;&#x79CD;&#x53D1;&#x5E03;&#x5546;&#x4E3B;&#x7F51;&#x9875;&#x4E2D;&#x7684;&#x5FAE;&#x578B;HTML&#x9875;&#x9762;&#x3002;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;iframe&#xFF0C;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x4EE5;iframe&#x4E3A;&#x8FB9;&#x754C;&#x88AB;&#x9694;&#x79BB;&#x4E14;&#x5B83;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x4EFB;&#x4F55;&#x5173;&#x4E8E;&#x9875;&#x9762;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x56E0;&#x4E3A;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x9875;&#x9762;&#x5185;&#x5BB9;&#xFF0C;&#x6240;&#x4EE5;iframe&#x5185;&#x7684;&#x5E7F;&#x544A;&#x5C31;&#x65E0;&#x6CD5;&#x6269;&#x5C55;&#xFF0C;&#x65E0;&#x6CD5;&#x52A8;&#x6001;&#x7684;&#x4E0E;&#x7F51;&#x7AD9;&#x8BBF;&#x5BA2;&#x8FDB;&#x884C;&#x4E92;&#x52A8;&#xFF0C;&#x5E76;&#x4E14;&#x65E0;&#x6CD5;&#x6536;&#x96C6;&#x4EFB;&#x4F55;&#x5FC5;&#x8981;&#x7684;&#x80FD;&#x591F;&#x501F;&#x6B64;&#x5224;&#x65AD;&#x5E7F;&#x544A;&#x6548;&#x679C;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4FDD;&#x62A4;&#x4E86;&#x53D1;&#x5E03;&#x5546;&#xFF0C;&#x4F46;&#x540C;&#x65F6;&#x4E5F;&#x9650;&#x5236;&#x4E86;&#x5E7F;&#x544A;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x5E76;&#x4E14;&#x56E0;&#x4E3A;iframes&#x7684;&#x5C40;&#x9650;&#x6027;&#x964D;&#x4F4E;&#x4E86;&#x5A92;&#x4F53;&#x5E93;&#x7684;&#x4EF7;&#x503C;&#x3002;</p>
<p>&#x800C;SafeFrame&#x63D0;&#x4F9B;&#x7684;&#x652F;&#x6301;API&#x7684;iframe&#x4EE5;&#x4E00;&#x79CD;&#x53D7;&#x63A7;&#x548C;&#x900F;&#x660E;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5F00;&#x8F9F;&#x4E86;&#x7F51;&#x9875;&#x4EE3;&#x7801;&#x548C;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x6865;&#x6881;&#x3002;&#x8FD9;&#x79CD;&#x901A;&#x4FE1;&#x5141;&#x8BB8;&#x4E30;&#x5BCC;&#x7684;&#x4E92;&#x52A8;&#xFF0C;&#x540C;&#x65F6;&#x4FDD;&#x62A4;&#x53D1;&#x5E03;&#x5546;&#x7684;&#x9875;&#x9762;&#x4EE5;&#x9632;&#x672A;&#x77E5;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x635F;&#x574F;&#x9875;&#x9762;&#x5B8C;&#x6574;&#x6027;&#x7684;&#x98CE;&#x9669;&#x3002;</p>
<p>SafeFrame&#x7528;&#x4E8E;&#x6570;&#x5B57;&#x5E7F;&#x544A;&#x7684;&#x4E00;&#x4E9B;&#x4E3B;&#x8981;&#x4F18;&#x52BF;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li><p><strong>&#x6D88;&#x8D39;&#x8005;&#x4FDD;&#x62A4;</strong><br>SafeFrames&#x901A;&#x8FC7;&#x63D0;&#x4F9B;&#x5177;&#x6709;API&#x7684;iframe&#x6765;&#x4E0E;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x5B9E;&#x73B0;&#x4FE1;&#x606F;&#x5171;&#x4EAB;&#xFF0C;&#x53D1;&#x5E03;&#x5546;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x4EC0;&#x4E48;&#x5185;&#x5BB9;&#x5141;&#x8BB8;&#x5171;&#x4EAB;&#x56E0;&#x800C;&#x80FD;&#x591F;&#x4FDD;&#x62A4;&#x654F;&#x611F;&#x7684;&#x6D88;&#x8D39;&#x8005;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x4E2A;&#x4EBA;email&#x5730;&#x5740;&#xFF0C;&#x5BC6;&#x7801;&#x751A;&#x81F3;&#x94F6;&#x884C;&#x4FE1;&#x606F;&#x3002;</p>
</li>
<li><p><strong>&#x53D1;&#x5E03;&#x5546;&#x63A7;&#x5236;&#x6743;</strong><br>&#x53D1;&#x5E03;&#x5546;&#x548C;&#x5E7F;&#x544A;&#x4EE3;&#x7801;&#x4E4B;&#x95F4;&#x7684;&#x9694;&#x79BB;&#xFF0C;&#x4F7F;&#x53D1;&#x5E03;&#x5546;&#x80FD;&#x591F;&#x4FDD;&#x6301;&#x5BF9;&#x9875;&#x9762;&#x5E03;&#x5C40;&#x7684;&#x63A7;&#x5236;&#xFF0C;&#x9650;&#x5236;&#x6765;&#x81EA;&#x5E7F;&#x544A;&#x7684;&#x5E72;&#x6270;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x5141;&#x8BB8;&#x4E30;&#x5BCC;&#x7684;&#x4EA4;&#x4E92;&#x548C;&#x6709;&#x9650;&#x7684;&#x6570;&#x636E;&#x6536;&#x96C6;&#x3002;&#x4F7F;&#x7528;SafeFrame API, &#x53D1;&#x5E03;&#x5546;&#x4E5F;&#x6709;&#x80FD;&#x529B;&#x51B3;&#x5B9A;&#x54EA;&#x4E9B;&#x7F51;&#x7AD9;&#x4FE1;&#x606F;&#xFF08;&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;&#xFF09;&#x5E94;&#x8BE5;&#x66B4;&#x9732;&#x7ED9;&#x5E7F;&#x544A;&#x4E3B;&#x548C;&#x5382;&#x5546;</p>
</li>
<li><p><strong>&#x53D1;&#x5E03;&#x5546;&#x6548;&#x7387;</strong><br>&#x901A;&#x8FC7;&#x5B9E;&#x65BD;SafeFrame,  &#x53D1;&#x5E03;&#x5546;&#x53EF;&#x4EE5;&#x5141;&#x8BB8;&#x5E7F;&#x544A;&#x5728;&#x4E00;&#x4E2A;iframe&#x4E2D;&#x63D0;&#x4F9B;&#x4E30;&#x5BCC;&#x7684;&#x4EA4;&#x4E92;&#xFF0C;&#x540C;&#x65F6;&#x4FDD;&#x6301;&#x63A7;&#x5236;&#xFF0C;&#x9632;&#x6B62;&#x5E7F;&#x544A;&#x4EE3;&#x7801;&#x7834;&#x574F;&#x9875;&#x9762;&#x529F;&#x80FD;&#x3002;&#x5141;&#x8BB8;&#x5BCC;&#x5A92;&#x4F53;&#x5B58;&#x5728;&#x4E8E;SafeFrame&#x4E2D;&#x80FD;&#x591F;&#x63D0;&#x9AD8;&#x6F5C;&#x5728;&#x6536;&#x5165;&#xFF0C;&#x540C;&#x65F6;&#x63A7;&#x5236;&#x8FD0;&#x8425;&#x6210;&#x672C;&#x3002;</p>
</li>
<li><p><strong>&#x6807;&#x51C6;&#x5316;&#x7684;&#x5E7F;&#x544A;&#x5E03;&#x5C40;</strong><br>&#x5E7F;&#x544A;&#x6280;&#x672F;&#x63D0;&#x4F9B;&#x5546;&#x53EF;&#x4EE5;&#x89C4;&#x8303;&#x81EA;&#x5DF1;&#x7684;&#x5BCC;&#x5A92;&#x4F53;&#x5E7F;&#x544A;&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x4FBF;&#x5B83;&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55;&#x4F9D;&#x9644;SafeFrame API&#x534F;&#x8BAE;&#x7684;&#x53D1;&#x5E03;&#x5546;&#x7F51;&#x7EDC;&#x4E0A;&#x8FD0;&#x884C;&#xFF0C;&#x540C;&#x65F6;&#x964D;&#x4F4E;&#x8FD0;&#x8425;&#x6210;&#x672C;&#x3002;</p>
</li>
<li><p><strong>&#x652F;&#x6301;&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x4E0E;&#x5176;&#x4ED6;&#x884C;&#x4E1A;&#x8BA1;&#x5212;</strong><br>SafeFrame1.0&#x63D0;&#x4F9B;&#x673A;&#x5236;&#xFF0C;&#x652F;&#x6301;3MS&#x53D1;&#x5C55;&#x4E0B;&#x7684;&#x53EF;&#x89C1;&#x66DD;&#x5149;&#x4EE5;&#x53CA;DAA&#x7684;AdChoices&#x548C;&#x5176;&#x4ED6;&#x9690;&#x79C1;&#x7684;&#x4E3E;&#x63AA;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;SafeFrame&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x9AD8;&#x7684;&#x9690;&#x79C1;&#x63A7;&#x5236;&#xFF0C;&#x8FD9;&#x662F;&#x4EE5;&#x5F80;&#x7684;&#x6807;&#x51C6;iframe&#x505A;&#x4E0D;&#x5230;&#x7684;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x901A;&#x8FC7;SafeFrames&#x5B9E;&#x73B0;&#x7684;&#x900F;&#x660E;&#x901A;&#x4FE1;&#x4E3A;&#x652F;&#x6301;&#x5176;&#x4ED6;&#x884C;&#x4E1A;&#x4E3E;&#x63AA;&#x7684;&#x5960;&#x5B9A;&#x4E86;&#x57FA;&#x7840;&#x3002;</p>
</li>
</ul>
<p>&#x5F53;&#x4E00;&#x4E9B;&#x53D1;&#x5E03;&#x5546;&#x5DF2;&#x7ECF;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x7F51;&#x9875;&#x4E0A;&#x5B9E;&#x73B0;&#x4E86;&#x8FD9;&#x79CD;&#x6280;&#x672F;&#xFF0C;&#x800C;&#x4E14;&#x5E7F;&#x544A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x548C;&#x6280;&#x672F;&#x4F9B;&#x5E94;&#x5546;&#x5DF2;&#x7ECF;&#x4F5C;&#x51FA;&#x5FC5;&#x8981;&#x7684;&#x4FEE;&#x6539;&#xFF08;&#x5982;&#x679C;&#x6709;&#x5FC5;&#x8981;&#x4FEE;&#x6539;&#x7684;&#x8BDD;&#xFF09;&#x4EE5;&#x652F;&#x6301;&#x6295;&#x653E;&#x5E7F;&#x544A;&#x5230;&#x53D1;&#x5E03;&#x5546;&#x5B9E;&#x73B0;SafeFrames&#x65F6;&#xFF0C;SafeFrames&#x63D0;&#x4F9B;&#x7684;&#x8FD9;&#x4E9B;&#x597D;&#x5904;&#x5C31;&#x80FD;&#x5B8C;&#x5168;&#x5B9E;&#x73B0;&#x4E86;&#x3002;</p>
<p>SafeFrame&#x7684;&#x5DE5;&#x4F5C;&#x5C0F;&#x7EC4;&#x5DF2;&#x7ECF;&#x5EFA;&#x7ACB;&#x4E86;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684;&#x53C2;&#x8003;&#x5B9E;&#x4F8B;&#xFF0C;&#x4EE5;&#x9F13;&#x52B1;&#x5728;&#x5E02;&#x573A;&#x4E0A;&#x88AB;&#x8FC5;&#x901F;&#x91C7;&#x7528;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5728;&#x53D1;&#x5E03;&#x5546;&#x8FC7;&#x6E21;&#x5230;SafeFrame1.0&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5E7F;&#x544A;&#x5F00;&#x53D1;&#x8005;&#x548C;&#x6280;&#x672F;&#x4F9B;&#x5E94;&#x5546;&#x5FC5;&#x987B;&#x7ED9;&#x4E88;&#x8DB3;&#x591F;&#x7684;&#x8010;&#x5FC3;&#x3002;</p>
<h3 id="&#x76EE;&#x6807;&#x53D7;&#x4F17;"><a href="#&#x76EE;&#x6807;&#x53D7;&#x4F17;" class="headerlink" title="&#x76EE;&#x6807;&#x53D7;&#x4F17;"></a>&#x76EE;&#x6807;&#x53D7;&#x4F17;</h3><p>&#x672C;&#x89C4;&#x8303;&#x4E2D;&#x7684;&#x6280;&#x672F;&#x7EC6;&#x5219;&#x4E3B;&#x8981;&#x9002;&#x7528;&#x4E8E;&#x60F3;&#x5B9E;&#x73B0;SafeFrames&#x7684;&#x7F51;&#x7AD9;&#x6240;&#x6709;&#x8005;&#xFF0C;&#x548C;&#x5C06;&#x4F7F;&#x7528;SafeFrame&#x534F;&#x8BAE;&#x7684;&#x5BCC;&#x5A92;&#x4F53;&#x5E7F;&#x544A;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x3002;&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;&#x7F51;&#x7AD9;&#x548C;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x672C;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x89C4;&#x8303;&#xFF0C;&#x53BB;&#x5236;&#x5B9A;SafeFrame&#x534F;&#x8BAE;&#xFF0C;&#x5B9E;&#x73B0;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x4E0E;&#x4EFB;&#x4F55;&#x6295;&#x653E;&#x7684;&#x5E7F;&#x544A;&#x6216;&#x5176;&#x4ED6;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x3002;</p>
<p>Web&#x6280;&#x672F;&#x7684;&#x5382;&#x5546;&#x4E5F;&#x5E94;&#x8BE5;&#x719F;&#x6089;SafeFrame&#x7684;&#x89C4;&#x8303;&#xFF0C;&#x6765;&#x51B3;&#x5B9A;&#x4ED6;&#x4EEC;&#x662F;&#x5426;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#xFF0C;&#x4EE5;&#x652F;&#x6301;&#x5728;&#x5E02;&#x573A;&#x4E0A;&#x7684;SafeFrame&#x6280;&#x672F;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;SafeFrame&#x4E0D;&#x4EC5;&#x9650;&#x4E8E;&#x5728;&#x6570;&#x5B57;&#x5E7F;&#x544A;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x5B83;&#x4E5F;&#x53EF;&#x4EE5;&#x88AB;&#x4EFB;&#x4F55;&#x5BA2;&#x6237;&#x7AEF;/&#x670D;&#x52A1;&#x5668;&#x5173;&#x7CFB;&#x4F7F;&#x7528;&#x3002;</p>
<h3 id="&#x89C4;&#x683C;&#x66F4;&#x65B0;"><a href="#&#x89C4;&#x683C;&#x66F4;&#x65B0;" class="headerlink" title="&#x89C4;&#x683C;&#x66F4;&#x65B0;"></a>&#x89C4;&#x683C;&#x66F4;&#x65B0;</h3><table>
<thead>
<tr>
<th style="text-align:left">&#x7248;&#x672C;&#x53F7;</th>
<th style="text-align:left">&#x65E5;&#x671F;</th>
<th style="text-align:left">&#x6982;&#x8981;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1.0</td>
<td style="text-align:left">3/18/2013</td>
<td style="text-align:left">Original</td>
</tr>
<tr>
<td style="text-align:left">1.0.1</td>
<td style="text-align:left">4/16/2013</td>
<td style="text-align:left">Minor name corrections</td>
</tr>
<tr>
<td style="text-align:left">1.1</td>
<td style="text-align:left">3/14/2014</td>
<td style="text-align:left">Support for communicating whether top browser window is &#x201C;in focus&#x201D; (changes in 5.1 and added 5.11)</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="1-&#x6982;&#x51B5;"><a href="#1-&#x6982;&#x51B5;" class="headerlink" title="1. &#x6982;&#x51B5;"></a>1. &#x6982;&#x51B5;</h2><p>SafeFrame&#x63CF;&#x8FF0;&#x4E86;&#x4E00;&#x4E2A;&#x6846;&#x67B6;&#xFF0C;&#x5B83;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x6765;&#x5305;&#x542B;&#x6295;&#x653E;&#x5230;&#x9875;&#x9762;&#x4E0A;&#x7684;HTML&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x5EFA;&#x7ACB;&#x4E86;&#x4E00;&#x4E2A;&#x4F7F;&#x7F51;&#x9875;&#x548C;&#x5B83;&#x63D0;&#x4F9B;&#x7684;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x6C9F;&#x901A;&#x7684;API&#x3002;&#x5728;SafeFrame1.0&#x4E2D;&#xFF0C;&#x7279;&#x5B9A;&#x7684;&#x5BF9;&#x8C61;&#x548C;&#x51FD;&#x6570;&#x88AB;&#x7528;&#x6765;&#x63A7;&#x5236;&#x521B;&#x5EFA;&#x51FA;&#x6765;&#x7684;SafeFrame&#x5BB9;&#x5668;&#x5E76;&#x4E0E;&#x4E4B;&#x4EA4;&#x4E92;&#xFF0C;&#x751A;&#x81F3;&#x5141;&#x8BB8;&#x4E30;&#x5BCC;&#x7684;&#x4E92;&#x52A8;&#x3002;SafeFrames&#x7684;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x662F;&#x7528;SCRIPT&#x6807;&#x7B7E;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x6807;&#x8BB0;&#x5C01;&#x88C5;&#x5916;&#x90E8;HTML&#x5185;&#x5BB9;&#xFF0C;&#x540C;&#x65F6;&#x4FDD;&#x62A4;&#x4E3B;&#x9875;&#x9762;&#xFF0C;&#x4EE5;&#x9632;&#x90A3;&#x4E9B;&#x4F1A;&#x610F;&#x60F3;&#x4E0D;&#x5230;&#x5730;&#x65E0;&#x610F;&#x6216;&#x6545;&#x610F;&#x5F71;&#x54CD;&#x7F51;&#x7AD9;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x4E00;&#x79CD;&#x5BF9;&#x4E8E;&#x6295;&#x653E;&#x5230;iframe&#x7684;&#x5185;&#x5BB9;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;SafeFrame&#x4E3A;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x63D0;&#x4F9B;&#x4E86;&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x548C;&#x4E30;&#x5BCC;&#x7279;&#x6027;&#xFF0C;&#x8FD9;&#x662F;&#x4EE5;&#x5F80;&#x7684;&#x6807;&#x51C6;&#x7684;iframe&#x505A;&#x4E0D;&#x5230;&#x7684;&#x3002;</p>
<h3 id="1-1-SafeFrames&#x7EC4;&#x4EF6;"><a href="#1-1-SafeFrames&#x7EC4;&#x4EF6;" class="headerlink" title="1.1 SafeFrames&#x7EC4;&#x4EF6;"></a>1.1 SafeFrames&#x7EC4;&#x4EF6;</h3><p>SafeFrame&#x7BA1;&#x7406;&#x4E24;&#x65B9;&#x4E4B;&#x95F4;&#x7684;&#x4E92;&#x52A8;&#xFF1A;Host&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x3002;Host&#x62E5;&#x6709;&#x4E00;&#x4E2A;&#x57DF;&#x540D;&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x663E;&#x793A;&#x7B2C;&#x4E09;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6BD4;&#x5982;&#x5E7F;&#x544A;&#x3002;&#x6B64;&#x5916;&#xFF0C;SafeFrame&#x4E0E;&#x4E00;&#x4E2A;&#x4E8C;&#x7EA7;&#x57DF;&#x540D;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x3002;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x6295;&#x653E;&#x5230;&#x8FD9;&#x4E2A;&#x57DF;&#x540D;&#xFF0C;&#x5E76;&#x4ECE;&#x90A3;&#x91CC;&#x901A;&#x8FC7;&#x53D7;&#x63A7;&#x7684;SafeFrame API&#x529F;&#x80FD;&#x4E0E;&#x4E3B;&#x7F51;&#x7AD9;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x3002;</p>
<h4 id="1-1-1-Host"><a href="#1-1-1-Host" class="headerlink" title="1.1.1 Host"></a>1.1.1 Host</h4><p>&#x672C;&#x6587;&#x6863;&#x4E2D;&#xFF0C;Host&#x662F;&#x4E00;&#x4E2A;&#x7F51;&#x7AD9;&#x62E5;&#x6709;&#x7684;&#x67D0;&#x4E2A;&#x57DF;&#xFF08;&#x6216;&#x4E00;&#x7EC4;&#x57DF;&#xFF09;&#xFF0C;&#x901A;&#x5E38;&#x5728;&#x8FD9;&#x4E0A;&#x9762;&#x4F1A;&#x663E;&#x793A;&#x5185;&#x5BB9;&#x7ED9;&#x901A;&#x8FC7;Web&#x6D4F;&#x89C8;&#x5668;&#x65B9;&#x5F0F;&#x8BBF;&#x95EE;&#x9875;&#x9762;&#x7684;&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x3002;&#x5728;&#x7F51;&#x7EDC;&#x5E7F;&#x544A;&#x4E2D;&#xFF0C;host&#x662F;&#x201C;&#x53D1;&#x5E03;&#x5546;&#x201D;&#x7684;&#x4EE3;&#x540D;&#x8BCD;&#xFF0C;&#x4F46;&#x5728;&#x5176;&#x4ED6;&#x884C;&#x4E1A;&#x5B83;&#x53EF;&#x80FD;&#x6709;&#x5DEE;&#x5F02;&#x3002;host&#x8D1F;&#x8D23;&#x90E8;&#x7F72;SafeFrame&#x6846;&#x67B6;&#xFF0C;&#x5305;&#x62EC;API&#x548C;&#x4E00;&#x7CFB;&#x5217;&#x7528;&#x4E8E;SafeFrame&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF08;JavaScript&#x2122;&#x548C;HTML&#x6587;&#x4EF6;&#xFF09;&#x3002;host&#x8FD8;&#x8D1F;&#x8D23;&#x6E32;&#x67D3;&#x6295;&#x653E;&#x5230;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x3002;</p>
<h4 id="1-1-2-&#x7B2C;&#x4E09;&#x65B9;"><a href="#1-1-2-&#x7B2C;&#x4E09;&#x65B9;" class="headerlink" title="1.1.2 &#x7B2C;&#x4E09;&#x65B9;"></a>1.1.2 &#x7B2C;&#x4E09;&#x65B9;</h4><p>&#x672C;&#x6587;&#x6863;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x662F;&#x4E00;&#x4E2A;&#x6765;&#x6E90;&#x4E8E;host&#x57DF;&#x4E4B;&#x5916;&#x7684;&#x5185;&#x5BB9;&#x63D0;&#x4F9B;&#x8005;&#x3002;&#x5B83;&#x63D0;&#x4F9B;&#x5185;&#x5BB9;&#xFF0C;&#x6216;&#x8005;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x5185;&#x5BB9;&#x6570;&#x636E;&#x3002;&#x5728;&#x7F51;&#x7EDC;&#x5E7F;&#x544A;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x53EF;&#x80FD;&#x662F;&#x5E7F;&#x544A;&#x670D;&#x52A1;&#x5668;&#xFF0C;ad exchange&#xFF0C;ad network&#x6216;&#x4EFB;&#x4F55;&#x63A8;&#x9001;&#x5E7F;&#x544A;&#x5230;host&#x57DF;&#x7684;&#x6280;&#x672F;&#x7EC4;&#x7EC7;&#x3002;</p>
<p>&#x5728;&#x8BB8;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x63D0;&#x4F9B;&#x5546;&#x53EF;&#x80FD;&#x5B8C;&#x5168;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5185;&#x5BB9;&#x4EE3;&#x7801;&#xFF0C;&#x4F46;&#x662F;&#x5F53;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x4E0E;host&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#xFF0C;&#x5982;&#x5185;&#x5BB9;&#x6269;&#x5C55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x5C31;&#x9700;&#x8981;&#x7528;&#x4E00;&#x4E2A;JavaScript&#x683C;&#x5F0F;&#x7684;&#x6807;&#x7B7E;&#x6765;&#x5305;&#x88F9;SafeFrame API&#x7684;&#x7EC6;&#x8282;&#x3002;</p>
<blockquote>
<p><strong>&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br>&#x5982;&#x679C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x4E0E;&#x5B83;&#x6240;&#x5728;&#x7684;host&#x7AD9;&#x70B9;&#x8FDB;&#x884C;&#x4E92;&#x52A8;&#xFF0C;SafeFrame1.0&#x6240;&#x63D0;&#x4F9B;&#x7684;&#x5BB9;&#x5668;&#x7BA1;&#x7406;&#x6280;&#x672F;&#x53EA;&#x9700;&#x8981;&#x5BF9;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4EFB;&#x4F55;&#x6269;&#x5C55;&#x6216;&#x6D6E;&#x52A8;&#x7684;&#x884C;&#x4E3A;&#x90FD;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4E00;&#x4E9B;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x4E14;&#x5FC5;&#x987B;&#x5728;JavaScript&#x4E2D;&#x8FDB;&#x884C;&#x3002;&#x800C;&#x9650;&#x5236;&#x4E8E;SafeFrame&#x5BB9;&#x5668;&#x91CC;&#x7684;&#x4EFB;&#x4F55;&#x4E30;&#x5BCC;&#x7684;&#x4EA4;&#x4E92;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x3002;</p>
</blockquote>
<h4 id="1-1-3-API"><a href="#1-1-3-API" class="headerlink" title="1.1.3 API"></a>1.1.3 API</h4><p>SafeFrame&#x89C4;&#x8303;&#x4E86;&#x4E00;&#x4E2A;Host&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#x7684;API&#x3002;&#x4F7F;&#x7528;&#x8BE5;API&#xFF0C;Host&#x53EF;&#x4EE5;&#x5728;&#x5FC5;&#x8981;&#x65F6;&#x7ED9;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x63D0;&#x4F9B;&#x4FE1;&#x606F;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x5411;host&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#xFF08;&#x5373;&#x6269;&#x5C55;&#xFF09;&#x3002;</p>
<p>&#x968F;&#x7740;&#x5B9E;&#x65BD;&#x548C;&#x884C;&#x4E1A;&#x5E94;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x5176;&#x4ED6;&#x884C;&#x4E1A;&#x89C4;&#x8303;&#x548C;&#x4E3E;&#x63AA;&#x5C06;&#x6269;&#x5C55;SafeFrame API&#x7684;&#x529F;&#x80FD;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4E3A;&#x4E86;&#x652F;&#x6301;&#x7531;3MS&#x4E3E;&#x63AA;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x7684;&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x66DD;&#x5149;&#xFF0C;&#x5F53;&#x524D;&#x7684;&#x89C4;&#x8303;&#x63D0;&#x4F9B;&#x4E86;&#x6784;&#x5EFA;&#x6A21;&#x5757;&#x3002;&#x800C;&#x4E14;&#xFF0C;&#x8BE5;&#x89C4;&#x8303;&#x4E5F;&#x8BB8;&#x4F1A;&#x6269;&#x5C55;&#xFF0C;&#x4EE5;&#x652F;&#x6301;DAA&#x7684;&#x5E7F;&#x544A;&#x9009;&#x62E9;&#x65B9;&#x6848;&#x3002;</p>
<h4 id="1-1-4-&#x4E8C;&#x7EA7;&#x57DF;&#x540D;"><a href="#1-1-4-&#x4E8C;&#x7EA7;&#x57DF;&#x540D;" class="headerlink" title="1.1.4 &#x4E8C;&#x7EA7;&#x57DF;&#x540D;"></a>1.1.4 &#x4E8C;&#x7EA7;&#x57DF;&#x540D;</h4><p>SafeFrame&#x5728;&#x4E00;&#x4E2A;&#x7531;Host&#x63D0;&#x4F9B;&#x7684;&#x4E8C;&#x7EA7;&#x57DF;&#x540D;&#x4E2D;&#x8FD0;&#x4F5C;&#x3002;&#x8FD9;&#x4E2A;&#x4E8C;&#x7EA7;&#x57DF;&#x540D;&#x6700;&#x597D;&#x5EFA;&#x7ACB;&#x5728;&#x5185;&#x5BB9;&#x5206;&#x53D1;&#x7F51;&#x7EDC;&#xFF08;CDN&#xFF09;&#x4E0A;&#xFF0C;&#x4EE5;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x548C;&#x53EF;&#x7528;&#x6027;&#x3002;&#x8FD9;&#x4E2A;&#x4E8C;&#x7EA7;&#x57DF;&#x540D;&#x63D0;&#x4F9B;&#x4E86;Host&#x4E0E;&#x7B2C;&#x4E09;&#x65B9;&#x4E4B;&#x95F4;&#x7684;&#x672A;&#x77E5;&#x7A7A;&#x95F4;&#xFF08;&#x5C31;&#x662F;&#x4F5C;&#x4E3A;Host&#x4E0E;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;&#x9694;&#x79BB;&#x533A;&#xFF09;&#x3002;&#x7B2C;&#x4E09;&#x65B9;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x7684;Host&#x57DF;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BF7;&#x6C42;&#x8BBF;&#x95EE;&#x5230;&#xFF0C;&#x901A;&#x8FC7;&#x4F7F;&#x7528;SafeFrame API&#x83B7;&#x5F97;&#x3002;</p>
<h3 id="1-2-&#x4F18;&#x70B9;"><a href="#1-2-&#x4F18;&#x70B9;" class="headerlink" title="1.2 &#x4F18;&#x70B9;"></a>1.2 &#x4F18;&#x70B9;</h3><p>SafeFrame&#x7ED9;&#x62E5;&#x6709;&#x8005;&#x548C;&#x4E3B;&#x7F51;&#x7AD9;&#x6216;&#x8005;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;&#x8FD0;&#x8425;&#x5546;&#x63D0;&#x4F9B;&#x76CA;&#x5904;&#x3002;</p>
<h4 id="1-2-1-&#x7B2C;&#x4E09;&#x65B9;&#x548C;Host&#x4E4B;&#x95F4;&#x7684;&#x900F;&#x660E;&#x5EA6;"><a href="#1-2-1-&#x7B2C;&#x4E09;&#x65B9;&#x548C;Host&#x4E4B;&#x95F4;&#x7684;&#x900F;&#x660E;&#x5EA6;" class="headerlink" title="1.2.1 &#x7B2C;&#x4E09;&#x65B9;&#x548C;Host&#x4E4B;&#x95F4;&#x7684;&#x900F;&#x660E;&#x5EA6;"></a>1.2.1 &#x7B2C;&#x4E09;&#x65B9;&#x548C;Host&#x4E4B;&#x95F4;&#x7684;&#x900F;&#x660E;&#x5EA6;</h4><p>SafeFrame&#x63D0;&#x4F9B;Host&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x4FE1;&#x606F;&#x7684;&#x673A;&#x5236;&#x3002;&#x53EF;&#x4EE5;&#x88AB;&#x5171;&#x4EAB;&#x7684;&#x4FE1;&#x606F;&#x7684;&#x4E00;&#x4E9B;&#x53EF;&#x80FD;&#x6027;&#x5305;&#x62EC;&#xFF1A;&#x7F51;&#x7AD9;&#x6307;&#x5B9A;&#x7684;&#x5143;&#x6570;&#x636E;&#xFF0C;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x51E0;&#x4F55;&#x4F4D;&#x7F6E;&#xFF0C;&#x4EE5;&#x53CA;SafeFrame&#x5BB9;&#x5668;&#x662F;&#x5426;&#x5728;&#x89C6;&#x56FE;&#x91CC;&#x7B49;&#x7B49;&#x3002;</p>
<h3 id="1-2-2-&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x7684;API"><a href="#1-2-2-&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x7684;API" class="headerlink" title="1.2.2 &#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x7684;API"></a>1.2.2 &#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x7684;API</h3><p>&#x968F;&#x7740;&#x884C;&#x4E1A;&#x5E94;&#x7528;&#xFF0C;&#x8BA9;&#x6240;&#x6709;&#x5E7F;&#x544A;&#x5546;&#x548C;&#x5176;&#x4ED6;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x63D0;&#x4F9B;&#x5546;&#x53EF;&#x4EE5;&#x4E0E;Host&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x7684;&#x516C;&#x5171;API&#xFF0C;&#x662F;&#x8BA9;&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x4E92;&#x52A8;&#x66F4;&#x6E05;&#x6670;&#x7684;&#x57FA;&#x7840;&#x3002;</p>
<h3 id="1-2-3-&#x201C;&#x6C99;&#x7BB1;&#x5316;&#x201D;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;"><a href="#1-2-3-&#x201C;&#x6C99;&#x7BB1;&#x5316;&#x201D;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;" class="headerlink" title="1.2.3 &#x201C;&#x6C99;&#x7BB1;&#x5316;&#x201D;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;"></a>1.2.3 &#x201C;&#x6C99;&#x7BB1;&#x5316;&#x201D;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;</h3><p>SafeFrame&#x628A;&#x5185;&#x5BB9;&#x6E32;&#x67D3;&#x5230;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x548C;Host&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x7684;&#x660E;&#x786E;&#x5212;&#x5206;&#x7684;&#x5BB9;&#x5668;&#x3002;&#x8FD9;&#x4E2A;&#x969C;&#x788D;&#x5F62;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x201C;&#x6C99;&#x7BB1;&#x201D;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x7ED9;&#x7F51;&#x7AD9;&#x4E00;&#x4E9B;&#x5B89;&#x5168;&#x611F;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4EE5;&#x4E0B;&#x529F;&#x80FD;&#xFF1A;</p>
<ul>
<li><p><strong>&#x57FA;&#x7840;&#x5B89;&#x5168;</strong><br>&#x5B9E;&#x8D28;&#x4E0A;&#xFF0C;SafeFrame&#x662F;&#x4E00;&#x4E2A;&#x6709;API&#x7684;iframe&#xFF0C;&#x8BE5;API&#x5B9E;&#x73B0;Host&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x901A;&#x4FE1;&#xFF0C;&#x5E76;&#x4E0E;iframe&#x4E00;&#x6837;&#x63D0;&#x4F9B;&#x76F8;&#x540C;&#x7684;&#x57FA;&#x7840;&#x5B89;&#x5168;&#x4FDD;&#x8BC1;&#x3002;&#x867D;&#x7136;API&#x5F00;&#x542F;&#x4E86;&#x53CC;&#x65B9;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x4F46;&#x7F51;&#x7AD9;&#x4F1A;&#x63A7;&#x5236;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x4FE1;&#x606F;&#xFF08;&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;&#xFF09;&#x80FD;&#x88AB;&#x8BBF;&#x95EE;&#x6216;&#x5171;&#x4EAB;&#xFF0C;&#x4EE5;&#x53CA;&#x5171;&#x4EAB;&#x7ED9;&#x8C01;&#x3002;</p>
</li>
<li><p><strong>&#x7A33;&#x5B9A;&#x6027;</strong><br>&#x5C31;&#x6807;&#x51C6;&#x7684;&#x5185;&#x90E8;&#x6846;&#x67B6;&#x6765;&#x8BF4;&#xFF0C;SafeFrame&#x91CC;Host&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x7684;&#x660E;&#x786E;&#x5212;&#x5206;&#xFF0C;&#x964D;&#x4F4E;&#x4E86;&#x5728;&#x6E32;&#x67D3;&#x5185;&#x5BB9;&#x65F6;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x7684;&#x53EF;&#x80FD;&#xFF0C;&#x4EE5;&#x53CA;&#x5BF9;Host&#x7684;JavaScript&#x548C;HTML&#x4EE3;&#x7801;&#x5185;&#x5BB9;&#x5E72;&#x6270;&#x7684;&#x673A;&#x4F1A;&#x3002;&#x7531;&#x4E8E;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x662F;&#x7531;&#x5B83;&#x81EA;&#x5DF1;&#x7684;HTML&#x6587;&#x6863;&#xFF0C;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x5957;CSS&#x89C4;&#x5219;&#xFF0C;&#x4EE5;&#x53CA;JavaScript&#x6E32;&#x67D3;&#x7684;&#xFF0C;&#x5B83;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4EA4;&#x4E92;&#x6216;&#x8986;&#x76D6;&#x7F51;&#x7AD9;&#x7684;JavaScript&#xFF0C;HTML&#xFF0C;&#x6216;&#x8005;CSS&#x3002;<br>&#x53E6;&#x5916;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4E0D;&#x4F1A;&#x5728;&#x4E0D;&#x9002;&#x5F53;&#x7684;&#x4F4D;&#x7F6E;&#x6E32;&#x67D3;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4F20;&#x9001;&#x7684;&#x539F;&#x59CB;&#x6570;&#x636E;&#x3001;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x5728;&#x7F51;&#x7AD9;&#x9875;&#x9762;&#x5185;&#x7684;&#x4EFB;&#x4F55;&#x5730;&#x65B9;&#x6E32;&#x67D3;&#x81EA;&#x5DF1;&#xFF0C;&#x8986;&#x76D6;&#x7F51;&#x7AD9;&#x7684;&#x5185;&#x5BB9;&#x548C;&#x529F;&#x80FD;&#xFF0C;&#x6216;&#x5728;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x4E4B;&#x4E0B;&#x5448;&#x73B0;&#x548C;&#x8D85;&#x51FA;&#x89C6;&#x56FE;&#x3002;<br>&#x7531;&#x4E8E;&#x53CC;&#x65B9;&#x4E4B;&#x95F4;&#x7684;&#x4EE3;&#x7801;&#x5E72;&#x6270;&#x88AB;&#x5305;&#x542B;&#x5728;SafeFrame&#x91CC;&#xFF0C;&#x4F7F;&#x7528;SafeFrame API&#xFF0C;&#x53CC;&#x65B9;&#x53EF;&#x4EE5;&#x4EE5;&#x53EF;&#x63A7;&#x548C;&#x900F;&#x660E;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x3002;</p>
</li>
<li><p><strong>&#x6027;&#x80FD;&#x6D4B;&#x91CF;</strong><br>&#x660E;&#x786E;&#x5B9A;&#x4E49;&#x5141;&#x8BB8;Host&#x8861;&#x91CF;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x6765;&#x52A0;&#x8F7D;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x4E8E;&#x6E32;&#x67D3;&#x5230;iframe&#x5185;&#x7684;&#x5185;&#x5BB9;&#x6765;&#x8BF4;&#x662F;&#x5F88;&#x597D;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x3002;&#x4F46;&#x662F;&#x5728;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x5185;&#x5D4C;&#x5728;Host&#x4EE3;&#x7801;&#x6295;&#x653E;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x662F;&#x4E0D;&#x80FD;&#x6D4B;&#x91CF;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x52A0;&#x8F7D;&#x65F6;&#x95F4;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4E0D;&#x88AB;&#x5305;&#x542B;&#x548C;&#x53EF;&#x4EE5;&#x5728;&#x7F51;&#x9875;&#x5185;&#x591A;&#x4E2A;&#x5730;&#x65B9;&#x5448;&#x73B0;&#x3002;&#x968F;&#x7740;SafeFrame&#x7684;API&#x8BA9;&#x5176;&#x4EA4;&#x4E92;&#x80FD;&#x529B;&#x6210;&#x4E3A;&#x53EF;&#x80FD;&#xFF0C;&#x4E00;&#x4E2A;&#x53EF;&#x884C;&#x7684;&#x529E;&#x6CD5;&#x662F;&#xFF0C;&#x4E00;&#x65E6;&#x88AB;&#x5185;&#x5D4C;&#x6295;&#x653E;&#x5230;&#x4E00;&#x4E2A;SafeFrame&#xFF0C;&#x5C31;&#x79FB;&#x52A8;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x3002;</p>
</li>
<li><p><strong>&#x4E24;&#x5168;&#x5176;&#x7F8E;&#xFF1A;&#x5BCC;&#x5A92;&#x4F53;&#x548C;&#x6570;&#x636E;&#x6536;&#x96C6;</strong><br>&#x7F51;&#x7AD9;&#x6240;&#x6709;&#x8005;&#x9762;&#x4E34;&#x7740;&#x9009;&#x62E9;&#xFF0C;&#x5230;&#x5E95;&#x662F;&#x5141;&#x8BB8;&#x5BCC;&#x5A92;&#x4F53;&#x5728;&#x4ED6;&#x4EEC;&#x7684;&#x7F51;&#x7AD9;&#x4E0A;&#x5185;&#x5D4C;&#x7F51;&#x9875;&#x4EE3;&#x7801;&#xFF0C;&#x65E0;&#x9650;&#x5236;&#x5730;&#x8BBF;&#x95EE;&#x9875;&#x9762;&#x6570;&#x636E;&#xFF0C;&#x8FD8;&#x662F;&#x5728;iframe&#x4E2D;&#x5C55;&#x73B0;&#x5185;&#x5BB9;&#xFF0C;&#x4F46;&#x4F1A;&#x963B;&#x6B62;&#x5927;&#x591A;&#x6570;&#x7684;&#x5BCC;&#x5A92;&#x4F53;&#x4E92;&#x52A8;&#x548C;&#x9650;&#x5236;&#x5927;&#x90E8;&#x5206;&#x6216;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x6536;&#x96C6;&#x3002;<br>&#x5C55;&#x73B0;&#x5185;&#x5BB9;&#x5230;SafeFrame&#x8BA9;&#x5BCC;&#x5A92;&#x4F53;&#x4EA4;&#x4E92;&#x548C;&#x53D7;&#x63A7;&#x5236;&#x7684;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x4E24;&#x5168;&#x5176;&#x7F8E;&#x3002;&#x89C4;&#x8303;&#x5B9E;&#x73B0;&#x4E86;iframe&#x6295;&#x653E;&#x7684;&#x5185;&#x5BB9;&#x7684;&#x65B0;&#x7279;&#x6027;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x53EF;&#x884C;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x5373;&#x6295;&#x653E;&#x5BCC;&#x5A92;&#x4F53;&#x5230;&#x4E00;&#x4E2A;&#x4EA4;&#x4E92;&#x5F0F;&#x7684;SafeFrame&#x800C;&#x4E0D;&#x662F;&#x5185;&#x5D4C;&#x5230;&#x7F51;&#x9875;&#x3002;</p>
</li>
</ul>
<h4 id="1-2-4-Host&#x81EA;&#x5B9A;&#x4E49;&#x548C;&#x63A7;&#x5236;"><a href="#1-2-4-Host&#x81EA;&#x5B9A;&#x4E49;&#x548C;&#x63A7;&#x5236;" class="headerlink" title="1.2.4 Host&#x81EA;&#x5B9A;&#x4E49;&#x548C;&#x63A7;&#x5236;"></a>1.2.4 Host&#x81EA;&#x5B9A;&#x4E49;&#x548C;&#x63A7;&#x5236;</h4><p>Host&#x53EF;&#x4EE5;&#x5B9A;&#x5236;SafeFrame API&#xFF0C;&#x6DFB;&#x52A0;&#x90A3;&#x4E9B;&#x5141;&#x8BB8;&#x7684;&#x529F;&#x80FD;&#x548C;&#x4E30;&#x5BCC;&#x7684;&#x4EA4;&#x4E92;&#x3002;&#x7F51;&#x7AD9;&#x4E5F;&#x53EF;&#x4EE5;&#x5448;&#x73B0;&#x65B0;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6216;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x5378;&#x8F7D;&#x5185;&#x5BB9;&#x3002;</p>
<h3 id="1-3-SafeFrames&#x548C;&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x66DD;&#x5149;"><a href="#1-3-SafeFrames&#x548C;&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x66DD;&#x5149;" class="headerlink" title="1.3 SafeFrames&#x548C;&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x66DD;&#x5149;"></a>1.3 SafeFrames&#x548C;&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x66DD;&#x5149;</h3><p>SafeFrame&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5305;&#x56F4;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x9632;&#x6B62;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x6709;&#x5173;&#x7F51;&#x7AD9;&#x7F51;&#x9875;&#x6216;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4FE1;&#x606F;&#x5185;&#x5BB9;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x8BE5;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#x548C;&#x901A;&#x8FC7;&#x4F7F;&#x7528;SafeFrame API&#x53D1;&#x9001;&#x548C;&#x63A5;&#x6536;&#x6D88;&#x606F;&#x4E0E;&#x7F51;&#x7AD9;&#x4EA4;&#x4E92;&#x3002;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x4F7F;&#x7F51;&#x7AD9;&#x80FD;&#x591F;&#x4E0E;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x5171;&#x4EAB;&#x7CBE;&#x9009;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x62EC;&#xFF0C;&#x8BA9;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x80FD;&#x591F;&#x786E;&#x5B9A;&#x5176;&#x662F;&#x5426;&#x5728;&#x89C6;&#x56FE;&#x4E2D;&#x7684;&#x51E0;&#x4F55;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x4E0B;&#x56FE;&#x8BF4;&#x660E;&#x4E86;SafeFrame&#x7684;&#x5185;&#x5BB9;&#x5982;&#x4F55;&#x663E;&#x793A;&#xFF0C;&#x5E76;&#x8868;&#x660E;&#x4E86;SafeFrame&#x5185;&#x6295;&#x653E;&#x7684;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x6709;25&#xFF05;&#x5728;&#x89C6;&#x56FE;&#x4E2D;&#x3002;<br><img src="/xfe/2016/08/29/safeframe-v1-1-final/sf1.png" alt="&#x56FE;1-1"></p>
<p>&#x4F7F;&#x7528;SafeFrame&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x63A5;&#x53E3;<code>$sf.ext.geom</code>&#xFF0C;&#x63D0;&#x4F9B;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x53EF;&#x4EE5;&#x786E;&#x5B9A;SafeFrame&#x76F8;&#x5BF9;&#x4E8E;&#x53EF;&#x89C6;&#x533A;&#x57DF;&#x548C;&#x603B;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x533A;&#x57DF;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x4F7F;&#x7528;&#x63D0;&#x4F9B;&#x7684;&#x5C3A;&#x5BF8;&#xFF0C;&#x5916;&#x90E8;&#x65B9;&#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x6709;&#x591A;&#x5C11;&#x5185;&#x5BB9;&#x5728;&#x89C6;&#x56FE;&#x4E2D;&#x3002;</p>
<p>&#x5176;&#x4ED6;&#x7684;SafeFrame&#x8C03;&#x7528;&#x8BA9;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#xFF0C;&#x8D85;&#x8D8A;SafeFrame&#x7684;&#x754C;&#x9650;&#x3002;<code>$sf.ext.geom</code>&#x8C03;&#x7528;&#x4E5F;&#x4F7F;&#x5916;&#x90E8;&#x65B9;&#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x5B83;&#x80FD;&#x6269;&#x5C55;&#x591A;&#x8FDC;&#x4EE5;&#x53CA;&#x6269;&#x5C55;&#x5185;&#x5BB9;&#x4E2D;&#x6709;&#x591A;&#x5C11;&#x662F;&#x5728;&#x89C6;&#x56FE;&#x4E2D;&#x3002;</p>
<p>&#x4E0B;&#x56FE;&#x7684;&#x4F8B;&#x5B50;&#x8BF4;&#x660E;&#x4E86;SafeFrame&#x7684;&#x5185;&#x5BB9;&#x600E;&#x4E48;&#x5728;&#x7F51;&#x9875;&#x5185;&#x6269;&#x5C55;&#x548C;&#x6709;&#x591A;&#x5C11;&#x662F;&#x5728;&#x53EF;&#x89C6;&#x533A;&#x57DF;&#x5185;&#x7684;&#x3002;<br><img src="/xfe/2016/08/29/safeframe-v1-1-final/sf2.png" alt="&#x56FE;1-2"><br>&#x60F3;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x67E5;&#x9605;&#x7AE0;&#x8282;0&#xFF0C;&#x5B83;&#x6DB5;&#x76D6;&#x4E86;&#x8BE6;&#x7EC6;&#x7684;$sf.ext.geom&#x8C03;&#x7528;&#x3002;</p>
<h4 id="1-3-1-&#x652F;&#x6301;3MS&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;"><a href="#1-3-1-&#x652F;&#x6301;3MS&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;" class="headerlink" title="1.3.1 &#x652F;&#x6301;3MS&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;"></a>1.3.1 &#x652F;&#x6301;3MS&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;</h4><p>&#x672C;SafeFrames&#x89C4;&#x8303;&#x81F4;&#x529B;&#x4E8E;&#x4E0E;&#x56F4;&#x7ED5;&#x5E7F;&#x544A;&#x80FD;&#x89C1;&#x5EA6;&#x548C;&#x63D0;&#x9AD8;&#x5E7F;&#x544A;&#x5EA6;&#x91CF;&#x8D28;&#x91CF;&#x7684;&#x5176;&#x4ED6;&#x884C;&#x4E1A;&#x63AA;&#x65BD;&#x770B;&#x9F50;&#xFF0C;&#x5373;&#xFF1A;&#x4F7F;&#x6D4B;&#x91CF;&#x6709;&#x610F;&#x4E49;&#xFF08;3MS&#xFF0C;Making Measurements Make Sense&#xFF09;&#x7684;&#x5021;&#x8BAE;&#x3002;&#x81EA;&#x4ECE;SafeFrame1.0&#x53D1;&#x5E03;&#xFF0C;&#x5E7F;&#x544A;&#x80FD;&#x89C1;&#x5EA6;&#x4ECD;&#x5728;&#x6D4B;&#x8BD5;&#xFF0C;&#x800C;&#x4E14;&#x6B63;&#x5F0F;&#x7684;&#x63A8;&#x8350;&#x6807;&#x51C6;&#x5C1A;&#x672A;&#x5EFA;&#x7ACB;&#x3002;&#x6B63;&#x5982;&#x540C;&#x884C;&#x4E1A;&#x4E2D;&#x5EFA;&#x7ACB;&#x548C;&#x91C7;&#x7528;SafeFrames&#x548C;3MS&#x80FD;&#x89C1;&#x5EA6;&#x63A8;&#x8350;&#x6807;&#x51C6;&#xFF0C;&#x66F4;&#x65B0;&#x7684;SafeFrame&#x53EF;&#x4EE5;&#x66F4;&#x65E0;&#x7F1D;&#x5730;&#x652F;&#x6301;3MS&#x7684;&#x63A8;&#x8350;&#x6807;&#x51C6;&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#xFF0C;SafeFrame1.0&#x63D0;&#x4F9B;&#x51E0;&#x4F55;&#x503C;&#xFF0C;&#x8BA9;Host&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x6709;&#x591A;&#x5C11;&#x5185;&#x5BB9;&#x5728;&#x89C6;&#x56FE;&#x4E2D;&#x3002;Host&#x4E0E;&#x7B2C;&#x4E09;&#x65B9;&#x5404;&#x65B9;&#x5E94;&#x5408;&#x4F5C;&#xFF0C;&#x5E76;&#x4E14;&#x4E3A;&#x4E86;&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x201D;&#x53EF;&#x89C1;&#x5EA6;&#x201D;&#x5C55;&#x89C6;&#xFF0C;&#x5C31;&#x8BE5;&#x6709;&#x591A;&#x5C11;&#x5185;&#x5BB9;&#x5728;&#x89C6;&#x56FE;&#x4E2D;&#x7684;&#x6807;&#x51C6;&#x8FBE;&#x6210;&#x534F;&#x8BAE;&#x3002;</p>
<h4 id="1-3-2-&#x53EF;&#x89C1;&#x5EA6;&#x7279;&#x6027;&#x5BF9;&#x7B2C;&#x4E09;&#x65B9;&#x662F;&#x53EF;&#x9009;&#x7684;"><a href="#1-3-2-&#x53EF;&#x89C1;&#x5EA6;&#x7279;&#x6027;&#x5BF9;&#x7B2C;&#x4E09;&#x65B9;&#x662F;&#x53EF;&#x9009;&#x7684;" class="headerlink" title="1.3.2 &#x53EF;&#x89C1;&#x5EA6;&#x7279;&#x6027;&#x5BF9;&#x7B2C;&#x4E09;&#x65B9;&#x662F;&#x53EF;&#x9009;&#x7684;"></a>1.3.2 &#x53EF;&#x89C1;&#x5EA6;&#x7279;&#x6027;&#x5BF9;&#x7B2C;&#x4E09;&#x65B9;&#x662F;&#x53EF;&#x9009;&#x7684;</h4><p>SafeFrames&#x6846;&#x67B6;&#x5141;&#x8BB8;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x901A;&#x8FC7;&#x8C03;&#x7528;<code>$sf.ext.inVewPercentage</code>&#x65B9;&#x6CD5;&#x786E;&#x5B9A;&#x5B83;&#x662F;&#x5426;&#x5728;&#x89C6;&#x56FE;&#x4E2D;&#x3002;&#x6B64;&#x7279;&#x6027;&#xFF0C;&#x4E0E;&#x6240;&#x6709;&#x7684;SafeFrame&#x7279;&#x6027;&#x4E00;&#x6837;&#xFF0C;&#x662F;&#x5426;&#x8981;&#x4F7F;&#x7528;&#x5BF9;&#x6295;&#x653E;&#x5185;&#x5BB9;&#x5230;Host&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x662F;&#x53EF;&#x9009;&#x7684;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x65E0;&#x8BBA;&#x4F55;&#x65F6;&#x7B2C;&#x4E09;&#x65B9;&#x8BF7;&#x6C42;Host&#x63D0;&#x4F9B;&#x80FD;&#x89C1;&#x5EA6;&#x6570;&#x636E;&#xFF0C;&#x5B83;&#x90FD;&#x8981;&#x63D0;&#x4F9B;&#x3002;</p>
<h3 id="1-4-SafeFrames&#x548C;&#x89C6;&#x9891;&#x63D2;&#x64AD;&#x5E7F;&#x544A;"><a href="#1-4-SafeFrames&#x548C;&#x89C6;&#x9891;&#x63D2;&#x64AD;&#x5E7F;&#x544A;" class="headerlink" title="1.4 SafeFrames&#x548C;&#x89C6;&#x9891;&#x63D2;&#x64AD;&#x5E7F;&#x544A;"></a>1.4 SafeFrames&#x548C;&#x89C6;&#x9891;&#x63D2;&#x64AD;&#x5E7F;&#x544A;</h3><p>SafeFrame&#x7684;&#x89C4;&#x8303;&#x4E0D;&#x662F;&#x4E3A;&#x4E86;&#x63D2;&#x64AD;&#x89C6;&#x9891;&#x5E7F;&#x544A;&#x800C;&#x8BBE;&#x8BA1;&#xFF0C;&#x4F46;&#x5728;&#x4E00;&#x4E2A;VAST&#x6807;&#x7B7E;&#x6295;&#x653E;&#x7684;&#x63D2;&#x64AD;&#x6A2A;&#x5E45;&#x5E7F;&#x544A;&#x53EF;&#x4EE5;&#x6295;&#x653E;&#x5230;SafeFrames&#x3002;IAB&#x7684;&#x89C6;&#x9891;&#x5957;&#x4EF6;&#x5C06;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x4EE5;&#x5B8C;&#x5168;&#x652F;&#x6301;SafeFrame&#x6E32;&#x67D3;&#xFF0C;&#x4F46;&#x89C6;&#x9891;&#x53D1;&#x5E03;&#x5546;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;SafeFrame&#x6765;&#x4EE3;&#x66FF;&#x4ED6;&#x4EEC;&#x7684;&#x89C6;&#x9891;&#x7F51;&#x9875;&#x4E0A;&#x4F7F;&#x7528;&#x7684;&#x4EFB;&#x4F55;&#x5185;&#x90E8;&#x6846;&#x67B6;&#x3002;</p>
<p>&#x4EFB;&#x4F55;&#x6307;&#x5B9A;&#x4E3A;&#x4E00;&#x4E2A;iframe&#x8D44;&#x6E90;&#x7684;VAST&#x6A2A;&#x5E45;&#x5E7F;&#x544A;&#x53EF;&#x4EE5;&#x6E32;&#x67D3;&#x5728;SafeFrame&#x5185;&#x3002;&#x4E3A;&#x4E86;&#x786E;&#x4FDD;VAST&#x63D2;&#x64AD;&#x6A2A;&#x5E45;&#x5E7F;&#x544A;&#x53EF;&#x4EE5;&#x6295;&#x653E;&#x5230;SafeFrame&#xFF0C;&#x5916;&#x90E8;&#x65B9;&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x521B;&#x9020;&#x6027;&#x7684;&#x8D44;&#x6E90;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;iframe&#x3002;&#x4EFB;&#x4F55;&#x5305;&#x542B;&#x5728;VAST&#x63D2;&#x64AD;&#x6A2A;&#x5E45;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x7684;SafeFrame&#x534F;&#x8BAE;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x4EFB;&#x4F55;&#x652F;&#x6301;SafeFrame1.0&#x7684;&#x89C6;&#x9891;&#x53D1;&#x5E03;&#x5546;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x4E00;&#x4E2A;SafeFrame&#x5185;&#x6E32;&#x67D3;VPAID&#xFF08;Video Player-Ad Interface Definition&#xFF09;&#x5185;&#x5BB9;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x5B58;&#x5728;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x65BD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x9700;&#x8981;&#x6765;&#x81EA;&#x89C6;&#x9891;&#x7F51;&#x7AD9;&#x4E0E;&#x5916;&#x90E8;&#x65B9;&#x7684;&#x4FEE;&#x6539;&#x3002;&#x76F4;&#x5230;IAB VSuite&#x88AB;&#x66F4;&#x65B0;&#x4EE5;&#x66F4;&#x5BB9;&#x6613;&#x652F;&#x6301;SafeFrame&#xFF0C;&#x4F7F;&#x7528;SafeFrame&#x6E32;&#x67D3;VPAID&#x5185;&#x5BB9;&#x7684;&#x6280;&#x672F;&#x64CD;&#x4F5C;&#x5FC5;&#x987B;&#x7531;&#x613F;&#x610F;&#x6267;&#x884C;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;&#x5404;&#x65B9;&#x52A0;&#x4EE5;&#x89E3;&#x51B3;&#x3002;</p>
<h3 id="1-5-SafeFrames&#x548C;&#x79FB;&#x52A8;&#x7AEF;"><a href="#1-5-SafeFrames&#x548C;&#x79FB;&#x52A8;&#x7AEF;" class="headerlink" title="1.5 SafeFrames&#x548C;&#x79FB;&#x52A8;&#x7AEF;"></a>1.5 SafeFrames&#x548C;&#x79FB;&#x52A8;&#x7AEF;</h3><p>&#x5728;&#x7F51;&#x9875;&#x5448;&#x73B0;&#x7684;&#x4EFB;&#x4F55;&#x7684;SafeFrame&#x5185;&#x5BB9;&#x4E5F;&#x53EF;&#x4EE5;&#x50CF;&#x7F51;&#x9875;&#x4E00;&#x6837;&#x5728;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#x5448;&#x73B0;&#x3002;&#x57FA;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x7684;Web&#x5E94;&#x7528;&#xFF0C;&#x5305;&#x62EC;&#x90A3;&#x4E9B;&#x4E13;&#x4E3A;&#x79FB;&#x52A8;&#x7AEF;&#x8BBE;&#x8BA1;&#x7684;&#xFF0C;&#x4E5F;&#x80FD;&#x5145;&#x5206;&#x5730;&#x4ECE;SafeFrame&#x90E8;&#x7F72;&#x4E2D;&#x83B7;&#x76CA;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x867D;&#x7136;SafeFrame&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x975E;&#x6D4F;&#x89C8;&#x5668;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x8FD0;&#x4F5C;&#xFF0C;&#x5982;&#x90A3;&#x4E9B;&#x4E13;&#x95E8;&#x4E3A;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#xFF08;&#x672C;&#x5730;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF09;&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x4F46;&#x662F;SafeFrame1.0&#x6CA1;&#x6709;&#x89C4;&#x5B9A;&#x975E;&#x6D4F;&#x89C8;&#x5668;&#x652F;&#x6301;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5C06;&#x5728;&#x672A;&#x6765;&#x53D1;&#x5E03;&#x7684;SafeFrame&#x4E2D;&#x88AB;&#x8003;&#x8651;&#x3002;</p>
<h3 id="1-6-&#x62A5;&#x544A;SafeFrame&#x7684;&#x6570;&#x636E;"><a href="#1-6-&#x62A5;&#x544A;SafeFrame&#x7684;&#x6570;&#x636E;" class="headerlink" title="1.6 &#x62A5;&#x544A;SafeFrame&#x7684;&#x6570;&#x636E;"></a>1.6 &#x62A5;&#x544A;SafeFrame&#x7684;&#x6570;&#x636E;</h3><p>SafeFrame1.0&#x4E3A;&#x60A8;&#x63D0;&#x4F9B;&#x53EF;&#x4EE5;&#x5728;&#x62A5;&#x8868;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528;SafeFrame&#x62A5;&#x544A;&#x6570;&#x636E;&#x7684;&#x673A;&#x5236;&#x8FD8;&#x6CA1;&#x5B8C;&#x6210;&#x3002;&#x62A5;&#x544A;&#x7CFB;&#x7EDF;&#x5FC5;&#x987B;&#x914D;&#x7F6E;&#x4E3A;&#x6536;&#x96C6;&#x548C;&#x4EE5;&#x6536;&#x4EF6;&#x4EBA;&#x671F;&#x671B;&#x7684;&#x683C;&#x5F0F;&#x62A5;&#x544A;SafeFrame&#x6570;&#x636E;&#x3002;</p>
<h3 id="1-7-&#x533A;&#x522B;&#x4E8E;&#x5176;&#x4ED6;&#x89C4;&#x8303;"><a href="#1-7-&#x533A;&#x522B;&#x4E8E;&#x5176;&#x4ED6;&#x89C4;&#x8303;" class="headerlink" title="1.7 &#x533A;&#x522B;&#x4E8E;&#x5176;&#x4ED6;&#x89C4;&#x8303;"></a>1.7 &#x533A;&#x522B;&#x4E8E;&#x5176;&#x4ED6;&#x89C4;&#x8303;</h3><p>IAB&#x7684;SafeFrame&#x89E3;&#x51B3;&#x5176;&#x4ED6;IAB&#x89C4;&#x8303;&#x6216;&#x6307;&#x5357;&#x6CA1;&#x6709;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x7AE0;&#x8282;&#x5E2E;&#x52A9;&#x4ECE;&#x884C;&#x4E1A;&#x91CC;&#x5176;&#x4ED6;&#x89E3;&#x51B3;&#x4E0D;&#x540C;&#x7684;&#x95EE;&#x9898;&#x7684;&#x89C4;&#x8303;&#x4E2D;&#x533A;&#x5206;SafeFrame&#x3002;</p>
<h4 id="1-7-1-IAB&#x53CB;&#x597D;&#x7684;iframe"><a href="#1-7-1-IAB&#x53CB;&#x597D;&#x7684;iframe" class="headerlink" title="1.7.1 IAB&#x53CB;&#x597D;&#x7684;iframe"></a>1.7.1 IAB&#x53CB;&#x597D;&#x7684;iframe</h4><p>IAB&#x7684;SafeFrame&#x89C4;&#x8303;&#x8DDF;IAB&#x90A3;&#x4E9B;&#x8BB0;&#x5F55;&#x4E86;&#x201D;&#x5728;&#x5F02;&#x6B65;&#x5E7F;&#x544A;&#x73AF;&#x5883;&#x4E2D;&#x5BCC;&#x5A92;&#x4F53;&#x5E7F;&#x544A;&#x7684;&#x6700;&#x4F73;&#x793A;&#x4F8B;&#x201D;&#x7684;&#x53CB;&#x597D;&#x7684;iframe&#x4E0D;&#x540C;&#x3002;</p>
<p>IAB&#x7684;&#x53CB;&#x597D;iframe&#x7684;&#x6700;&#x4F73;&#x793A;&#x4F8B;&#x662F;&#x7528;&#x6765;&#x652F;&#x6301;&#x4F7F;&#x7528;JavaScript&#x8C03;&#x7528;&#x7684;&#x5BCC;&#x5A92;&#x4F53;&#x5E7F;&#x544A;&#xFF0C;&#x4E0D;&#x50CF;AJAX&#x90A3;&#x6837;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x7F16;&#x7801;&#x6846;&#x67B6;&#x3002;&#x4F7F;&#x7528;&#x6613;&#x7528;&#x7684;iframe&#xFF0C;&#x6765;&#x81EA;&#x5E7F;&#x544A;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x50CF;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x4E00;&#x6837;&#x6E32;&#x67D3;&#x5230;&#x4E00;&#x4E2A;&#x6765;&#x6E90;&#x4E8E;&#x540C;&#x4E00;&#x670D;&#x52A1;&#x5668;&#x7684;frame&#x3002;</p>
<p>&#x867D;&#x7136;&#x53CB;&#x597D;&#x7684;iframe&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x89E3;&#x51B3;&#x4E86;&#x8DE8;&#x5E73;&#x53F0;&#x7684;&#x969C;&#x788D;&#xFF0C;&#x4EE5;&#x652F;&#x6301;&#x67D0;&#x4E9B;&#x5BCC;&#x5A92;&#x4F53;&#x683C;&#x5F0F;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x6CA1;&#x6709;&#x628A;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4ECE;Host&#x5185;&#x5BB9;&#x4E2D;&#x9694;&#x79BB;&#x3002;&#x5728;&#x53CB;&#x597D;&#x7684;iframe&#x91CC;&#x7684;&#x5BCC;&#x5A92;&#x4F53;&#x5185;&#x5BB9;&#x50CF;&#x7F51;&#x7AD9;&#x7684;&#x5185;&#x5BB9;&#x4E00;&#x6837;&#xFF0C;&#x76F4;&#x63A5;&#x7531;&#x540C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x63D0;&#x4F9B;&#x3002;</p>
<p>&#x76F8;&#x53CD;&#x5730;&#xFF0C;SafeFrame&#x5B9E;&#x73B0;&#x4E86;Host&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x7684;&#x9694;&#x79BB;&#xFF0C;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;API&#x6765;&#x8BA9;&#x63A7;&#x5236;&#x548C;&#x900F;&#x660E;&#x53EF;&#x4EE5;&#x517C;&#x5F97;&#xFF0C;&#x540C;&#x65F6;&#x4E3A;&#x7F51;&#x7AD9;&#x63D0;&#x4F9B;&#x5B89;&#x5168;&#x6027;&#x548C;&#x7A33;&#x5B9A;&#x6027;&#x63A7;&#x5236;&#x7684;&#x6700;&#x5C0F;&#x5C42;&#x3002;&#x4F7F;&#x7528;SafeFrame&#x65F6;&#xFF0C;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x7531;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x57DF;&#x63D0;&#x4F9B;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4E0E;Host&#x5185;&#x5BB9;&#x4E00;&#x6837;&#x6765;&#x81EA;&#x4E8E;&#x76F8;&#x540C;&#x7684;&#x6765;&#x6E90;&#x3002;&#x53EA;&#x5141;&#x8BB8;&#x901A;&#x8FC7;SafeFrame&#x6307;&#x5357;&#x4E2D;&#x6307;&#x5B9A;&#x7684;API&#x8BBF;&#x95EE;&#x8BE5;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x88AB;&#x6700;&#x7EC8;&#x6E32;&#x67D3;&#x7684;&#x7F51;&#x7AD9;&#x57DF;&#x3002;</p>
<p>SafeFrame&#x6307;&#x5357;&#x5220;&#x9664;&#x4E86;&#x8BB8;&#x591A;&#x4E0E;&#x6295;&#x653E;&#x5BCC;&#x5A92;&#x4F53;&#x5230;&#x6765;&#x6E90;&#x4E8E;Host&#x7684;iframe&#x76F8;&#x5173;&#x7684;&#x5B89;&#x5168;&#x98CE;&#x9669;&#x3002;SafeFrame API&#x4E5F;&#x5141;&#x8BB8;&#x4E3B;&#x673A;&#x548C;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x66F4;&#x52A0;&#x900F;&#x660E;&#xFF0C;&#x4EE5;&#x53CA;&#x5BF9;&#x4E30;&#x5BCC;&#x7684;&#x4E92;&#x52A8;&#x6709;&#x66F4;&#x591A;&#x7684;&#x63A7;&#x5236;&#x548C;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x3002;&#x8BE5;&#x65B0;&#x589E;&#x7684;&#x63A7;&#x5236;&#x4E5F;&#x4FDD;&#x8BC1;&#x4E86;&#x5BCC;&#x5A92;&#x4F53;&#x7684;&#x66F4;&#x597D;&#x7684;&#x6E32;&#x67D3;&#x80FD;&#x529B;&#x3002;</p>
<h4 id="1-7-2-&#x8DE8;&#x6E90;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#xFF08;CORS&#xFF09;"><a href="#1-7-2-&#x8DE8;&#x6E90;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#xFF08;CORS&#xFF09;" class="headerlink" title="1.7.2 &#x8DE8;&#x6E90;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#xFF08;CORS&#xFF09;"></a>1.7.2 &#x8DE8;&#x6E90;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#xFF08;CORS&#xFF09;</h4><p>&#x8DE8;&#x6E90;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#xFF08;CORS&#xFF0C;Cross Origin Resource Sharing&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x8DE8;&#x57DF;&#x7684;HTTP&#x8BF7;&#x6C42;&#x7684;&#x673A;&#x5236;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;CORS&#xFF0C;&#x540C;&#x6E90;&#x7B56;&#x7565;&#xFF08;the Same Origin Policy&#xFF09;&#x5C31;&#x4F1A;&#x963B;&#x6B62;&#x4E00;&#x4E2A;&#x57DF;&#x7684;&#x5D4C;&#x5165;&#x4EE3;&#x7801;&#x8BF7;&#x6C42;&#x6765;&#x81EA;&#x53E6;&#x4E00;&#x4E2A;&#x57DF;&#x7684;&#x6F5C;&#x5728;&#x7684;&#x7834;&#x574F;&#x6027;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x5BF9;&#x4E8E;&#x826F;&#x6027;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5982;&#x56FE;&#x50CF;&#x4F8B;&#x5916;&#x3002;</p>
<p>&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;&#x540C;&#x6E90;&#x7B56;&#x7565;&#x963B;&#x6B62;&#x5185;&#x5BB9;&#xFF0C;&#x6BD4;&#x5982;&#x5BCC;&#x5A92;&#x4F53;&#x5E7F;&#x544A;&#xFF0C;&#x8BF7;&#x6C42;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x4EE5;&#x652F;&#x6301;&#x6B63;&#x786E;&#x7684;&#x6E32;&#x67D3;&#x548C;&#x4E92;&#x52A8;&#x3002;&#x5229;&#x7528;CORS&#xFF0C;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x8BA9;&#x6D4F;&#x89C8;&#x5668;&#x5BF9;&#x4FE1;&#x4EFB;&#x57DF;&#x8FDB;&#x884C;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#x3002;&#x867D;&#x7136;&#x8FD9;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x6709;&#x6548;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4E5F;&#x8D4B;&#x4E88;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x5BF9;Host&#x7684;&#x5B8C;&#x5168;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#xFF0C;&#x4F7F;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x6709;&#x6743;&#x4E0D;&#x9700;&#x7F51;&#x7AD9;&#x77E5;&#x6653;&#x5C31;&#x8BBF;&#x95EE;&#x548C;&#x66F4;&#x6539;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x3002;</p>
<p>CORS&#x53EA;&#x80FD;&#x7BA1;&#x7406;&#x4E00;&#x4E2A;&#x57DF;&#x540D;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x8BF7;&#x6C42;&#x53E6;&#x4E00;&#x4E2A;;&#x5B83;&#x4E0D;&#x80FD;&#x7BA1;&#x7406;&#x8FD9;&#x4E24;&#x4E2A;&#x4E4B;&#x95F4;&#x5177;&#x4F53;&#x7684;&#x76F8;&#x4E92;&#x4F5C;&#x7528;&#x3002;</p>
<p>&#x53E6;&#x4E00;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x628A;&#x5185;&#x5BB9;&#x6295;&#x653E;&#x5230;iframe&#x4E2D;&#x3002;&#x5728;&#x6B64;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x4E2D;&#xFF0C;&#x5185;&#x5BB9;&#x662F;&#x5728;&#x63D0;&#x4F9B;&#x5185;&#x5BB9;&#x7684;&#x5916;&#x90E8;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x4F46;&#x6709;&#x4E86;&#x8FD9;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x6240;&#x6709;&#x5BF9;&#x7F51;&#x7AD9;&#x7684;&#x8BBF;&#x95EE;&#x90FD;&#x88AB;&#x62D2;&#x7EDD;&#xFF0C;&#x7981;&#x6B62;&#x4E0E;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;&#x4EFB;&#x4F55;&#x4E30;&#x5BCC;&#x7684;&#x4E92;&#x52A8;&#x3002;</p>
<p>&#x7EFC;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;CORS&#x4E0D;&#x80FD;&#x63A7;&#x5236;&#x88AB;&#x8BF7;&#x6C42;&#x7684;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x4EC0;&#x4E48;&#xFF0C;&#x800C;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684;iframe&#x53C8;&#x7981;&#x6B62;&#x4EFB;&#x4F55;&#x7684;&#x8BBF;&#x95EE;&#x3002;</p>
<p>&#x540C;&#x65F6;&#x4F7F;&#x7528;iframe&#x548C;API&#xFF0C;SafeFrame&#x5B9E;&#x73B0;&#x4E86;&#x7F51;&#x7AD9;&#x548C;&#x5916;&#x90E8;&#x63D0;&#x4F9B;&#x7684;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x4E30;&#x5BCC;&#x7684;&#x4E92;&#x52A8;&#xFF0C;&#x540C;&#x65F6;&#x5141;&#x8BB8;&#x63A7;&#x5236;&#x5BF9;&#x7F51;&#x7AD9;&#x4FE1;&#x606F;&#x7684;&#x8BBF;&#x95EE;&#x3002;</p>
<h3 id="1-8-&#x8D85;&#x51FA;&#x8303;&#x56F4;&#x7684;&#x9879;"><a href="#1-8-&#x8D85;&#x51FA;&#x8303;&#x56F4;&#x7684;&#x9879;" class="headerlink" title="1.8 &#x8D85;&#x51FA;&#x8303;&#x56F4;&#x7684;&#x9879;"></a>1.8 &#x8D85;&#x51FA;&#x8303;&#x56F4;&#x7684;&#x9879;</h3><p>&#x5728;&#x672C;&#x89C4;&#x8303;&#x4E2D;&#xFF0C;&#x4E0B;&#x5217;&#x9879;&#x662F;&#x8D85;&#x51FA;&#x8303;&#x56F4;&#x7684;&#xFF1A;</p>
<ul>
<li><p><strong>&#x8BFB;&#x53D6;/&#x68C0;&#x7D22;&#x5916;&#x90E8;&#x5185;&#x5BB9;</strong><br>SafeFrame&#x4E0D;&#x6307;&#x5B9A;&#x5982;&#x4F55;&#x68C0;&#x7D22;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x3002;&#x4E00;&#x65E6;&#x68C0;&#x7D22;&#xFF0C;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x5C31;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6216;URI&#x548C;&#x7F51;&#x7AD9;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x7684;&#x4EFB;&#x4F55;&#x5143;&#x6570;&#x636E;&#xFF0C;&#x88AB;&#x653E;&#x5165;SafeFrame<code>$sf.host.Position</code>&#x5BF9;&#x8C61;&#x4E2D;&#x3002;</p>
</li>
<li><p><strong>&#x4E3A;&#x4E86;&#x7279;&#x5B9A;&#x5B9E;&#x73B0;&#x7684;&#x9644;&#x52A0;&#x529F;&#x80FD;</strong><br>&#x5BF9;&#x6BD4;&#x8D77;&#x5176;&#x4ED6;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x64CD;&#x7EB5;&#x548C;&#x7BA1;&#x7406;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;SafeFrame&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x4EFB;&#x4F55;&#x5BF9;&#x8C61;&#xFF0C;&#x65B9;&#x6CD5;&#xFF0C;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x5C5E;&#x6027;&#x3002;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F8B;&#x5982;&#x989D;&#x5916;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF0C;UI&#x5143;&#x7D20;&#x7B49;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x52A0;&#x5165;&#x5230;&#x672A;&#x6765;&#x7684;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x4F46;&#x4E0D;&#x4F1A;&#x4F5C;&#x4E3A;SafeFrame1.0&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</p>
</li>
<li><p><strong>&#x57FA;&#x4E8E;&#x975E;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5B9E;&#x73B0;</strong><br>SafeFrame&#x7684;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x4EC5;&#x9650;&#x4E8E;JavaScript&#x7684;&#x683C;&#x5F0F;&#xFF0C;&#x57FA;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5B9E;&#x73B0;&#x3002;SafeFrame1.0&#x53EF;&#x4EE5;&#x5728;&#x5E94;&#x7528;&#x5185;&#x53D1;&#x6325;&#x4F5C;&#x7528;&#xFF0C;&#x5982;&#x90A3;&#x4E9B;&#x5728;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#xFF08;&#x672C;&#x673A;&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x975E;&#x57FA;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x5B9E;&#x73B0;&#x7684;&#x7EC6;&#x5219;&#x672A;&#x5305;&#x62EC;&#x5728;SafeFrames&#x7684;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x4E2D;&#x3002;&#x5B83;&#x652F;&#x6301;&#x57FA;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#x548C;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x8BBE;&#x5907;&#x3002;</p>
</li>
</ul>
<h3 id="1-9-&#x64CD;&#x4F5C;&#x6CE8;&#x610F;&#x4E8B;&#x9879;"><a href="#1-9-&#x64CD;&#x4F5C;&#x6CE8;&#x610F;&#x4E8B;&#x9879;" class="headerlink" title="1.9 &#x64CD;&#x4F5C;&#x6CE8;&#x610F;&#x4E8B;&#x9879;"></a>1.9 &#x64CD;&#x4F5C;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</h3><p>&#x4F7F;&#x7528;SafeFrames&#x53EF;&#x80FD;&#x4F1A;&#x6539;&#x53D8;&#x67D0;&#x4E9B;&#x719F;&#x6089;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x5B9E;&#x65BD;SafeFrames&#x4E4B;&#x524D;&#xFF0C;&#x8BF7;&#x8003;&#x8651;&#x4EE5;&#x4E0B;&#x7684;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x6548;&#x679C;&#xFF0C;&#x5E76;&#x786E;&#x5B9A;&#x4F60;&#x7684;&#x6280;&#x672F;&#x548C;&#x8FC7;&#x7A0B;&#x662F;&#x5426;&#x9700;&#x8981;&#x505A;&#x51FA;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#xFF0C;&#x4EE5;&#x5229;&#x7528;SafeFrame&#x7684;&#x4F18;&#x52BF;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x7684;&#x8003;&#x8651;&#x60C5;&#x51B5;&#x65E8;&#x5728;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x5206;&#x6790;&#x7684;&#x8D77;&#x70B9;&#x3002;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x8BC4;&#x4F30;&#x548C;&#x6D4B;&#x8BD5;&#xFF0C;&#x4EE5;&#x786E;&#x4FDD;&#x987A;&#x5229;&#x5B9E;&#x65BD;&#x548C;&#x8FC7;&#x6E21;&#x3002;</p>
<ul>
<li><p><strong>&#x4E0A;&#x4E0B;&#x6587;&#x5C55;&#x793A;&#x5E7F;&#x544A;</strong><br>&#x4EE5;&#x7F16;&#x7A0B;&#x65B9;&#x5F0F;&#x6295;&#x653E;&#x57FA;&#x4E8E;&#x7F51;&#x9875;&#x5185;&#x5BB9;&#x7684;&#x5E7F;&#x544A;&#x7684;&#x5E7F;&#x544A;&#x4EE3;&#x7801;&#xFF0C;&#x8BBF;&#x95EE;&#x7F51;&#x9875;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x8BC6;&#x522B;&#x5B83;&#x663E;&#x793A;&#x7684;&#x5185;&#x5BB9;&#x7C7B;&#x578B;&#xFF0C;&#x7136;&#x540E;&#x6295;&#x653E;&#x9002;&#x5408;&#x4E8E;&#x5185;&#x5BB9;&#x7684;&#x5E7F;&#x544A;&#x3002;&#x4F7F;&#x7528;SafeFrames&#xFF0C;&#x56E0;&#x4E3A;&#x5E7F;&#x544A;&#x4EE3;&#x7801;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x4E3B;&#x673A;&#x9875;&#x9762;&#xFF0C;&#x7F51;&#x7AD9;API&#x5FC5;&#x987B;&#x4F20;&#x9012;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x7ED9;&#x5E7F;&#x544A;&#x4EE3;&#x7801;&#x3002;<br>&#x8BE5;&#x5E7F;&#x544A;&#x4EE3;&#x7801;&#x63D0;&#x4F9B;&#x8005;&#x5E94;&#x4E0E;&#x7F51;&#x7AD9;&#x9875;&#x9762;&#x6240;&#x6709;&#x8005;&#xFF08;&#x53D1;&#x5E03;&#x5546;&#xFF09;&#x6D3D;&#x8C08;&#xFF0C;&#x4E3A;&#x4E86;&#x5E7F;&#x544A;&#x4EE3;&#x7801;&#x63D0;&#x4F9B;&#x8005;&#x6295;&#x653E;&#x4E0A;&#x4E0B;&#x6587;&#x5C55;&#x793A;&#x5E7F;&#x544A;&#xFF0C;&#x5E94;&#x8BE5;&#x4F20;&#x9012;&#x54EA;&#x4E9B;&#x4FE1;&#x606F;&#x3002;<br>&#x6B32;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x7B2C;5.8&#x8282;&#x6709;&#x5173;<code>$sf.ext.meta</code>&#x529F;&#x80FD;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x3002;</p>
</li>
<li><p><strong>&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;URL</strong><br>&#x5F53;&#x5916;&#x90E8;&#x65B9;&#x5185;&#x5BB9;&#x4F7F;&#x7528;iframe&#x6700;&#x521D;&#x52A0;&#x8F7D;&#x5230;&#x4E00;&#x4E2A;&#x7F51;&#x7AD9;&#x7AD9;&#x70B9;&#x65F6;&#xFF0C;HTTP&#x5934;&#x4E00;&#x822C;&#x6807;&#x8BC6;URL&#x4E3A;&#x7F51;&#x7AD9;&#x7AD9;&#x70B9;&#xFF0C;&#x4F46;&#x4E0D;&#x662F;&#x5F88;&#x51C6;&#x786E;&#x3002;&#x7531;&#x4E8E;SafeFrame&#x662F;&#x4E00;&#x4E2A;iframe&#xFF0C;&#x8FD9;&#x79CD;URL&#x4E0D;&#x51C6;&#x786E;&#x7684;&#x60C5;&#x51B5;&#x4E5F;&#x53D1;&#x751F;&#x5728;SafeFrame&#x3002;&#x4E3A;&#x4E86;&#x83B7;&#x53D6;&#x51C6;&#x786E;&#x7684;&#x4E3B;&#x673A;URL&#xFF0C;&#x5728;JavaScript&#x4E2D;&#x4F7F;&#x7528;document.referrer&#x5C5E;&#x6027;&#xFF0C;&#x6B63;&#x5982;&#x4F60;&#x5728;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684;iframe&#x4E2D;&#x4F1A;&#x505A;&#x7684;&#x4E00;&#x6837;&#x3002;</p>
</li>
<li><p><strong>&#x8BBE;&#x7F6E;Cookies</strong><br>&#x4F7F;&#x7528;SafeFrame&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x5728;SafeFrame&#x57DF;&#x5185;&#x88AB;&#x6E32;&#x67D3;&#xFF0C;&#x8FD9;&#x4E0E;Host&#x57DF;&#x4E0D;&#x540C;&#x3002;Cookies&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;&#x526F;&#x57DF;&#x540D;&#x4E2D;&#x88AB;&#x8BBE;&#x7F6E;&#x548C;&#x8BFB;&#x53D6;&#xFF0C;&#x4F46;&#x7F51;&#x7AD9;&#x5FC5;&#x987B;&#x58F0;&#x660E;&#x662F;&#x5426;&#x652F;&#x6301;<code>$sf.ext.cookie</code>&#x529F;&#x80FD;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5373;&#x4F7F;&#x652F;&#x6301;cookie&#x7684;&#x8BFB;&#x5199;&#x80FD;&#x529B;&#xFF0C;&#x7F51;&#x7AD9;&#x63A7;&#x5236;&#x4F55;&#x65F6;&#x53CA;&#x5411;&#x8C01;&#x5171;&#x4EAB;Cookie&#x6570;&#x636E;&#x3002;&#x5982;&#x679C;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x548C;&#x76F4;&#x63A5;&#x5728;&#x7F51;&#x7AD9;&#x57DF;&#x8BFB;&#x53D6;cookie&#xFF0C;&#x8FD9;&#x4E2A;&#x8BBF;&#x95EE;&#x5FC5;&#x987B;&#x4E0E;&#x7F51;&#x7AD9;&#x9875;&#x9762;&#x6240;&#x6709;&#x8005;&#x8FDB;&#x884C;&#x8C08;&#x5224;&#x534F;&#x5546;&#x3002;</p>
</li>
<li><p><strong>&#x7B2C;&#x4E09;&#x65B9;&#x6570;&#x636E;</strong><br>&#x4F7F;&#x7528;SafeFrames&#x7684;API&#xFF0C;&#x4ECE;Host&#xFF08;host&#xFF09;&#x57DF;&#x5171;&#x4EAB;&#x7684;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x662F;&#x7531;Host&#x63D0;&#x4F9B;&#x7684;&#x3002;&#x5728;&#x5546;&#x4E1A;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;&#x7B2C;&#x4E09;&#x65B9;&#x4EE3;&#x8868;&#x53E6;&#x4E00;&#x65B9;&#x4ECE;&#x7F51;&#x7AD9;&#x6536;&#x96C6;&#x6570;&#x636E;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;SafeFrame&#x5B9E;&#x65BD;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5FC5;&#x987B;&#x4F9D;&#x8D56;Host&#xFF08;&#x7B2C;&#x4E00;&#x65B9;&#xFF09;&#x63D0;&#x4F9B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x6536;&#x96C6;&#x3002;<br>&#x5F53;&#x7B2C;&#x4E00;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4F1A;&#x63D0;&#x9AD8;&#x4EBA;&#x4EEC;&#x5BF9;&#x6570;&#x636E;&#x5B8C;&#x6574;&#x6027;&#x7684;&#x5173;&#x6CE8;&#xFF0C;&#x88AB;&#x5171;&#x4EAB;&#x7684;&#x6570;&#x636E;&#x88AB;&#x7528;&#x4E8E;&#x6B63;&#x786E;&#x5448;&#x73B0;&#x63D0;&#x4F9B;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x5171;&#x4EAB;&#x4E0D;&#x6B63;&#x786E;&#x7684;&#x6570;&#x636E;&#x8FDD;&#x80CC;&#x4E86;&#x5E7F;&#x544A;&#x4E3B;&#x7684;&#x6700;&#x9AD8;&#x5229;&#x76CA;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x6B63;&#x786E;&#x7684;&#x6E32;&#x67D3;&#x548C;&#x4E92;&#x52A8;&#xFF0C;&#x8FD9;&#x4E0E;&#x4F1A;&#x5E72;&#x6270;&#x7F51;&#x7AD9;&#x7684;&#x9875;&#x9762;&#x5185;&#x5BB9;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5B9E;&#x65BD;SafeFrames&#x7684;&#x7F51;&#x7AD9;&#x6240;&#x6709;&#x8005;&#x53EF;&#x4EE5;&#x88AB;&#x5BA1;&#x6838;&#xFF0C;&#x4EE5;&#x786E;&#x4FDD;&#x6574;&#x4E2A;&#x7684;SafeFrame API&#x5171;&#x4EAB;&#x6570;&#x636E;&#x7684;&#x5B8C;&#x6574;&#x6027;&#x3002;</p>
</li>
<li><p><strong>&#x652F;&#x6301;&#x672A;&#x77E5;&#x5C3A;&#x5BF8;&#x7684;&#x5E7F;&#x544A;&#x5185;&#x5BB9;</strong><br>&#x6709;&#x4E9B;&#x5E7F;&#x544A;&#x6295;&#x653E;&#x6A21;&#x5F0F;&#x6D89;&#x53CA;&#xFF0C;&#x5728;&#x4E0D;&#x77E5;&#x9053;&#x54EA;&#x4E2A;&#x5E7F;&#x544A;&#x4F1A;&#x88AB;&#x6295;&#x653E;&#x548C;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8C03;&#x7528;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5BF9;&#x4E8E;&#x7279;&#x5B9A;&#x7684;&#x4E00;&#x5957;&#x6807;&#x51C6;&#x7684;&#x5E7F;&#x544A;&#x5206;&#x914D;&#x5E7F;&#x544A;&#x7A7A;&#x95F4;&#x3002;&#x5728;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5728;&#x8C03;&#x7528;&#x8BE5;&#x5E7F;&#x544A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#x662F;&#x662F;&#x672A;&#x77E5;&#x7684;&#x3002;SafeFrame1.0&#x4E0D;&#x76F4;&#x63A5;&#x652F;&#x6301;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x73B0;&#x6709;&#x7684;SafeFrame&#x529F;&#x80FD;&#x4E0E;&#x5BF9;&#x201C;&#x63A8;&#x9001;&#x201D;&#x6269;&#x5C55;&#x6280;&#x672F;&#x7684;&#x652F;&#x6301;&#x76F8;&#x7ED3;&#x5408;&#x6765;&#x652F;&#x6301;&#x3002;<br>&#x5982;&#x679C;&#x4E3B;&#x673A;&#x58F0;&#x660E;&#x5BF9;&#x63A8;&#x9001;&#x6269;&#x5C55;&#x6280;&#x672F;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code>$sf.ext.expand</code>&#x529F;&#x80FD;&#x4EE5;&#x6269;&#x5C55;SafeFrame&#x5BB9;&#x5668;&#x6765;&#x63D0;&#x4F9B;&#x53EF;&#x4EE5;&#x8C03;&#x6574;&#x4E3A;&#x66F4;&#x5927;&#x5B9E;&#x9645;&#x5C3A;&#x5BF8;&#x7684;&#x539F;&#x59CB;&#x5C3A;&#x5BF8;&#xFF0C;&#x672A;&#x77E5;&#x7684;&#x5C3A;&#x5BF8;&#x7684;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x88AB;&#x63A5;&#x53D7;&#x3002;&#x5F53;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x6269;&#x5F20;&#xFF0C;&#x4F46;&#x4F7F;&#x7528;&#x8986;&#x76D6;&#x6269;&#x5C55;&#x65B9;&#x6CD5;&#x662F;&#x4E00;&#x79CD;&#x9009;&#x62E9;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x63A8;&#x9001;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x679C;&#x652F;&#x6301;&#x7684;&#x8BDD;&#xFF0C;&#x662F;&#x6700;&#x4F73;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
</li>
</ul>
<p>&#x5176;&#x4ED6;&#x7684;&#x6280;&#x672F;&#x548C;&#x5DE5;&#x827A;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4FEE;&#x6539;&#xFF0C;&#x4EE5;&#x9002;&#x5E94;SafeFrame&#x7684;&#x64CD;&#x4F5C;&#x3002;SafeFrame&#x4E0A;&#x7EBF;&#x4E4B;&#x524D;&#xFF0C;&#x8BF7;&#x8003;&#x8651;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x6DF1;&#x5165;&#x7684;&#x5206;&#x6790;&#x548C;&#x8FDB;&#x884C;&#x4EA7;&#x54C1;&#x6D4B;&#x8BD5;&#x3002;</p>
<h2 id="2-Host&#x7684;&#x5B9E;&#x65BD;"><a href="#2-Host&#x7684;&#x5B9E;&#x65BD;" class="headerlink" title="2. Host&#x7684;&#x5B9E;&#x65BD;"></a>2. Host&#x7684;&#x5B9E;&#x65BD;</h2><p>&#x5728;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;SafeFrame&#x5B9E;&#x73B0;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#xFF0C;API&#x7684;host&#x7AEF;&#x7528;JavaScript&#x7F16;&#x5199;&#xFF0C;&#x5E76;&#x4E14;&#x5FC5;&#x987B;&#x63D0;&#x4F9B;&#x5728;&#x672C;&#x7AE0;&#x4E2D;&#x5217;&#x51FA;&#x548C;&#x5B9A;&#x4E49;&#x7684;&#x51FD;&#x6570;&#x548C;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x3002;&#x6D4F;&#x89C8;&#x5668;&#x5B9E;&#x73B0;&#x7684;&#x57FA;&#x7840;&#x673A;&#x5236;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;iframe&#x6807;&#x7B7E;&#x6765;&#x521B;&#x5EFA;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x9644;&#x5C5E;&#x4E0A;&#x989D;&#x5916;&#x7684;JavaScript&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x589E;&#x5F3A;&#x529F;&#x80FD;&#x548C;&#x5177;&#x5907;&#x4E0E;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;&#x901A;&#x4FE1;&#x7684;&#x80FD;&#x529B;&#x3002;</p>
<p>&#x6D4F;&#x89C8;&#x5668;&#x6839;&#x636E;&#x4ED6;&#x4EEC;&#x6240;&#x652F;&#x6301;&#x7684;&#x529F;&#x80FD;&#x7B49;&#x7EA7;&#x5206;&#x7EA7;&#x3002;A&#x7EA7;&#x6D4F;&#x89C8;&#x5668;&#x662F;&#x5DF2;&#x77E5;&#x7684;&#xFF0C;&#x6709;&#x80FD;&#x529B;&#x7684;&#xFF0C;&#x73B0;&#x4EE3;&#x7684;&#xFF0C;&#x548C;&#x5E38;&#x89C1;&#x7684;&#x3002;&#x6240;&#x6709;&#x4F7F;&#x7528;JavaScript&#x6FC0;&#x6D3B;A&#x7EA7;&#x6D4F;&#x89C8;&#x5668;&#x5E94;&#x4E88;&#x652F;&#x6301;&#x3002;C-&#xFF06;X&#x7EA7;&#x6D4F;&#x89C8;&#x5668;&#x662F;&#x8F83;&#x4E3A;&#x5C11;&#x89C1;&#xFF0C;&#x80FD;&#x529B;&#x8F83;&#x5DEE;&#xFF0C;&#x548C;&#x8FC7;&#x65F6;&#x7684;&#x3002;Host&#x65B9;&#x53EF;&#x4EE5;&#x659F;&#x914C;&#x4E0B;&#x662F;&#x5426;&#x652F;&#x6301;&#x8FD9;&#x4E9B;&#x6D4F;&#x89C8;&#x5668;&#x3002;SafeFrame&#x7684;&#x4E3B;&#x8981;&#x4F9D;&#x9760;HTML5&#x201C;postMessage&#x201D;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x4F4E;&#x7EA7;&#x522B;&#x7684;iframe&#x548C;&#x7F51;&#x7AD9;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x624B;&#x6BB5;&#x3002;&#x800C;postMessage&#x51FD;&#x6570;&#x63D0;&#x4F9B;&#x4E86;&#x6700;&#x4F73;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5176;&#x5B83;&#x673A;&#x5236;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x4FC3;&#x8FDB;&#x4E24;&#x65B9;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5728;C-&#xFF06;X&#x5206;&#x7EA7;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x60C5;&#x51B5;&#x4E2D;&#x3002;</p>
<p>&#x6709;&#x5173;HTML5 PostMessage&#x51FD;&#x6570;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x8BBF;&#x95EE;&#xFF1A;<br><a href="http://dev.w3.org/html5/postmsg/#posting-messages" target="_blank" rel="external">http://dev.w3.org/html5/postmsg/#posting-messages</a></p>
<h3 id="2-1-SafeFrames&#x662F;&#x5982;&#x4F55;&#x8FD0;&#x4F5C;&#x7684;"><a href="#2-1-SafeFrames&#x662F;&#x5982;&#x4F55;&#x8FD0;&#x4F5C;&#x7684;" class="headerlink" title="2.1 SafeFrames&#x662F;&#x5982;&#x4F55;&#x8FD0;&#x4F5C;&#x7684;"></a>2.1 SafeFrames&#x662F;&#x5982;&#x4F55;&#x8FD0;&#x4F5C;&#x7684;</h3><p>SafeFrame&#x7684;&#x76EE;&#x6807;&#x662F;&#x63D0;&#x4F9B;&#x5C06;&#x7B2C;&#x4E09;&#x65B9;&#x6765;&#x6E90;&#x7684;&#x5185;&#x5BB9;&#xFF08;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#xFF09;&#x4F20;&#x9012;&#x5230;&#x4E00;&#x4E2A;SafeFrame&#x5BB9;&#x5668;&#x548C;&#x6E32;&#x67D3;&#x5230;host&#x7AD9;&#x70B9;&#x4E0A;&#x3002;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x4E4B;&#x4E00;&#x4F20;&#x9012;&#xFF1A;</p>
<p><strong>&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#xFF1A;&#x7F51;&#x7AD9;&#x4EE3;&#x7801;&#x8F6C;&#x6362;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x6E32;&#x67D3;&#x5728;SafeFrame&#x4E2D;</strong><br>&#x5F53;&#x6D4F;&#x89C8;&#x5668;&#x8054;&#x7CFB;&#x7F51;&#x7AD9;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7F51;&#x7AD9;&#x53EF;&#x4EE5;&#x4ECE;&#x81EA;&#x5DF1;&#x7684;&#x540E;&#x53F0;&#x7CFB;&#x7EDF;&#x68C0;&#x7D22;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x4F20;&#x9012;&#x65B9;&#x5F0F;&#xFF0C;&#x7F51;&#x7AD9;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7531;SafeFrame&#x5B9E;&#x4F8B;&#x6E32;&#x67D3;&#x7684;SafeFrame&#x6807;&#x7B7E;&#xFF0C;&#x8F6C;&#x6362;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x5230;&#x5185;&#x8054;&#x7684;JavaScript&#x7ED3;&#x6784;&#x3002;</p>
<p><strong>&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#xFF1A;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x88AB;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#x5230;SafeFrame</strong><br>&#x7F51;&#x7AD9;&#x53EF;&#x80FD;&#x6CA1;&#x6709;&#x673A;&#x5236;&#x53BB;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x4F20;&#x8F93;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x4F20;&#x9001;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x5B83;&#x4EEC;&#x4ECD;&#x7136;&#x63D0;&#x4F9B;&#x76F8;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x5185;&#x8054;JavaScript&#x7ED3;&#x6784;&#x4E0E;SafeFrame&#x6807;&#x8BB0;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4EEC;&#x7ED9;&#x5185;&#x5BB9;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;URL&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x653E;&#x7F6E;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x5230;&#x8BE5;&#x7ED3;&#x6784;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;SCRIPT&#x6807;&#x7B7E;&#x548C;&#x6307;&#x5B9A;&#x7684;URL&#x628A;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x76F4;&#x63A5;&#x8F93;&#x9001;&#x5230;SafeFrame&#x5BB9;&#x5668;&#x4E2D;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x7AE0;&#x8282;&#x8BE6;&#x7EC6;&#x63CF;&#x8FF0;&#x4E86;&#x8FD9;&#x4E24;&#x4E2A;&#x8FC7;&#x7A0B;&#x3002;</p>
<h4 id="2-1-1-&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#xFF1A;&#x7F51;&#x7AD9;&#x8F6C;&#x6362;&#x5916;&#x90E8;&#x5185;&#x5BB9;"><a href="#2-1-1-&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#xFF1A;&#x7F51;&#x7AD9;&#x8F6C;&#x6362;&#x5916;&#x90E8;&#x5185;&#x5BB9;" class="headerlink" title="2.1.1 &#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#xFF1A;&#x7F51;&#x7AD9;&#x8F6C;&#x6362;&#x5916;&#x90E8;&#x5185;&#x5BB9;"></a>2.1.1 &#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#xFF1A;&#x7F51;&#x7AD9;&#x8F6C;&#x6362;&#x5916;&#x90E8;&#x5185;&#x5BB9;</h4><p>&#x4E0B;&#x56FE;&#x8BF4;&#x660E;&#x4E86;&#x4F7F;&#x7528;&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#x4F20;&#x9012;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x5230;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x8FC7;&#x7A0B;</p>
<p><img src="/xfe/2016/08/29/safeframe-v1-1-final/sf3.png" alt="&#x56FE;2-1"></p>
<ol>
<li><strong>&#x5185;&#x5BB9;&#x8BF7;&#x6C42;&#xFF1A;</strong>&#x5F53;&#x6700;&#x7EC8;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x65F6;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5411;&#x7F51;&#x7AD9;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x5185;&#x5BB9;&#x3002;</li>
<li><strong>&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x8BF7;&#x6C42;&#xFF1A;</strong>&#x7F51;&#x7AD9;&#x5411;&#x7B2C;&#x4E09;&#x65B9;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x5185;&#x5BB9;&#x6570;&#x636E;&#x3002;</li>
<li><strong>&#x5916;&#x90E8;&#x65B9;&#x4F20;&#x9012;&#xFF1A;</strong>&#x7B2C;&#x4E09;&#x65B9;&#x5C06;HTML&#x5185;&#x5BB9;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x4F20;&#x9012;</li>
<li><strong>SafeFrame&#x6807;&#x7B7E;&#xFF1A;</strong>&#x7F51;&#x7AD9;&#x7F51;&#x7AD9;&#x8F6C;&#x6362;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x6570;&#x636E;&#x4EE5;&#x4F7F;&#x7528;SafeFrame&#x6807;&#x7B7E;&#x5C06;&#x5176;&#x6295;&#x653E;&#x5230;SafeFrame&#x5BB9;&#x5668;</li>
<li><strong>&#x5185;&#x5BB9;&#x9694;&#x79BB;&#xFF1A;</strong>&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x4E0E;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x9694;&#x79BB;</li>
<li><strong>&#x5185;&#x5BB9;&#x4F20;&#x9012;&#xFF1A;</strong>&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#xFF0C;&#x4F34;&#x968F;&#x7740;&#x5305;&#x88F9;&#x5728;&#x4E00;&#x4E2A;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#xFF0C;&#x88AB;&#x6295;&#x653E;&#x5230;&#x6D4F;&#x89C8;&#x5668;&#x3002;</li>
<li><strong>&#x6D4F;&#x89C8;&#x5668;&#x5904;&#x7406;SafeFrame&#xFF1A;</strong>&#x6D4F;&#x89C8;&#x5668;&#x4F7F;&#x7528;&#x6765;&#x81EA;&#x88AB;&#x4F20;&#x9012;&#x7684;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x7684;SafeFrame&#x6307;&#x4EE4;&#xFF0C;&#x6765;&#x5904;&#x7406;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x548C;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x7684;&#x4E92;&#x52A8;&#x3002;</li>
</ol>
<h4 id="2-1-2-&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#xFF1A;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x76F4;&#x63A5;&#x4F20;&#x9012;"><a href="#2-1-2-&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#xFF1A;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x76F4;&#x63A5;&#x4F20;&#x9012;" class="headerlink" title="2.1.2 &#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#xFF1A;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x76F4;&#x63A5;&#x4F20;&#x9012;"></a>2.1.2 &#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#xFF1A;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x76F4;&#x63A5;&#x4F20;&#x9012;</h4><p>&#x4E0B;&#x56FE;&#x5C55;&#x793A;&#x4E86;&#x4F7F;&#x7528;&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#x4F20;&#x9012;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x5230;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x8FC7;&#x7A0B;</p>
<p><img src="/xfe/2016/08/29/safeframe-v1-1-final/sf4.png" alt="&#x56FE;2-2"></p>
<ol>
<li><strong>&#x5185;&#x5BB9;&#x8BF7;&#x6C42;&#xFF1A;</strong>&#x5F53;&#x6700;&#x7EC8;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x65F6;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5411;&#x7F51;&#x7AD9;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x5185;&#x5BB9;&#x3002;</li>
<li><strong>&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x4F20;&#x9012;&#xFF1A;</strong>&#x7F51;&#x7AD9;&#x4F20;&#x9012;&#x5B83;&#x7684;&#x7AD9;&#x70B9;&#x7684;HTML&#x5185;&#x5BB9;&#xFF0C;&#x4F34;&#x968F;&#x7740;SafeFrame&#x7684;&#x6307;&#x4EE4;&#x548C;&#x6307;&#x5411;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;URL&#x3002;</li>
<li><strong>&#x6D4F;&#x89C8;&#x5668;&#x5904;&#x7406;SafeFrame&#xFF1A;</strong>&#x6D4F;&#x89C8;&#x5668;&#x4F7F;&#x7528;&#x6765;&#x81EA;&#x88AB;&#x4F20;&#x9012;&#x7684;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x7684;SafeFrame&#x6307;&#x4EE4;&#xFF0C;&#x6765;&#x5904;&#x7406;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x7684;&#x4E92;&#x52A8;&#x3002;</li>
<li><strong>&#x7B2C;&#x4E09;&#x65B9;&#x8BF7;&#x6C42;&#xFF1A;</strong>&#x6D4F;&#x89C8;&#x5668;&#x4F7F;&#x7528;&#x7F51;&#x7AD9;&#x63D0;&#x4F9B;&#x7684;URL&#x5411;&#x7B2C;&#x4E09;&#x65B9;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x5185;&#x5BB9;&#x3002;</li>
<li><strong>&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x8BF7;&#x6C42;&#xFF1A;</strong>&#x88AB;&#x8BF7;&#x6C42;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#x5230;SafeFrame iframe&#x4E2D;&#x3002;</li>
</ol>
<h4 id="2-1-3-&#x6E32;&#x67D3;SafeFrame"><a href="#2-1-3-&#x6E32;&#x67D3;SafeFrame" class="headerlink" title="2.1.3 &#x6E32;&#x67D3;SafeFrame"></a>2.1.3 &#x6E32;&#x67D3;SafeFrame</h4><p> &#x5728;&#x90E8;&#x5206;2.1.1&#x548C;2.1.2&#x7684;&#x56FE;&#x7247;&#x5206;&#x522B;&#x8BF4;&#x660E;&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#x548C;&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#x4E4B;&#x95F4;&#x7684;&#x5DEE;&#x5F02;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x56FE;&#x63CF;&#x8FF0;&#x5728;&#x4E00;&#x4E2A;&#x9AD8;&#x5C42;&#x6B21;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x7F51;&#x7AD9;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x6765;&#x7684;SafeFrame&#x6307;&#x4EE4;&#x521D;&#x59CB;&#x5316;SafeFrame API&#x548C;&#x5728;&#x5176;&#x4E2D;&#x6E32;&#x67D3;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x3002;</p>
<p><img src="/xfe/2016/08/29/safeframe-v1-1-final/sf5.png" alt="&#x56FE;2-3"></p>
<ol>
<li><strong>&#x83B7;&#x53D6;SafeFrame&#xFF1A;</strong>&#x6D4F;&#x89C8;&#x5668;&#x4ECE;&#x7F51;&#x7AD9;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;&#x6307;&#x4EE4;&#x540E;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4ECE;&#x4E00;&#x4E2A;&#x526F;&#x57DF;&#x540D;&#x8BF7;&#x6C42;&#x548C;&#x63A5;&#x6536;SafeFrame&#x3002;</li>
<li><strong>&#x914D;&#x7F6E;SafeFrame&#xFF1A;</strong>&#x6D4F;&#x89C8;&#x5668;&#x521D;&#x59CB;&#x5316;&#x4ECE;&#x7F51;&#x7AD9;&#x5E93;&#x8BBF;&#x95EE;&#x7684;SafeFrame&#x4EE3;&#x7801;&#x3002;&#x4F7F;&#x7528;SafeFrame&#x7C7B;<code>$sf.host.Position</code>&#xFF0C;&#x786E;&#x5B9A;&#x4F20;&#x9012;&#x6A21;&#x5F0F;&#xFF0C;&#x56E0;&#x4E3A;&#x8981;&#x4E48;&#x5305;&#x62EC;HTML&#x5916;&#x90E8;&#x5185;&#x5BB9;&#xFF08;&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#xFF09;&#x8981;&#x4E48;&#x5F15;&#x7528;&#x4E00;&#x4E2A;URL&#xFF08;&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#xFF09;&#x3002;SafeFrame&#x51FD;&#x6570;<code>$sf.host.render()</code>&#x968F;&#x540E;&#x7528;&#x4E8E;&#x6E32;&#x67D3;iframe&#x3002;</li>
<li><strong>&#x521B;&#x5EFA;IFRAME&#xFF1A;</strong>&#xFF1A;iframe&#x968F;&#x540E;&#x5728;&#x526F;&#x57DF;&#x540D;&#x88AB;&#x521B;&#x5EFA;&#x3002;&#x5982;&#x679C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x662F;&#x4F7F;&#x7528;&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#x4F20;&#x9012;&#x7684;&#xFF0C;&#x5185;&#x5BB9;&#x6570;&#x636E;&#x5C06;&#x4E0E;iframe&#x88AB;&#x8F7D;&#x5165;&#x3002;</li>
<li><strong>&#x52A0;&#x8F7D;iframe&#xFF1A;</strong>iframe&#x88AB;&#x52A0;&#x8F7D;&#xFF08;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#x4F20;&#x9012;&#xFF0C;&#x5219;&#x4F34;&#x968F;&#x7740;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#xFF09;&#x5230;&#x7F51;&#x7AD9;&#x5E93;&#x3002;</li>
<li><strong>API&#x521D;&#x59CB;&#x5316;&#xFF1A;</strong>SafeFrame API&#x88AB;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x800C;&#x4E14;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#x4F20;&#x9012;&#xFF0C;&#x5219;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x88AB;&#x6E32;&#x67D3;&#x3002;</li>
<li><strong>&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x8BF7;&#x6C42;&#xFF08;&#x6A21;&#x5F0F;B&#xFF09;&#xFF1A;</strong>&#x5982;&#x679C;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x4F7F;&#x7528;&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#x4F20;&#x9012;&#xFF0C;&#x5219;SafeFrame&#x5185;&#x63D0;&#x4F9B;&#x7684;URL&#x88AB;&#x7528;&#x4E8E;&#x5411;&#x7B2C;&#x4E09;&#x65B9;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x5185;&#x5BB9;&#x3002;</li>
<li><strong>&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x6E32;&#x67D3;&#xFF08;&#x6A21;&#x5F0F;B&#xFF09;&#xFF1A;</strong>&#x5728;SafeFrame iframe&#x4E2D;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x88AB;&#x4F20;&#x9012;&#x548C;&#x6E32;&#x67D3;&#x3002;</li>
</ol>
<h4 id="2-1-4&#x901A;&#x8FC7;API&#x8FDB;&#x884C;&#x9875;&#x5185;&#x901A;&#x8BAF;"><a href="#2-1-4&#x901A;&#x8FC7;API&#x8FDB;&#x884C;&#x9875;&#x5185;&#x901A;&#x8BAF;" class="headerlink" title="2.1.4&#x901A;&#x8FC7;API&#x8FDB;&#x884C;&#x9875;&#x5185;&#x901A;&#x8BAF;"></a>2.1.4&#x901A;&#x8FC7;API&#x8FDB;&#x884C;&#x9875;&#x5185;&#x901A;&#x8BAF;</h4><p> &#x4E0B;&#x56FE;&#x8BF4;&#x660E;&#x4E86;&#x7F51;&#x7AD9;&#x4E0E;&#x5916;&#x90E8;&#x65B9;&#x5185;&#x5BB9;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x662F;&#x600E;&#x4E48;&#x542F;&#x52A8;&#x7684;&#x3002;</p>
<p> <img src="/xfe/2016/08/29/safeframe-v1-1-final/sf6.png" alt="&#x56FE;2-4"></p>
<ol>
<li><strong>&#x63A5;&#x6536;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#xFF08;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#xFF09;&#xFF1A;</strong>&#x6D4F;&#x89C8;&#x5668;&#x63A5;&#x6536;&#x7B2C;&#x4E09;&#x65B9;&#x6570;&#x636E;&#xFF0C;&#x4F5C;&#x4E3A;&#x6E32;&#x67D3;&#x5728;&#x7F51;&#x7AD9;&#x9875;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x3002;</li>
<li><strong>API&#x521D;&#x59CB;&#x5316;&#xFF1A;</strong>&#x4F7F;&#x7528;SafeFrame&#x7684;&#x7C7B;<code>$sf.host.Position</code>&#xFF0C;&#x7F51;&#x9875;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x63A5;&#x6536;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x6570;&#x636E;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x914D;&#x7F6E;&#x7684;SafeFrame&#x7F51;&#x7AD9;API&#x3002;</li>
<li><strong>&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x6E32;&#x67D3;&#xFF1A;</strong>&#xFF1A;&#x7B2C;&#x4E09;&#x65B9;&#x6570;&#x636E;&#x5728;SafeFrame&#x4E2D;&#x6E32;&#x67D3;&#x4E3A;&#x5185;&#x5BB9;&#x3002;</li>
<li><strong>&#x901A;&#x4FE1;&#xFF1A;</strong>&#x901A;&#x8BAF;&#xFF1A;&#x4E00;&#x65E6;&#x7B2C;&#x4E09;&#x5185;&#x5BB9;&#x88AB;&#x6E32;&#x67D3;&#xFF0C;&#x5982;&#x679C;SafeFrame&#x5DF2;&#x7ECF;&#x90E8;&#x7F72;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;SafeFrame&#x5916;&#x90E8;API&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x8C03;&#x7528;&#x7F51;&#x7AD9;API&#x3002;</li>
</ol>
<h3 id="2-2&#x8981;&#x6C42;"><a href="#2-2&#x8981;&#x6C42;" class="headerlink" title="2.2&#x8981;&#x6C42;"></a>2.2&#x8981;&#x6C42;</h3><p> &#x4E0B;&#x9762;&#x7684;&#x7AE0;&#x8282;&#x63CF;&#x8FF0;&#x5B9E;&#x65BD;SafeFrame&#x7684;&#x8981;&#x6C42;&#x3002;</p>
<h4 id="2-2-1-JavaScript-Host&#x5E93;&#x548C;API"><a href="#2-2-1-JavaScript-Host&#x5E93;&#x548C;API" class="headerlink" title="2.2.1 JavaScript Host&#x5E93;&#x548C;API"></a>2.2.1 JavaScript Host&#x5E93;&#x548C;API</h4><p> JavaScript&#x7684;host&#x5E93;&#x548C;API&#x662F;&#x7528;&#x6765;&#x63A7;&#x5236;&#x548C;&#x6E32;&#x67D3;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x3002;&#x8BE5;&#x5E93;&#x63D0;&#x4F9B;&#x4E86;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x7C7B;&#x548C;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x4E9B;&#x5C06;&#x5728;&#x7B2C;4&#x7AE0;&#x4E2D;&#x8FDB;&#x4E00;&#x6B65;&#x63CF;&#x8FF0;&#x3002;</p>
<blockquote>
<p><strong>host&#x5B9E;&#x73B0;&#x7684;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br>SafeFrame&#x53EF;&#x80FD;&#x5305;&#x542B;&#xFF1A;&#x7F51;&#x9875;&#x89C6;&#x56FE;&#xFF08;&#x79FB;&#x52A8;&#x7AEF;&#xFF09;&#xFF0C;&#x5D4C;&#x5165;&#x5F0F;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;HTA&#xFF08;&#x5FAE;&#x8F6F;HTML&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF09;&#xFF0C;&#x6216;&#x539F;&#x7528;&#x6237;&#x7684;Web&#x6D4F;&#x89C8;&#x5668;&#x3002;</p>
</blockquote>
<h4 id="2-2-2-&#x526F;host&#x57DF;&#x540D;"><a href="#2-2-2-&#x526F;host&#x57DF;&#x540D;" class="headerlink" title="2.2.2 &#x526F;host&#x57DF;&#x540D;"></a>2.2.2 &#x526F;host&#x57DF;&#x540D;</h4><p>SafeFrame host API&#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8DDF;host&#x9875;&#x9762;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x6765;&#x6E90;&#xFF0C;&#x4E3B;&#x673A;&#x540D;&#x6216;&#x57DF;&#x540D;&#x7684;iframe, &#x6765;&#x521B;&#x5EFA;&#xFF0C;&#x6E32;&#x67D3;&#x5E76;&#x7BA1;&#x7406;&#x7B2C;&#x4E09;&#x65B9;HTML&#x5185;&#x5BB9;&#x3002;&#x8FD9;&#x4E2A;&#x526F;&#x57DF;&#x540D;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x201C;&#x8DE8;&#x57DF;&#x5C4F;&#x969C;&#x201D;&#xFF0C;&#x9632;&#x6B62;&#x7B2C;&#x4E09;&#x65B9;&#x7684;HTML&#x548C;JavaScript&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x9875;&#x9762;&#x7684;&#x4EFB;&#x4F55;&#x4E1C;&#x897F;&#x3002;</p>
<p>Web&#x6D4F;&#x89C8;&#x5668;&#x9075;&#x5FAA;&#x201D;&#x540C;&#x6E90;&#x201D;&#x653F;&#x7B56;&#xFF0C;&#x5373;&#x6765;&#x81EA;2&#x4E2A;&#x4E0D;&#x540C;&#x6765;&#x6E90;&#x7684;&#x4EE3;&#x7801;&#x4E0D;&#x5141;&#x8BB8;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF08;&#x6709;&#x4E00;&#x4E9B;&#x4F8B;&#x5916;&#xFF09;&#x3002;&#x56E0;&#x6B64;&#xFF0C;host<em>&#x5FC5;&#x987B;</em>&#x6709;&#x4E00;&#x4E2A;&#x526F;&#x57DF;&#x540D;&#xFF0C;&#x4ECE;&#x90A3;&#x91CC;&#x53EF;&#x4EE5;&#x6295;&#x653E;SafeFrame&#x8D44;&#x6E90;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;CDN&#xFF08;&#x5185;&#x5BB9;&#x5206;&#x53D1;&#x7F51;&#x7EDC;&#xFF09;&#x6765;&#x63D0;&#x4F9B;&#x526F;&#x57DF;&#x540D;&#x3002;</p>
<h4 id="2-2-3-&#x8D44;&#x6E90;&#x516C;&#x7EA6;"><a href="#2-2-3-&#x8D44;&#x6E90;&#x516C;&#x7EA6;" class="headerlink" title="2.2.3 &#x8D44;&#x6E90;&#x516C;&#x7EA6;"></a>2.2.3 &#x8D44;&#x6E90;&#x516C;&#x7EA6;</h4><p>&#x5BF9;&#x4E8E;host&#xFF0C;SafeFrame&#x5B9A;&#x4E49;2&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x8D44;&#x6E90;&#xFF1A;&#x57FA;&#x7840;&#x6E32;&#x67D3;&#x7684;&#x6587;&#x4EF6;&#x548C;JavaScript&#x6587;&#x4EF6;&#x3002;</p>
<p><strong>&#x57FA;&#x7840;HTML&#x6587;&#x4EF6;&#xFF08;&#x9759;&#x6001;HTML&#x6587;&#x4EF6;&#xFF09;</strong></p>
<p>HTML&#x6587;&#x4EF6;&#x662F;&#x7528;&#x6765;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x7B2C;&#x4E09;&#x65B9;HTML&#x5185;&#x5BB9;&#x6E32;&#x67D3;&#x6210;&#x7684;&#x57FA;&#x7840;&#x7EA7;&#x7684;HTML&#x6587;&#x6863;&#x3002;&#x5728;&#x4E0D;&#x652F;&#x6301;HTML5&#x901A;&#x4FE1;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;HTML&#x6587;&#x4EF6;&#x8FD8;&#x53EF;&#x4EE5;&#x88AB;&#x7528;&#x6765;&#x5145;&#x5F53;&#x4EE3;&#x7406;&#xFF0C;&#x4EE5;&#x4FC3;&#x8FDB;&#x5728;&#x7F51;&#x7AD9;&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x4E4B;&#x95F4;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x3002;</p>
<p>&#x4E0E;SafeFrame&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x7684;HTML&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x9075;&#x5FAA;&#x4EE5;&#x4E0B;&#x7EA6;&#x5B9A;&#xFF1A;</p>
<ul>
<li>&#x6D4F;&#x89C8;&#x5668;&#x548C;&#x4EE3;&#x7406;&#x4E5F;&#x5FC5;&#x987B;&#x80FD;&#x591F;&#x516C;&#x5F00;&#x7F13;&#x5B58;HTML&#x6587;&#x4EF6;</li>
<li>&#x4E00;&#x4E2A;&#x4EE5;&#x4E0A;&#x7684;HTML&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x88AB;&#x7528;&#x4E8E;&#x6E32;&#x67D3;&#xFF0C;&#x4EE5;&#x63D0;&#x4F9B;&#x989D;&#x5916;&#x7684;&#x529F;&#x80FD;&#x3002;</li>
<li>&#x6240;&#x6709;&#x7684;&#x6E32;&#x67D3;HTML&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x5305;&#x62EC;&#x5BF9;&#x6269;&#x5C55;API&#x529F;&#x80FD;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x4EE5;&#x6E32;&#x67D3;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x3002;</li>
<li>&#x7528;&#x4E8E;&#x6E32;&#x67D3;&#x7684;HTML&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x9996;&#x5148;&#x5305;&#x542B;SafeFrame&#x6269;&#x5C55;JavaScript&#x5E93;&#x3002;</li>
</ul>
<p><strong>JavaScript&#x6587;&#x4EF6;</strong><br>&#x7F51;&#x7AD9;&#x7684;SafeFrame API&#x7528;JavaScript&#x5B9E;&#x73B0;&#xFF0C;&#x800C;&#x4E14;&#x5FC5;&#x987B;&#x9075;&#x5B88;&#x4EE5;&#x4E0B;&#x516C;&#x7EA6;&#xFF1A;</p>
<ul>
<li>SafeFrame API JavaScript&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x662F;&#x9759;&#x6001;&#x7684;&#x3002;</li>
<li>&#x6269;&#x5C55;API<em>&#x603B;&#x662F;</em>&#x7528;JavaScript&#x5B9E;&#x73B0;&#x3002;</li>
<li>&#x4E5F;&#x5FC5;&#x987B;&#x5141;&#x8BB8;&#x6D4F;&#x89C8;&#x5668;&#x548C;&#x4EE3;&#x7406;&#x516C;&#x5F00;&#x7F13;&#x5B58;&#x6240;&#x6709;&#x63D0;&#x4F9B;&#x7684;&#x6587;&#x4EF6;&#x3002;</li>
</ul>
<h4 id="2-2-4-SafeFrame&#x7684;URI&#x516C;&#x7EA6;"><a href="#2-2-4-SafeFrame&#x7684;URI&#x516C;&#x7EA6;" class="headerlink" title="2.2.4 SafeFrame&#x7684;URI&#x516C;&#x7EA6;"></a>2.2.4 SafeFrame&#x7684;URI&#x516C;&#x7EA6;</h4><p>&#x56E0;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x548C;&#x4EE3;&#x7406;&#x5FC5;&#x987B;&#x80FD;&#x591F;&#x7F13;&#x5B58;JavaScript&#x548C;HTML&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x5E94;&#x8BE5;&#x53EA;&#x56E0;&#x65B0;&#x7248;&#x672C;&#x7684;&#x53D1;&#x884C;&#x800C;&#x6539;&#x53D8;&#xFF0C;&#x800C;&#x4E14;&#x7528;&#x4E8E;&#x8BBF;&#x95EE;&#x6587;&#x4EF6;&#x7684;URI&#x4E0D;&#x80FD;&#x5305;&#x542B;&#x67E5;&#x8BE2;&#x5B57;&#x7B26;&#x4E32;&#x53C2;&#x6570;&#x6216;&#x4EFB;&#x4F55;&#x4F1A;&#x8BA9;&#x6D4F;&#x89C8;&#x5668;&#x6216;&#x4EE3;&#x7406;&#x4E0D;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x7684;&#x4E1C;&#x897F;&#x3002;</p>
<p>&#x7248;&#x672C;&#x4E00;&#x81F4;&#x6027;&#x5FC5;&#x987B;&#x5F97;&#x5230;&#x7EF4;&#x62A4;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5BF9;&#x4E8E;&#x7248;&#x672C;2-2-0&#x7684;HTML&#x8D44;&#x6E90;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x63D0;&#x4F9B;&#x7ED9;&#x4E00;&#x4E2A;&#x7248;&#x672C;2-3-5&#x7684;JavaScript&#x5B9E;&#x4F8B;&#x3002;&#x7248;&#x672C;&#x4E00;&#x81F4;&#x6027;&#x5FC5;&#x987B;&#x5F97;&#x5230;&#x7EF4;&#x62A4;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5BF9;&#x4E8E;&#x7248;&#x672C;2-2-0 HTML&#x8D44;&#x6E90;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x63D0;&#x4F9B;&#x7ED9;&#x4E00;&#x4E2A;JavaScript&#x5B9E;&#x73B0;&#x7248;&#x672C;2-3-5&#x7684;&#x3002;&#xFF08;&#x6CE8;&#xFF1A;&#x539F;&#x89C4;&#x8303;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E24;&#x53E5;&#x8BDD;&#x91CD;&#x590D;&#x4E86;&#xFF09;</p>
<p>&#x4EE5;&#x4E0B;SafeFrame&#x7684;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x8D44;&#x6E90;&#x7684;&#x7684;URI&#x683C;&#x5F0F;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x9759;&#x6001;URI&#x7684;&#x4F7F;&#x7528;&#x548C;&#x8D44;&#x6E90;&#x8303;&#x56F4;&#x5185;&#x7684;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x3002;</p>
<p><img src="/xfe/2016/08/29/safeframe-v1-1-final/sf7.png" alt="&#x56FE;2-5"></p>
<p>&#x7528;&#x4E8E;&#x8BBF;&#x95EE;SafeFrame&#x8D44;&#x6E90;&#x7684;URI&#x7684;&#x90E8;&#x5206;&#x5B8C;&#x5168;&#x662F;&#x7531;&#x7F51;&#x7AD9;&#x5B9A;&#x4E49;&#x7684;&#xFF0C;&#x4F46;&#x5FC5;&#x987B;&#x6309;&#x6307;&#x5B9A;&#x7684;&#x987A;&#x5E8F;&#x63D0;&#x4F9B;&#x5E76;&#x6309;&#x4E0B;&#x9762;&#x7684;&#x7EC6;&#x8282;&#x63CF;&#x8FF0;&#xFF1A;</p>
<ol>
<li>&#x534F;&#x8BAE; (&#x4F8B;&#x5982;http, https&#x7B49;&#x7B49;) </li>
<li>&#x526F;&#x57DF;&#x540D;&#xFF08;&#x548C;&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x7684;&#x8BDD;&#xFF09;</li>
<li>&#x901A;&#x5411;SafeFrame&#x8D44;&#x6E90;&#x7684;&#x6839;&#x8DEF;&#x5F84;&#xFF08;&#x5141;&#x8BB8;&#x591A;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x7528;/&#x5206;&#x9694;&#xFF09;</li>
<li>SafeFrame&#x7684;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;&#x201C;N-N-N&#x201D;</li>
<li>&#x5C0F;&#x5199;&#x7684;&#x201C;html&#x201D;&#x8868;&#x793A;HTML&#x6587;&#x4EF6;&#x6216;&#x5C0F;&#x5199;&#x7684;&#x201C;JS&#x201D;&#x8868;&#x793A;JavaScript&#x6587;&#x4EF6;&#xFF08;&#x5176;&#x4ED6;&#x8D44;&#x6E90;&#x7C7B;&#x578B;&#x53EF;&#x80FD;&#x5305;&#x542B;&#x5728;&#x672A;&#x6765;&#x53D1;&#x5E03;&#x7684;SafeFrame&#xFF09;</li>
<li>&#x6587;&#x4EF6;&#x540D;&#x79F0;</li>
</ol>
<h3 id="2-3-&#x5B9E;&#x73B0;&#x6CE8;&#x610F;&#x4E8B;&#x9879;"><a href="#2-3-&#x5B9E;&#x73B0;&#x6CE8;&#x610F;&#x4E8B;&#x9879;" class="headerlink" title="2.3 &#x5B9E;&#x73B0;&#x6CE8;&#x610F;&#x4E8B;&#x9879;"></a>2.3 &#x5B9E;&#x73B0;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</h3><p>&#x4E0B;&#x9762;&#x7684;&#x8BF4;&#x660E;&#x5BF9;&#x4E8E;&#x7F51;&#x7AD9;&#x5B9E;&#x73B0;SafeFrame&#x6765;&#x8BF4;&#x662F;&#x91CD;&#x8981;&#x7684;&#x3002;</p>
<p><strong>SafeFrame&#x548C;iframe&#x5D4C;&#x5957;</strong><br>SafeFrame&#x5BB9;&#x5668;&#x603B;&#x662F;&#x5728;&#x9876;&#x5C42;HTML&#x6587;&#x6863;&#x4E2D;&#x5448;&#x73B0;&#x3002;&#x4E00;&#x4E2A;SafeFrame&#x7684;&#x5BB9;&#x5668;&#x4E0D;&#x80FD;&#x5728;&#x53E6;&#x4E00;&#x4E2A;SafeFrame&#x5BB9;&#x5668;&#x5185;&#x5448;&#x73B0;&#x3002;SafeFrame Host API&#x521B;&#x5EFA;&#x7684;iframe&#x53EA;&#x80FD;&#x4E0E;&#x4F5C;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x6267;&#x884C;&#x65F6;&#x7684;host&#x7684;&#x9876;&#x5C42;HTML&#x7684;&#x4E00;&#x90E8;&#x5206;&#x5448;&#x73B0;&#x7684;&#x5916;&#x90E8;HTML&#x901A;&#x4FE1;&#x3002;SafeFrame&#x7684;JavaScript&#x4EE3;&#x7801;&#x5FC5;&#x987B;&#x80FD;&#x591F;&#x68C0;&#x6D4B;&#x4E0D;&#x6B63;&#x786E;&#x7684;&#x5D4C;&#x5957;&#x3002;</p>
<p>&#x9274;&#x4E8E;&#x4EE5;&#x4E0B;&#x4E0D;&#x5F53;&#x5D4C;&#x5957;&#x7684;&#x60C5;&#x51B5;&#xFF0C;SafeFrame&#x7684;JavaScript&#x4EE3;&#x7801;&#x5E94;&#x8BE5;&#x91C7;&#x53D6;&#x4E0B;&#x9762;&#x5BF9;&#x5E94;&#x7684;&#x884C;&#x52A8;&#x3002;</p>
<ol>
<li>SafeFrame&#x7F51;&#x7AD9;&#x7684;JavaScript&#x4EE3;&#x7801;&#x52A0;&#x8F7D;&#x5230;&#x4E00;&#x4E2A;iframe&#xFF1A;<br>a. SafeFrame&#x7F51;&#x7AD9;&#x7684;JavaScript&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x662F;&#x65E0;&#x6548;&#x7684;&#x3002;<br>b. &#x4E00;&#x4E2A;&#x4E14;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x8C03;&#x7528;&#x51FD;&#x6570;<code>$sf.host.boot</code>&#x662F;&#x5141;&#x8BB8;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x7C7B;<code>$sf.host.Position</code>&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5BB9;&#x5C31;&#x53EF;&#x4EE5;&#x5448;&#x73B0;&#x4E86;&#x3002;<br>c. SafeFrame&#x7684;JavaScript&#x4EE3;&#x7801;&#x5C06;&#x4E0D;&#x4F1A;&#x9075;&#x5B88;&#x4E14;&#x4E0D;&#x4F1A;&#x5904;&#x7406;&#x914D;&#x7F6E;&#x8C03;&#x7528;&#xFF08;&#x8BF7;&#x53C2;&#x9605;&#x7C7B;<code>$sf.host.Config</code>&#x548C;&#x7C7B;<code>$sf.host.PosConfig</code>&#xFF09;&#x3002;<br>d. SafeFrame&#x7684;JavaScript&#x4EE3;&#x7801;&#x5C06;&#x4E0D;&#x4F1A;&#x9075;&#x5B88;&#x4E14;&#x4E0D;&#x4F1A;&#x5904;&#x7406;&#x4E00;&#x4E2A;iframe&#x4E2D;&#x7684;SafeFrame&#x6807;&#x7B7E;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;</li>
<li>SafeFrame&#x6807;&#x7B7E;&#xFF08;&#x89C1;&#x7B2C;3&#x7AE0;&#xFF09;&#x653E;&#x7F6E;&#x5728;iframe&#x91CC;&#x9762;&#xFF1A;<br>a. SafeFrame&#x7684;JavaScript&#x4EE3;&#x7801;&#x5C06;&#x89E3;&#x6790;&#x548C;&#x8BFB;&#x53D6;SafeFrame&#x6807;&#x7B7E;&#x4EE5;&#x68C0;&#x7D22;&#x5185;&#x5BB9;&#x3002;<br>b. SafeFrame&#x7684;JavaScript&#x4EE3;&#x7801;&#x5C06;&#x6E32;&#x67D3;&#x5185;&#x5BB9;<br>c. SafeFrame&#x7684;JavaScript&#x4EE3;&#x7801;&#x5C06;&#x4E0D;&#x4F1A;&#x9075;&#x5B88;&#x4E14;&#x4E0D;&#x4F1A;&#x5904;&#x7406;&#x914D;&#x7F6E;&#x8C03;&#x7528;&#xFF08;&#x8BF7;&#x53C2;&#x9605;&#x7C7B;<code>$sf.host.Config</code>&#x548C;&#x7C7B;<code>$sf.host.PosConfig</code>&#xFF09;&#x3002;<br>d. SafeFrame&#x7684;JavaScript&#x4EE3;&#x7801;&#x5C06;&#x4E0D;&#x4F1A;&#x9075;&#x5B88;&#x4E14;&#x4E0D;&#x4F1A;&#x5904;&#x7406;&#x4E00;&#x4E2A;iframe&#x4E2D;&#x7684;SafeFrame&#x6807;&#x7B7E;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;<br>e. &#x5982;&#x679C;&#x63D0;&#x4F9B;&#x7684;iframe&#x662F;&#x4E00;&#x4E2A;SafeFrame&#x5BB9;&#x5668;&#xFF0C;&#x90A3;&#x4E48;&#x5185;&#x5BB9;&#x4F34;&#x968F;&#x7740;&#x81EA;&#x5DF1;&#x7684;JavaScript&#x4EE3;&#x7801;&#x88AB;&#x6E32;&#x67D3;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x7B2C;&#x4E09;&#x65B9;&#x7684;SafeFrame API&#x3002;</li>
</ol>
<p><strong>SafeFrame JavaScript&#x5E93;</strong><br>SafeFrame&#x5BB9;&#x5668;&#x603B;&#x662F;&#x5305;&#x542B;&#x4E00;&#x4E2A;JavaScript&#x5E93;&#xFF0C;&#x5B83;&#x54CD;&#x5E94;SafeFrame host JavaScript&#x5E93;&#xFF0C;&#x5E76;&#x4E14;&#x603B;&#x662F;&#x4F5C;&#x4E3A;&#x5728;HTML&#x6E32;&#x67D3;&#x6587;&#x4EF6;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;JavaScript&#x6587;&#x4EF6;&#x3002;</p>
<p><strong>SafeFrame HTML&#x7BA1;&#x7406;</strong><br>SafeFrame&#x7BA1;&#x7406;&#x6240;&#x6709;&#x5B83;&#x521B;&#x5EFA;&#x7684;HTML&#x5143;&#x7D20;&#x3002;&#x65E0;&#x8BBA;&#x662F;host&#x8FD8;&#x662F;&#x7B2C;&#x4E09;&#x65B9;&#x65B9;&#x90FD;&#x4E0D;&#x5E94;&#x8BE5;&#x8BD5;&#x56FE;&#x64CD;&#x7EB5;&#x8BE5;SafeFrame&#x521B;&#x5EFA;&#x548C;&#x7BA1;&#x7406;&#x7684;HTML&#x8282;&#x70B9;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x4F1A;&#x4E0D;&#x7ECF;&#x610F;&#x635F;&#x574F;&#x63A5;&#x53E3;&#x3002;</p>
<p>SafeFrame&#x53EF;&#x80FD;&#x4F1A;&#x4E3A;&#x5B83;&#x63A7;&#x5236;&#x7684;HTML&#x5143;&#x7D20;&#x589E;&#x52A0;&#x4E00;&#x4E2A;CSS&#x7C7B;&#xFF0C;&#x4F46;&#x7F51;&#x7AD9;&#x548C;&#x5916;&#x90E8;&#x65B9;&#x5E94;&#x907F;&#x514D;&#x4E3A;&#x4EE5;&#x4E0B;&#x7684;CSS&#x7C7B;&#x540D;&#x6DFB;&#x52A0;CSS&#x89C4;&#x5219;&#x6216;&#x9009;&#x62E9;&#x5668;&#xFF1A;</p>
<ul>
<li><strong>sf_data: </strong>&#x7528;&#x4E8E;&#x8868;&#x793A;&#x5305;&#x542B;&#x8981;&#x6E32;&#x67D3;&#x7684;&#x6570;&#x636E;&#x7684;&#x5185;&#x5D4C;SafeFram&#x5143;&#x7D20;</li>
<li><strong>sf_position: </strong>&#x7528;&#x4E8E;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x88AB;&#x6E32;&#x67D3;&#x7684;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x8D77;&#x59CB;HTML&#x5143;&#x7D20;&#x6811;</li>
<li><strong>sf_lib: </strong>&#x7528;&#x4E8E;&#x8868;&#x793A;&#x5305;&#x542B;SafeFrame JavaScript&#x4EE3;&#x7801;&#x7684;SCRIPT HTML&#x5143;&#x7D20;&#x3002;</li>
<li><strong>sf_el: </strong>&#x4E00;&#x822C;&#x7528;&#x6765;&#x8868;&#x793A;&#x7531;SafeFrame&#x7684;JavaScript&#x4EE3;&#x7801;&#x4FDD;&#x6301;&#x7684;&#x5176;&#x4ED6;HTML&#x5143;&#x7D20;</li>
</ul>
<p><strong>&#x9012;&#x4EA4;&#x5185;&#x5BB9;&#x5230;&#x7684;SafeFrame host API&#x4EE5;&#x6E32;&#x67D3;</strong><br>&#x9664;&#x4E86;&#x914D;&#x7F6E;&#x9012;&#x9001;&#x5230;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#xFF0C;host&#x5E94;&#x6838;&#x5B9E;&#x76F8;&#x5173;&#x5185;&#x5BB9;&#x662F;&#x4EE5;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x7684;&#x5F62;&#x5F0F;&#x7ED9;API&#x53BB;&#x5904;&#x7406;&#x3002;host&#x9875;&#x9762;&#x63A5;&#x6536;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4F5C;&#x4E3A;&#x539F;&#x59CB;&#x7684;HTML&#x6216;&#x7740;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;URL, SafeFrame&#x81EA;&#x5DF1;&#x53BB;&#x83B7;&#x53D6;&#x5185;&#x5BB9;&#x5E76;&#x6E32;&#x67D3;&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;SafeFrame&#x90FD;&#x4F7F;&#x7528;JavaScript&#x6765;&#x5904;&#x7406;&#x4FE1;&#x606F;&#x3002;&#x539F;&#x59CB;HTML&#x5185;&#x5BB9;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5728;&#x53D1;&#x9001;&#x5230;SafeFrame&#x4E4B;&#x524D;&#x8FDB;&#x884C;&#x7F16;&#x7801;&#x3002;&#x867D;&#x7136;&#x4E0D;&#x9700;&#x8981;&#x8C03;&#x6574;URL&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x5E94;&#x77E5;&#x9053;&#x4E00;&#x4E2A;JavaScript&#x7684;&#x54CD;&#x5E94;&#x5BF9;&#x4E8E;&#x6E32;&#x67D3;&#x548C;&#x6DFB;&#x52A0;&#x5185;&#x5BB9;&#x5230;SafeFrame&#x5BB9;&#x5668;&#x662F;&#x5FC5;&#x8981;&#x7684;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#x63D0;&#x4F9B;&#x66F4;&#x591A;&#x7684;&#x7EC6;&#x8282;&#xFF0C;&#x4E14;&#x4E0E;&#x7B2C;2.1&#x8282;&#x8BA8;&#x8BBA;&#x7684;&#x4E24;&#x4E2A;&#x4F20;&#x9012;&#x6A21;&#x5F0F;&#x76F8;&#x5BF9;&#x5E94;&#x3002;</p>
<ul>
<li><p><strong>&#x539F;&#x59CB;&#x7684;HTML&#x4F5C;&#x4E3A;JavaScript&#x5B57;&#x7B26;&#x4E32;&#xFF08;&#x4F20;&#x9012;&#x6A21;&#x5F0F;A&#xFF09;</strong><br>&#x7531;&#x4E8E;JavaScript&#x5904;&#x7406;&#x67D0;&#x4E9B;&#x5B57;&#x7B26;&#x548C;SCRIPT&#x6807;&#x7B7E;&#x65F6;&#x4E0D;&#x540C;&#x4E8E;HTML&#xFF0C;host&#x53EF;&#x80FD;&#x5FC5;&#x987B;&#x5728;&#x53D1;&#x9001;&#x7ED9;SafeFrame API&#x5904;&#x7406;&#x4E4B;&#x524D;&#xFF0C;&#x4FEE;&#x6539;&#x4EFB;&#x4F55;&#x539F;&#x59CB;&#x7684;HTML&#x5185;&#x5BB9;&#x3002;<br>&#x4F8B;&#x5982;&#xFF0C;&#x4E0B;&#x9762;&#x7684;HTML&#x5B57;&#x7B26;&#x4E32;&#x88AB;&#x5F53;&#x505A;JavaScript&#x5904;&#x7406;&#x65F6;&#xFF0C;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;&#xFF1A;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"> <span class="built_in">document</span>.write(<span class="string">&apos;Hello &quot;Dave&quot;&apos;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&#x4E3A;&#x4E86;&#x4F7F;&#x4E0A;&#x8FF0;HTML&#x5B57;&#x7B26;&#x4E32;&#x5728;SafeFrame API&#x4E2D;&#x6B63;&#x5E38;&#x88AB;&#x5904;&#x7406;&#xFF0C;&#x5FC5;&#x987B;&#x91CD;&#x5199;&#x683C;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> html = <span class="string">&quot;&lt;scr&quot;</span>+ <span class="string">&quot;ipt type=\&quot;text\/javascript\&quot;&gt; document.write(&apos;Hello \&quot;Dave\&quot;&apos;); &lt;/scr&quot;</span>+<span class="string">&quot;ipt&gt;&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>&#x4EE5;&#x4E0A;&#x7684;JavaScript&#x683C;&#x5F0F;&#x7684;HTML&#x5B57;&#x7B26;&#x4E32;&#x53EF;&#x4EE5;&#x5728;SafeFrame<code>$sf.host.Position</code>&#x5BF9;&#x8C61;&#x4E2D;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x3002;</p>
</li>
<li><p><strong>&#x4F7F;&#x7528;URL&#x6765;&#x83B7;&#x53D6;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#xFF08;&#x4F20;&#x9012;&#x6A21;&#x5F0F;B&#xFF09;</strong><br>&#x4E3B;&#x673A;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;URL&#x6307;&#x5411;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x63D0;&#x4F9B;&#x6240;&#x8FF0;HTML&#x5185;&#x5BB9;&#x672C;&#x8EAB;&#x3002;&#x5728;&#x6B64;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C; host&#x9875;&#x9762;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x628A;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x6E32;&#x67D3;&#x5230;&#x7684;SafeFrame<code>$sf.host.Position</code>&#x5BF9;&#x8C61;&#xFF0C;&#x7ED9;SafeFrame&#x53BB;&#x83B7;&#x53D6;&#x548C;&#x6E32;&#x67D3;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x3002;<br>&#x7531;&#x4E8E;&#x7F51;&#x9875;&#x4E0D;&#x80FD;&#x7F16;&#x7801;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x4F7F;&#x5176;&#x5728;SafeFrame&#x4E2D;&#x5904;&#x7406;&#xFF0C;&#x4ECE;SafeFrame&#x7684;&#x8BF7;&#x6C42;&#x5F97;&#x5230;&#x7684;&#x54CD;&#x5E94;&#x5E94;&#x8BE5;&#x662F;JavaScript&#x683C;&#x5F0F;&#x7684;&#x3002;&#x4E00;&#x65E6;SafeFrame&#x5BB9;&#x5668;&#x751F;&#x6210;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;URL&#x54CD;&#x5E94;&#x7684;SCRIPT&#x6807;&#x7B7E;&#x4E5F;&#x4F1A;&#x4EA7;&#x751F;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x9644;&#x52A0;&#x5185;&#x5BB9;&#x3002;&#x4F7F;&#x7528;SCRIPT&#x6807;&#x7B7E;&#x800C;&#x4E0D;&#x4F7F;&#x7528;&#x5D4C;&#x5957;iframe&#x6807;&#x7B7E;&#xFF0C;&#x4F7F;&#x5F97;&#x901A;&#x8FC7;&#x6240;&#x63D0;&#x4F9B;&#x7684;URL&#x4F20;&#x9012;&#x7684;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x5728;SafeFrame&#x7684;&#x5BB9;&#x5668;&#x5185;&#x8BBF;&#x95EE;&#x6269;&#x5C55;API&#x3002;</p>
<blockquote>
<p><strong>&#x7B2C;&#x4E09;&#x65B9;&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br>&#x867D;&#x7136;&#x7B2C;&#x4E09;&#x65B9;HTML&#x5185;&#x5BB9;&#x53EF;&#x80FD;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;iframe&#x6807;&#x7B7E;&#xFF0C;&#x56E0;&#x4E3A;&#x201C;&#x540C;&#x6E90;&#x201D;&#x653F;&#x7B56;&#xFF0C;&#x5728;&#x989D;&#x5916;&#x7684;iframe&#x6807;&#x8BB0;&#x5185;&#x7684;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#x88AB;&#x7981;&#x6B62;&#x8BBF;&#x95EE;API&#x3002;&#x6709;&#x5173;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x7B2C;3&#x7AE0;&#x7684;SafeFrame&#x6807;&#x7B7E;</p>
</blockquote>
</li>
</ul>
<h3 id="2-4-SafeFrame&#x7684;&#x6E32;&#x67D3;&#x7EC6;&#x8282;"><a href="#2-4-SafeFrame&#x7684;&#x6E32;&#x67D3;&#x7EC6;&#x8282;" class="headerlink" title="2.4 SafeFrame&#x7684;&#x6E32;&#x67D3;&#x7EC6;&#x8282;"></a>2.4 SafeFrame&#x7684;&#x6E32;&#x67D3;&#x7EC6;&#x8282;</h3><p>&#x7F51;&#x7AD9;JavaScript&#x5E93;&#x63D2;&#x5165;&#x4E00;&#x4E2A;HTML iframe&#x5143;&#x7D20;&#x5230;&#x7F51;&#x7AD9;&#x9875;&#x9762;&#x3002;&#x7F51;&#x7AD9;API&#x63A7;&#x5236;&#x6E32;&#x67D3;&#x8FC7;&#x7A0B;&#xFF0C;&#x4EE5;&#x4E5F;&#x63A7;&#x5236;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x5728;iframe&#x4E2D;&#x6E32;&#x67D3;&#x3002;</p>
<p>iframe&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x7684;&#x6307;&#x5BFC;&#x6765;&#x521B;&#x5EFA;&#xFF1A;</p>
<p><strong><code>src</code>&#x5C5E;&#x6027;</strong><br>iframe&#x7684;&#x201D;src&#x201D;&#x5C5E;&#x6027;&#x662F;&#x6307;&#x5411;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x7684;&#xFF0C;&#x516C;&#x5F00;&#x7F13;&#x5B58;&#x7684;HTML&#x6587;&#x4EF6;&#x7684;URL&#x3002;&#x6240;&#x63D0;&#x4F9B;&#x7684;URL&#x5FC5;&#x987B;&#x6765;&#x81EA;&#x4E0D;&#x540C;host&#x57DF;&#x7684;&#x6765;&#x6E90;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x5178;&#x578B;&#x7684;&#x5185;&#x5BB9;&#x5206;&#x53D1;&#x7F51;&#x7EDC;&#xFF08;CDN&#xFF09;&#x5206;&#x53D1;&#x3002;</p>
<p><strong><code>name</code>&#x5C5E;&#x6027;</strong><br>iframe&#x7684;&#x201D;name&#x201D;&#x5C5E;&#x6027;&#x5FC5;&#x987B;&#x5305;&#x542B;&#x6570;&#x636E;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5305;&#x542B;&#x8FD9;&#x4E9B;&#x7684;&#x914D;&#x7F6E;&#x5C5E;&#x6027;&#xFF1A;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;SafeFrame&#x4F4D;&#x7F6E;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5143;&#x6570;&#x636E;&#x548C;&#x6E32;&#x67D3;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x5728;name&#x5C5E;&#x6027;&#x4E2D;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5B57;&#x7B26;&#x4E32;&#x4F7F;&#x5355;&#x5411;&#x7684;&#xFF0C;&#x540C;&#x6B65;&#x7684;&#x6D88;&#x606F;&#x4F20;&#x9012;&#xFF0C;&#x4F7F;&#x5F97;HTML&#x6587;&#x4EF6;&#x4E2D;&#x7684;JavaScript&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#xFF1A;&#x8BFB;&#x53D6;&#x76F8;&#x5E94;&#x7684;<code>window.name</code>&#x5C5E;&#x6027;&#xFF0C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x6570;&#x636E;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8BBE;&#x7F6E;&#x5916;&#x90E8;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x6700;&#x540E;&#x6E32;&#x67D3;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x6280;&#x672F;&#x5141;&#x8BB8;&#x5305;&#x542B;JavaScript&#x7684;<code>document.write</code>&#x547D;&#x4EE4;&#x7684;HTML <code>SCRIPT</code>&#x6807;&#x7B7E;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;</p>
<p><strong><code>Width</code>&#x548C;<code>Height</code>&#x5C5E;&#x6027;</strong><br>iframe&#x7684;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#x9700;&#x8981;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;&#x5728;<code>$sf.host.PosConfig</code>&#x5BF9;&#x8C61;&#x4E2D;&#x7684;w&#x548C;h&#x5B57;&#x6BB5;&#x4E2D;&#x7ED9;&#x51FA;&#x7684;&#x76F8;&#x540C;&#x7684;&#x503C;&#x3002;&#x901A;&#x5E38;&#xFF0C;iframe&#x7684;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#x5E94;&#x4E0E;&#x6E32;&#x67D3;&#x7684;&#x5185;&#x5BB9;&#x7684;&#x5DF2;&#x77E5;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#x4E00;&#x81F4;&#x3002;</p>
<p><strong><code>SCRIPT</code>&#x6807;&#x7B7E;</strong><br>&#x4E00;&#x4E2A;<code>SCRIPT</code>&#x6807;&#x7B7E;&#x5E94;&#x5B58;&#x5728;&#x4E8E;&#x88AB;&#x521B;&#x5EFA;&#x7684;iframe&#x5185;&#x7684;HTML&#x6587;&#x6863;&#x4E2D;&#x3002;&#x8FD9;&#x4E2A;<code>SCRIPT</code>&#x6807;&#x7B7E;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#xFF0C;&#x6700;&#x521D;&#x7684;&#x5728;HTML&#x6587;&#x6863;&#x4E2D;&#x4EE5;&#x6570;&#x636E;&#x5F62;&#x5F0F;&#x8BFB;&#x53D6;&#x4EE5;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x5E76;&#x6E32;&#x67D3;&#x7684;JavaScript&#x3002;&#x4E00;&#x4E2A;&#x8BBF;&#x95EE;JavaScirpt&#x6587;&#x4EF6;&#x7684;&#x76F8;&#x5173;&#x7684;URL&#x53EF;&#x4EE5;&#x5907;&#x7528;&#xFF0C;&#x53EA;&#x8981;&#x7248;&#x672C;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x6027;&#xFF08;&#x6B32;&#x77E5;&#x66F4;&#x591A;&#x5173;&#x4E8E;URL&#x5728;SafeFrame&#x4E2D;&#x7684;&#x516C;&#x7EA6;&#xFF0C;&#x8BF7;&#x67E5;&#x9605;&#x8282;2.2.4&#xFF09;&#x3002;</p>
<p>&#x6B64;JavaScript&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x64CD;&#x4F5C;&#xFF08;&#x6309;&#x987A;&#x5E8F;&#xFF09;&#xFF1A;</p>
<ol>
<li>&#x8BF7;&#x68C0;&#x67E5;HTML&#x6587;&#x6863;&#x662F;&#x76F4;&#x63A5;&#x5728;&#x9876;&#x7EA7;HTML&#x6587;&#x6863;&#x4E2D;&#x7684;&#xFF08;&#x662F;&#x5B83;&#x7684;&#x4E00;&#x4E2A;&#x5B69;&#x5B50;&#xFF09;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x662F;&#xFF0C;&#x5E94;&#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x6E32;&#x67D3;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#x3002;</li>
<li>&#x8BFB;&#x53D6;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5728;<code>window.name</code>&#x5C5E;&#x6027;&#x4E2D;&#x4F20;&#x9012;&#x7684;&#x6570;&#x636E;&#x3002;</li>
<li>&#x9A8C;&#x8BC1;&#x4F20;&#x9012;&#x5230;<code>window.name</code>&#x5C5E;&#x6027;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5B83;&#x901A;&#x5E38;&#x662F;&#x901A;&#x8FC7;&#xFF0C;&#x786E;&#x4FDD;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5BF9;&#x8C61;&#x5305;&#x542B;&#x6240;&#x6709;&#x5FC5;&#x9700;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;GUID&#xFF0C;&#x6765;&#x5B8C;&#x6210;&#x9A8C;&#x8BC1;&#x3002;&#x5982;&#x679C;&#x9A8C;&#x8BC1;&#x5931;&#x8D25;&#xFF0C;&#x5E94;&#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x6E32;&#x67D3;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#x3002;</li>
<li>&#x8BBE;&#x7F6E;<code>window.name</code>&#x5C5E;&#x6027;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF08;&#x201D;&#x201D;&#xFF09;&#xFF0C;&#x4F7F;&#x7B2C;&#x4E09;&#x65B9;&#x4E0D;&#x80FD;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5230;&#x76F8;&#x5173;&#x6570;&#x636E;&#x3002;</li>
<li>&#x521D;&#x59CB;&#x5316;&#x53D1;&#x9001;&#x8DE8;&#x57DF;&#x4FE1;&#x606F;&#x5230;host SafeFrame JavaScript&#x7684;&#x80FD;&#x529B;&#x3002;</li>
<li>&#x9644;&#x52A0;&#x4EFB;&#x4F55;&#x989D;&#x5916;&#x7684;&#x6807;&#x8BB0;&#x548C;<code>name</code>&#x5C5E;&#x6027;&#x4E2D;&#x4F20;&#x9012;&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;</li>
<li>&#x9644;&#x52A0;&#x4EFB;&#x4F55;&#x4E13;&#x6709;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x6216;&#x5176;&#x4ED6;&#x7EC6;&#x8282;&#x5230;HTML&#x6587;&#x6863;&#xFF08;&#x5982;<code>onload</code>&#x4E8B;&#x4EF6;&#xFF09;&#x3002;</li>
<li>&#x6E32;&#x67D3;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x3002;</li>
</ol>
<p>HTML&#x6587;&#x4EF6;&#x5E94;&#x8BE5;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p>
<ul>
<li>CSS&#x89C4;&#x5219;&#xFF1A;&#x8BBE;&#x7F6E;&#x6587;&#x6863;&#x4E2D;&#x7684;<code>BODY</code>&#x5143;&#x7D20;&#x7684;margin&#x548C;padding&#x4E3A;0px&#x3002;</li>
<li>&#x4E00;&#x4E2A;&#x5355;&#x4E00;&#x7684;&#xFF0C;&#x7EDD;&#x5BF9;&#x5B9A;&#x4F4D;&#x7684;<code>DIV</code>&#x5143;&#x7D20;&#xFF0C;&#x4F5C;&#x4E3A;<code>BODY</code>&#x5143;&#x7D20;&#x7684;&#x76F4;&#x7CFB;&#x5B50;&#x7ED3;&#x70B9;&#xFF0C;&#x6700;&#x521D;&#x4F4D;&#x4E8E;top 0&#xFF0C;left 0&#x3002;&#x8FD9;&#x4E2A;&#x5143;&#x7D20;&#x5728;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x5E0C;&#x671B;&#x5728;&#x7ED9;&#x5B9A;&#x65B9;&#x5411;&#x6269;&#x5C55;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x88AB;&#x4F7F;&#x7528;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x591F;&#x4FDD;&#x6301;&#x6B63;&#x786E;&#x7684;&#x5BF9;&#x9F50;&#x3002;</li>
<li>&#x4E00;&#x4E2A;&#x5355;&#x4E00;&#x7684;&#xFF0C;<code>SCRIPT</code>&#x5143;&#x7D20;&#xFF0C;&#x653E;&#x7F6E;&#x5728;&#x7ED9;&#x5B9A;&#x7684;<code>DIV</code>&#x5143;&#x7D20;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E0A;&#x9762;&#x7B2C;4&#x8282;&#x7684;&#x903B;&#x8F91;&#x3002;&#x8BE5;<code>SCRIPT</code>&#x53EF;&#x80FD;&#x6765;&#x81EA;&#x5916;&#x90E8;&#x6E90;&#xFF0C;&#x6216;&#x8005;&#x53EF;&#x80FD;&#x5B9A;&#x4E49;&#x6210;&#x5185;&#x8054;&#x3002;<br>&#x4F8B;&#x5B50;&#xFF1A;<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">head</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="undefined"> </span><br><span class="line">     BODY { margin:0px; padding:0px } </span><br><span class="line">   </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">head</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">body</span> <span class="attr">scroll</span>=<span class="string">&quot;no&quot;</span>&gt;</span> </span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;sf_align&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:absolute;top:0px;left:0px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sf_el&quot;</span>&gt;</span> </span><br><span class="line">           <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/ext.js&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sf_lib&quot;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line">       <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;/<span class="name">body</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-5-&#x901A;&#x4FE1;&#x673A;&#x5236;&#x7684;&#x7EC6;&#x8282;"><a href="#2-5-&#x901A;&#x4FE1;&#x673A;&#x5236;&#x7684;&#x7EC6;&#x8282;" class="headerlink" title="2.5 &#x901A;&#x4FE1;&#x673A;&#x5236;&#x7684;&#x7EC6;&#x8282;"></a>2.5 &#x901A;&#x4FE1;&#x673A;&#x5236;&#x7684;&#x7EC6;&#x8282;</h3><p>&#x4E3A;&#x4E86;&#x4FC3;&#x8FDB;host&#x548C;SafeFrame&#x5BB9;&#x5668;&#x5185;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x4E4B;&#x95F4;&#x7684;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x5B89;&#x5168;&#x901A;&#x4FE1;&#xFF0C;HTML5&#x7684;<code>postMessage</code>&#x662F;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#x3002;&#x6B64;&#x65B9;&#x6CD5;&#x5141;&#x8BB8;&#x5B9E;&#x65BD;&#x8005;&#xFF0C;&#x4ECE;&#x4E00;&#x4E2A;HTML&#x6587;&#x6863;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x6765;&#x81EA;&#x53E6;&#x4E00;&#x4E2A;&#x5730;&#x65B9;&#x7684;HTML&#x6587;&#x6863;&#xFF0C;&#x4ECE;&#x800C;&#x7ED5;&#x8FC7;&#x201C;&#x540C;&#x6E90;&#x201D;&#x653F;&#x7B56;&#x3002;&#x56E0;&#x4E3A;&#x6D88;&#x606F;&#xFF08;&#x53D1;&#x9001;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x9700;&#x8981;&#x9A8C;&#x8BC1;&#xFF0C;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x65E0;&#x6CD5;&#x8C03;&#x7528;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x8BD5;&#x56FE;&#x6B3A;&#x9A97;Host API&#x505A;&#x4E00;&#x4E9B;&#x9519;&#x8BEF;&#x6216;&#x8005;&#x6076;&#x610F;&#x7684;&#x4E8B;&#x60C5;&#x3002;</p>
<p>&#x6709;&#x5173;W3C&#x540C;&#x6E90;&#x7B56;&#x7565;&#x7684;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x8BBF;&#x95EE;&#xFF1A;<br><a href="http://en.wikipedia.org/wiki/Same_origin_policy" target="_blank" rel="external">http://en.wikipedia.org/wiki/Same_origin_policy</a></p>
<p>&#x6BCF;&#x5F53;&#x4ECE;&#x5BB9;&#x5668;&#x6536;&#x5230;&#x4FE1;&#x606F;&#xFF0C;&#x91C7;&#x53D6;&#x4EE5;&#x4E0B;&#x7684;&#x6B65;&#x9AA4;&#x6765;&#x786E;&#x4FDD;&#x5B83;&#x662F;&#x88AB;&#x5141;&#x8BB8;&#x7684;&#xFF1A;</p>
<ol>
<li><strong>&#x526F;&#x57DF;&#x540D;/&#x68C0;&#x67E5;&#x6765;&#x6E90;</strong><br>&#x4ECE;&#x7B2C;&#x4E09;&#x65B9;HTML&#x5185;&#x5BB9;&#x53D1;&#x6765;&#x7684;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x7684;&#x539F;&#x59CB;&#x57DF;&#xFF0C;&#x5E94;&#x8BE5;&#x4E0E;&#x7528;&#x4E8E;&#x521B;&#x5EFA;SafeFrame&#x5BB9;&#x5668;&#x7684;<code>$sf.host.Config</code>&#x7C7B;&#x7684;<code>renderFile</code>&#x5B57;&#x6BB5;&#x4E2D;&#x4F20;&#x9012;&#x7684;URL&#x7684;&#x57DF;&#x76F8;&#x543B;&#x5408;&#x3002;&#x5982;&#x679C;&#x8D77;&#x6E90;&#x4E0D;&#x543B;&#x5408;&#xFF0C;&#x6D88;&#x606F;&#x5C31;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;</li>
<li>&#x68C0;&#x67E5;GUID<br>&#x4E00;&#x4E2A;GUID&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#xFF0C;SafeFrame&#x5BB9;&#x5668;&#x88AB;&#x6E32;&#x67D3;&#x548C;&#x5E94;&#x8BE5;&#x4E0E;&#x5916;&#x90E8;API&#x4F20;&#x9012;&#x7684;&#x4EFB;&#x4F55;&#x4FE1;&#x606F;&#x5305;&#x542B;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x5F53;&#x63D0;&#x4F9B;&#x7684;GUID&#x4E0D;&#x5B58;&#x5728;&#x6216;&#x8005;&#x672A;&#x77E5;&#x65F6;&#xFF0C;&#x5219;&#x5FFD;&#x7565;&#x8BE5;&#x6D88;&#x606F;&#x3002;</li>
<li>&#x68C0;&#x67E5; HTML window&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;<br>&#x7B2C;&#x4E09;&#x65B9;&#x5BF9;&#x8C61;&#x7684;window&#x5F15;&#x7528;&#x6E90;&#x5E94;&#x8BE5;&#x6307;&#x5411;&#x4E00;&#x4E2A;&#x5F53;SafeFrame&#x88AB;&#x6E32;&#x67D3;&#x65F6;&#x521B;&#x5EFA;&#x7684;iframe&#x7A97;&#x53E3;&#x5F15;&#x7528;&#x3002;&#x5982;&#x679C;&#x5BF9;&#x8C61;&#x7684;&#x7A97;&#x53E3;&#x5F15;&#x7528;&#x548C;&#x5DF2;&#x7ECF;&#x6E32;&#x67D3;&#x7684;&#x4EFB;&#x4F55;&#x5DF2;&#x77E5;&#x7684;SafeFrame&#x5BB9;&#x5668;&#x4E0D;&#x5339;&#x914D;&#xFF0C;&#x5219;&#x8BE5;&#x6D88;&#x606F;&#x88AB;&#x5FFD;&#x7565;&#x3002;</li>
<li>&#x5904;&#x7406;&#x5E8F;&#x5217;&#x6D88;&#x606F;<br>&#x6D88;&#x606F;&#x5728;&#x5148;&#x6765;&#x7684;&#x3001;&#x5148;&#x88AB;&#x53D1;&#x51FA;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x88AB;&#x5904;&#x7406;&#xFF0C;&#x800C;&#x4E14;&#x5E94;&#x8BE5;&#x603B;&#x662F;&#x5C1D;&#x8BD5;&#x8868;&#x793A;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#x7684;&#x54CD;&#x5E94;&#x3002;</li>
</ol>
<h2 id="3-SafeFrame-&#x6807;&#x7B7E;"><a href="#3-SafeFrame-&#x6807;&#x7B7E;" class="headerlink" title="3. SafeFrame &#x6807;&#x7B7E;"></a>3. SafeFrame &#x6807;&#x7B7E;</h2><p>SafeFrame&#x6807;&#x7B7E;&#x7684;&#x9AD8;&#x7EA7;&#x76EE;&#x6807;&#x662F;&#x5C01;&#x88C5;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x4FBF;&#x7F51;&#x7AD9;&#x53EF;&#x4EE5;&#x7BA1;&#x7406;&#x5185;&#x5BB9;&#x7684;&#x6E32;&#x67D3;&#x548C;&#x63A7;&#x5236;&#x3002;&#x4EE5;&#x4E0B;&#x5404;&#x8282;&#x63CF;&#x8FF0;SafeFrame&#x6807;&#x7B7E;&#xFF0C;&#x5982;&#x4F55;&#x6784;&#x5EFA;&#x5B83;&#x4EEC;&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x5904;&#x7406;&#x5B83;&#x4EEC;&#x3002;</p>
<h3 id="3-1-SafeFrame-&#x6807;&#x7B7E;&#x7ED3;&#x6784;-amp-&#x8981;&#x6C42;"><a href="#3-1-SafeFrame-&#x6807;&#x7B7E;&#x7ED3;&#x6784;-amp-&#x8981;&#x6C42;" class="headerlink" title="3.1 SafeFrame &#x6807;&#x7B7E;&#x7ED3;&#x6784;&amp;&#x8981;&#x6C42;"></a>3.1 SafeFrame &#x6807;&#x7B7E;&#x7ED3;&#x6784;&amp;&#x8981;&#x6C42;</h3><p>SafeFrame&#x6807;&#x7B7E;&#x662F;&#x4E00;&#x7EC4;&#x89C4;&#x8303;&#x5316;&#x7684;HTML&#x6807;&#x7B7E;&#x3002;&#x5B83;&#x5FC5;&#x987B;&#x7531;&#x4E0B;&#x5217;&#x5143;&#x7D20;&#x6784;&#x6210;&#xFF1A;</p>
<ul>
<li>&#x4E0E;&#x4E3B;&#x673A;&#x914D;&#x7F6E;&#x5185;&#x8054;&#x63D0;&#x4F9B;&#x7684;&#xFF0C;&#x5305;&#x542B;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x7684;&#x5143;&#x6570;&#x636E;&#x7684;<code>SCRIPT</code>&#x6807;&#x7B7E;&#x3002;</li>
<li>&#x5728;<code>SCRIPT</code>&#x6807;&#x7B7E;&#x4E2D;&#x5904;&#x7406;&#x6570;&#x636E;&#x6807;&#x7B7E;&#x7684;JavaScript</li>
<li>(&#x53EF;&#x9009;)&#x5F53;&#x4E0D;&#x652F;&#x6301;JavaScript&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F7F;&#x7528;&#x5411;&#x4E0B;&#x517C;&#x5BB9;&#x7684;&#x7684;NOSCRIPT&#x6807;&#x7B7E;&#x3002;</li>
<li>(&#x53EF;&#x9009;)&#x6307;&#x5B9A;SafeFrame&#x5BB9;&#x5668;&#x5C06;&#x6E32;&#x67D3;&#x5728;&#x54EA;&#x7684;DIV&#x6807;&#x7B7E;</li>
</ul>
<p>&#x53EA;&#x6709;host&#x80FD;&#x591F;&#x5728;&#x7F51;&#x9875;&#x5185;&#x5BB9;&#x4E2D;&#x63D2;&#x5165;SafeFrame&#x6807;&#x7B7E;&#x3002;&#x5D4C;&#x5957;&#x7684;SafeFrame&#x6807;&#x7B7E;&#x4E0D;&#x88AB;&#x652F;&#x6301;&#x3002;&#x4EFB;&#x4F55;&#x5305;&#x542B;&#x5728;exchanges&#xFF0C;&#x4E2D;&#x4ECB;&#xFF0C;&#x4EE3;&#x7406;&#x6216;&#x4EFB;&#x4F55;&#x5176;&#x5B83;&#x7B2C;&#x4E8C;&#x79CD;&#x53D1;&#x5E03;&#x4F19;&#x4F34;&#x6216;&#x4F9B;&#x5E94;&#x5546;&#x7684;&#x6807;&#x7B7E;&#x4E2D;&#x7684;SafeFrame&#x6807;&#x7B7E;&#x90FD;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4E00;&#x4E2A;SafeFrame&#x6807;&#x7B7E;&#x6E32;&#x67D3;&#x5728;&#x4E00;&#x4E2A;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x7684;SafeFrame&#x5BB9;&#x5668;&#x5185;&#xFF0C;&#x6E32;&#x67D3;&#x8FC7;&#x7A0B;&#x4F1A;&#x5047;&#x5B9A;&#x5BB9;&#x5668;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x5E76;&#x8DF3;&#x8FC7;&#x4EE5;&#x76F4;&#x63A5;&#x6E32;&#x67D3;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x3002;&#x53EA;&#x6709;&#x76F4;&#x63A5;&#x5728;host&#x7684;&#x7F51;&#x9875;&#x4E0A;&#x58F0;&#x660E;&#x7684;SafeFrame&#x5BB9;&#x5668;&#x80FD;&#x591F;&#x786E;&#x4FDD;&#x5185;&#x5BB9;&#x80FD;&#x88AB;&#x6B63;&#x786E;&#x6E32;&#x67D3;&#xFF0C;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#xFF0C;&#x5E76;&#x4E14;API&#x53EF;&#x4EE5;&#x88AB;&#x8BBF;&#x95EE;&#x3002;</p>
<h3 id="3-1-1-SCRIPT&#x6807;&#x7B7E;"><a href="#3-1-1-SCRIPT&#x6807;&#x7B7E;" class="headerlink" title="3.1.1 SCRIPT&#x6807;&#x7B7E;"></a>3.1.1 <code>SCRIPT</code>&#x6807;&#x7B7E;</h3><p><code>SCRIPT</code>&#x6807;&#x7B7E;&#x5FC5;&#x987B;&#x4E13;&#x95E8;&#x6784;&#x5EFA;&#x6210;&#x4E0E;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x5185;&#x5D4C;&#xFF0C;&#x5E76;&#x5305;&#x62EC;&#x6E32;&#x67D3;&#x5728;SafeFrame&#x4E2D;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;&#x6570;&#x636E;&#x6807;&#x7B7E;&#x3002;</p>
<p><code>SCRIPT</code>&#x6807;&#x7B7E;&#x5FC5;&#x987B;&#x5305;&#x62EC;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p>
<ul>
<li>&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x503C;&#x4E3A;<code>iab_sf_data</code>&#x7684;&#x5C5E;&#x6027;&#x7684;&#x7C7B;&#x578B;</li>
<li>type&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A;<code>text/x-safeframe</code></li>
<li><p>JavaScript&#x6216;JSON&#x5F62;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x5B83;&#x4F1A;&#x88AB;&#x8868;&#x73B0;&#x6210;<code>$sf.host.Position</code>&#x548C;<code>$sf.host.PosConfig</code>&#x3002;&#x6B64;&#x7ED3;&#x6784;&#x901A;&#x8FC7;JavaScript&#x5B57;&#x9762;&#x91CF;&#x8BED;&#x6CD5;&#x5B9A;&#x4E49;&#x4E14;&#x53EF;&#x80FD;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x5143;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x4E9B;&#x5143;&#x6570;&#x636E;&#x5C06;&#x88AB;&#x8F6C;&#x6362;&#x6210;<code>$sf.host.PosMeta</code>&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/x-safeframe&apos;</span> <span class="attr">class</span>=<span class="string">&apos;iab_sf_data&apos;</span>&gt;</span><span class="javascript">     </span><br><span class="line">   { </span><br><span class="line">       id: <span class="string">&quot;LREC&quot;</span>, <span class="comment">// ID of position object        </span></span><br><span class="line">       html: <span class="string">&quot;&lt;h1&gt;Hello World&lt;/h1&gt;&quot;</span>, <span class="comment">//3rd party HTML content </span></span><br><span class="line">       conf:  </span><br><span class="line">       { </span><br><span class="line">           size: <span class="string">&quot;300x250&quot;</span> <span class="comment">//The size conf is required and denotes the  </span></span><br><span class="line">       } </span><br><span class="line">       meta: <span class="comment">//optional shared meta information  </span></span><br><span class="line">       { </span><br><span class="line">           rmx:  </span><br><span class="line">            { </span><br><span class="line">               sectionID: <span class="string">&quot;14800347&quot;</span>,  </span><br><span class="line">               siteID: <span class="string">&quot;140509&quot;</span>   </span><br><span class="line">            }  </span><br><span class="line">       }  </span><br><span class="line">   }  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&#x4E0A;&#x8FF0;&#x7684;<code>SCRIPT</code>&#x6807;&#x7B7E;&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x8FD9;&#x6837;&#x7684;&#x539F;&#x56E0;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><strong>type=&#x201D;text/x-safeframe&#x201D; </strong><br>&#x7531;&#x4E8E;&#x8BE5;&#x6570;&#x636E;&#x662F;&#x4E00;&#x4E2A;&#x5185;&#x5D4C;&#x7684;JavaScript&#x7ED3;&#x6784;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x5728;&#x8BED;&#x6CD5;&#x65B9;&#x9762;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x88AB;&#x5F53;&#x4F5C;JavaScript&#x4EE3;&#x7801;&#x53EF;&#x80FD;&#x4F1A;&#x635F;&#x574F;&#x7F51;&#x7AD9;&#x7F51;&#x9875;&#x3002;&#x8BBE;&#x7F6E;&#x811A;&#x672C;&#x7C7B;&#x578B;&#x4E3A;&#x201C;text/ X-SafeFrame&#x201D;&#x786E;&#x4FDD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0D;&#x88AB;&#x6D4F;&#x89C8;&#x5668;&#x7684;JavaScript&#x5F15;&#x64CE;&#x68C0;&#x7D22;&#x5230;&#x3002;</li>
<li><strong>class=&#x201D;sf_data&#x201D;</strong><br>&#x5728;&#x4E00;&#x4E2A;<code>SCRIPT</code>&#x6807;&#x7B7E;&#x4E2D;&#xFF0C;&#x7C7B;&#x5C5E;&#x6027;&#x4E0D;&#x88AB;&#x5904;&#x7406;;&#x7136;&#x800C;&#xFF0C;&#x6307;&#x5B9A;sf_data&#x7C7B;&#x540D;&#x4F7F;SafeFrame &#x7F51;&#x7AD9;API&#x80FD;&#x6807;&#x8BC6;&#x90A3;&#x4E9B;&#x5B83;&#x53EF;&#x4EE5;&#x5F85;&#x4F1A;&#x5904;&#x7406;&#x7684;&#x6570;&#x636E;&#x7684;&#x6807;&#x7B7E;&#x3002;</li>
</ul>
</li>
</ul>
<h3 id="3-1-2-&#x4F7F;&#x7528;JavaScript&#x5904;&#x7406;&#x6570;&#x636E;&#x6807;&#x7B7E;"><a href="#3-1-2-&#x4F7F;&#x7528;JavaScript&#x5904;&#x7406;&#x6570;&#x636E;&#x6807;&#x7B7E;" class="headerlink" title="3.1.2 &#x4F7F;&#x7528;JavaScript&#x5904;&#x7406;&#x6570;&#x636E;&#x6807;&#x7B7E;"></a>3.1.2 &#x4F7F;&#x7528;JavaScript&#x5904;&#x7406;&#x6570;&#x636E;&#x6807;&#x7B7E;</h3><p><code>SCRIPT</code>&#x6807;&#x7B7E;&#x5FC5;&#x987B;&#x5305;&#x542B;&#x5C06;&#x5904;&#x7406;&#xFF08;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#xFF09;&#x6570;&#x636E;&#x6807;&#x7B7E;&#x7684;JavaScript&#x4EE3;&#x7801;&#x3002;&#x7B2C;3.1.2.1&#x8282;&#x81F3;&#x7B2C;3.1.2.3&#x8282;&#x63D0;&#x4F9B;&#x4E86;&#x4EE5;&#x4E09;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5904;&#x7406;&#x6570;&#x636E;&#x6807;&#x7B7E;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<ul>
<li>&#x4F8B;&#x5B50;3.1.2.1&#xFF1A;&#x4E00;&#x6B21;&#x6027;&#x5904;&#x7406;&#x6240;&#x6709;&#x6807;&#x7B7E;</li>
<li>&#x4F8B;&#x5B50;3.1.2.2&#xFF1A;&#x5148;&#x5B9A;&#x4E49;&#x5E93;</li>
<li>&#x4F8B;&#x5B50;3.1.2.3&#xFF1A;&#x4E00;&#x6B21;&#x4E00;&#x4E2A;&#x5730;&#x5904;&#x7406;&#x6807;&#x7B7E;</li>
</ul>
<h4 id="3-1-2-1-&#x4F8B;&#x5B50;&#xFF1A;&#x4E00;&#x6B21;&#x6027;&#x5904;&#x7406;&#x6240;&#x6709;&#x6807;&#x7B7E;"><a href="#3-1-2-1-&#x4F8B;&#x5B50;&#xFF1A;&#x4E00;&#x6B21;&#x6027;&#x5904;&#x7406;&#x6240;&#x6709;&#x6807;&#x7B7E;" class="headerlink" title="3.1.2.1 &#x4F8B;&#x5B50;&#xFF1A;&#x4E00;&#x6B21;&#x6027;&#x5904;&#x7406;&#x6240;&#x6709;&#x6807;&#x7B7E;"></a>3.1.2.1 &#x4F8B;&#x5B50;&#xFF1A;&#x4E00;&#x6B21;&#x6027;&#x5904;&#x7406;&#x6240;&#x6709;&#x6807;&#x7B7E;</h4><p>&#x5F53;&#x6570;&#x636E;&#x6807;&#x7B7E;&#x5305;&#x542B;&#x5728;<code>SCRIPT</code>&#x4E2D;&#x5E76;&#x4E14;&#x5B58;&#x5728;&#x4E0E;SafeFrame host&#x5E93;&#x7684;<code>$sf.host.boot</code>&#x4E4B;&#x524D;&#xFF0C;&#x4E00;&#x65E6;host&#x5E93;&#x88AB;&#x52A0;&#x8F7D;&#x5B8C;&#x6BD5;&#xFF0C;&#x5F15;&#x5BFC;&#x7A0B;&#x5E8F;&#x4F1A;&#x627E;&#x5230;&#x5E76;&#x6E32;&#x67D3;&#x4EE3;&#x7801;&#x4E2D;&#x5728;&#x5F15;&#x5BFC;&#x7A0B;&#x5E8F;&#x4E4B;&#x524D;&#x5217;&#x51FA;&#x7684;&#x6570;&#x636E;&#x6807;&#x7B7E;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x4E2A;&#xFF0C;&#x5728;&#x52A0;&#x8F7D;SafeFrame host&#x5E93;&#x548C;&#x5F15;&#x5BFC;&#x7A0B;&#x5E8F;&#x7684;&#x6307;&#x4EE4;&#x4E4B;&#x524D;&#x7684;SafeFrame&#x7684;&#x6570;&#x636E;&#x6807;&#x7B7E;&#x3002;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">valign</span>=<span class="string">&apos;top&apos;</span>&gt;</span>  </span><br><span class="line">             </span><br><span class="line">            <span class="comment">&lt;!-- SafeFrame Inline Tag 1 --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/x-safeframe&apos;</span> <span class="attr">class</span>=<span class="string">&apos;iab_sf_data&apos;</span>&gt;</span><span class="javascript"> </span><br><span class="line">                {  </span><br><span class="line">                    id: <span class="string">&quot;LREC&quot;</span>,  </span><br><span class="line">                    src:  </span><br><span class="line">                    <span class="string">&quot;http://extserver.com/data-tag&quot;</span>,  </span><br><span class="line">                    conf:  </span><br><span class="line">                    {  </span><br><span class="line">                        w: <span class="number">300</span>,  </span><br><span class="line">                        h: <span class="number">250</span>,  </span><br><span class="line">                        dest: <span class="string">&quot;tgtLREC&quot;</span>  </span><br><span class="line">                    },  </span><br><span class="line">                    meta:  </span><br><span class="line">                    {  </span><br><span class="line">                        rmx:  </span><br><span class="line">                     </span><br><span class="line">                        {  </span><br><span class="line">                            sectionID: <span class="string">&quot;14800347&quot;</span>,  </span><br><span class="line">                            siteID:  <span class="string">&quot;140509&quot;</span>   </span><br><span class="line">                        }  </span><br><span class="line">                    }  </span><br><span class="line">                }  </span><br><span class="line">                </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line">                <span class="comment">&lt;!-- b/c a &quot;dest&quot; tag exists (the overall div container) container tags will be rendered here --&gt;</span>  </span><br><span class="line">             </span><br><span class="line">                <span class="comment">&lt;!-- optional noscript section for fall back --&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>  </span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=  <span class="string">&quot;http://ext.server.com/img.gif&quot;</span>  /&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">valign</span>=<span class="string">&apos;top&apos;</span>&gt;</span>  </span><br><span class="line">             </span><br><span class="line">            <span class="comment">&lt;!-- SafeFrame Inline Tag 2 --&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/x-safeframe&apos;</span> </span><br><span class="line">                <span class="attr">class</span>=<span class="string">&apos;iab_sf_data&apos;</span>&gt;</span><span class="undefined">  </span><br><span class="line">                {  </span><br><span class="line">                    id: &quot;LREC2&quot;,  </span><br><span class="line">                    src: &quot;http://externalserver.com/data-</span><br><span class="line">                    tag&quot;,  </span><br><span class="line">                    conf:  </span><br><span class="line">                    {  </span><br><span class="line">                        w: 300,  </span><br><span class="line">                        h: 250  </span><br><span class="line">                    }  </span><br><span class="line">                }  </span><br><span class="line">                </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- b/c a &quot;dest&quot; tag exists (the overall div container) container tags will be rendered here --&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- optional noscript section for fall back --&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>= <span class="string">&quot;http://ext.server.com/img.gif&quot;</span> /&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span>  </span><br><span class="line"><span class="comment">&lt;!-- SafeFrame Host library / API --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span> <span class="attr">src</span>=<span class="string">&apos;sf-api-boot.js&apos;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="comment">&lt;!-- script code in external file will automatically &apos;boot&apos; and read data tags --&gt;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">#### 3.1.2.2 &#x5728;&#x6570;&#x636E;&#x6807;&#x7B7E;&#x4E4B;&#x524D;&#x5148;&#x5B9A;&#x4E49;SafeFrame host&#x5E93;</span><br><span class="line">&#x5B9E;&#x65BD;&#x4E00;&#x4E2A;SafeFrame&#x6807;&#x7B7E;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#xFF0C;&#x5148;&#x5B9A;&#x4E49;host&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x6807;&#x7B7E;&#xFF0C;&#x6700;&#x540E;&#x663E;&#x5F0F;&#x8C03;&#x7528;`$sf.host.boot`&#x3002;</span><br><span class="line"></span><br><span class="line">&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x6F14;&#x793A;&#x4E86;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x53EF;&#x80FD;&#x662F;&#x5982;&#x4F55;&#x7F16;&#x7801;&#x7684;&#x3002;</span><br><span class="line">``` html</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.example.org/v1/sf-host.js&quot;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line">     </span><br><span class="line">    &lt;!-- SafeFrame Host API configuration --&gt;  </span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span><br><span class="line">        </span>{  </span><br><span class="line">        <span class="keyword">var</span> pubAPI = $sf.hostpub, conf;   </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">handle_start_pos_render</span>(<span class="params">id</span>)  </span><br><span class="line">        </span>{   </span><br><span class="line">         </span><br><span class="line">        }  </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">handle_end_pos_render</span>(<span class="params">id</span>)  </span><br><span class="line">        </span>{ </span><br><span class="line">        }  </span><br><span class="line">        conf = <span class="keyword">new</span> pubAPI.Config( </span><br><span class="line">        {  </span><br><span class="line">            auto: <span class="literal">true</span>,  </span><br><span class="line">            cdn: <span class="string">&quot;http://l.yimg.com&quot;</span>,  </span><br><span class="line">            renderFile: <span class="string">&quot;r.html&quot;</span>,  </span><br><span class="line">            root: <span class="string">&quot;/SafeFrame/v1/html&quot;</span>,  </span><br><span class="line">            ver: <span class="string">&quot;2-3-4&quot;</span>,  </span><br><span class="line">            positions:  </span><br><span class="line">            {  </span><br><span class="line">            <span class="string">&quot;LREC&quot;</span>:  </span><br><span class="line">                {  </span><br><span class="line">                dest:  <span class="string">&quot;tgtLREC&quot;</span>,  </span><br><span class="line">                w: <span class="number">300</span>,  </span><br><span class="line">                h: <span class="number">250</span>  </span><br><span class="line">                }  </span><br><span class="line">            },  </span><br><span class="line">        onStartPosRender: </span><br><span class="line">        handle_start_pos_render,  </span><br><span class="line">        onEndPosRender: handle_end_pos_render  </span><br><span class="line">        });   </span><br><span class="line">    })();  </span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/x-safeframe&apos;</span> <span class="attr">class</span>=<span class="string">&apos;sf_data&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line">    {  </span><br><span class="line">    id: <span class="string">&quot;LREC&quot;</span>,  </span><br><span class="line">    src: </span><br><span class="line">    <span class="string">&quot;http://externalserver.com/data-tag&quot;</span>,  </span><br><span class="line">    meta:  </span><br><span class="line">        {  </span><br><span class="line">        rmx:  </span><br><span class="line">            {  </span><br><span class="line">            sectionID: <span class="string">&quot;14800347&quot;</span>,  </span><br><span class="line">            siteID: <span class="string">&quot;140509&quot;</span>   </span><br><span class="line">            }  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- b/c a &quot;dest&quot; tag exists (the overall div </span><br><span class="line">    container) container tags will be rendered here --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>= <span class="string">&quot;http://ext.server.com/img.gif&quot;</span>  </span><br><span class="line">        /&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="undefined">  </span><br><span class="line">    $sf.host.boot();  </span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-1-2-3-&#x4F34;&#x968F;&#x7740;&#x81EA;&#x52A8;&#x5F15;&#x5BFC;&#x7684;&#x5144;&#x5F1F;&#x6807;&#x7B7E;&#x7684;SafeFrame&#x6570;&#x636E;&#x6807;&#x7B7E;"><a href="#3-1-2-3-&#x4F34;&#x968F;&#x7740;&#x81EA;&#x52A8;&#x5F15;&#x5BFC;&#x7684;&#x5144;&#x5F1F;&#x6807;&#x7B7E;&#x7684;SafeFrame&#x6570;&#x636E;&#x6807;&#x7B7E;" class="headerlink" title="3.1.2.3 &#x4F34;&#x968F;&#x7740;&#x81EA;&#x52A8;&#x5F15;&#x5BFC;&#x7684;&#x5144;&#x5F1F;&#x6807;&#x7B7E;&#x7684;SafeFrame&#x6570;&#x636E;&#x6807;&#x7B7E;"></a>3.1.2.3 &#x4F34;&#x968F;&#x7740;&#x81EA;&#x52A8;&#x5F15;&#x5BFC;&#x7684;&#x5144;&#x5F1F;&#x6807;&#x7B7E;&#x7684;SafeFrame&#x6570;&#x636E;&#x6807;&#x7B7E;</h4><p>&#x5728;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x63D0;&#x4EA4;&#x7684;&#x6570;&#x636E;&#x53D8;&#x91CF;&#x4F34;&#x968F;&#x7740;&#x4E00;&#x4E2A;&#x8C03;&#x7528;<code>$sf.host.boot</code>&#x4EE5;&#x52A0;&#x8F7D;&#x4EE3;&#x7801;&#x4E2D;&#x5728;&#x5176;&#x4E0A;&#x5217;&#x51FA;&#x7684;&#x6807;&#x7B7E;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x6807;&#x7B7E;&#x3002;<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">valign</span>=<span class="string">&apos;top&apos;</span>&gt;</span>  </span><br><span class="line"><span class="comment">&lt;!-- SafeFrame Inline Tag 1 --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/x-safeframe&apos;</span> </span><br><span class="line">    <span class="attr">class</span>=<span class="string">&apos;sf_data&apos;</span>&gt;</span><span class="undefined">  </span><br><span class="line">    {  </span><br><span class="line">    id: &quot;LREC&quot;,  </span><br><span class="line">    src: </span><br><span class="line">    &quot;http://externalserver.com/da</span><br><span class="line">    ta-tag&quot;,  </span><br><span class="line">    conf:  </span><br><span class="line">        {  </span><br><span class="line">        w: 300,  </span><br><span class="line">        h: 250,  </span><br><span class="line">        dest: &quot;tgtLREC&quot;  </span><br><span class="line">        },  </span><br><span class="line">    meta:  </span><br><span class="line">        {  </span><br><span class="line">        rmx:  </span><br><span class="line">        {  </span><br><span class="line">            sectionID: </span><br><span class="line">            &quot;14800347&quot;,  </span><br><span class="line">            siteID: &quot;140509&quot;   </span><br><span class="line">        }  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- b/c a &quot;dest&quot; tag exists (the overall </span><br><span class="line">    div container) container tags will be </span><br><span class="line">    rendered here --&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- optional noscript section for fall </span><br><span class="line">    back --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>= <span class="string">&quot;http://ext.server.com/img.gif&quot;</span> /&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{  </span><br><span class="line">        <span class="keyword">var</span> w = <span class="built_in">window</span>, s = w[<span class="string">&quot;$sf&quot;</span>], </span><br><span class="line">        b = s &amp;&amp; s.boot;  </span><br><span class="line">        <span class="keyword">if</span> (!s) s = w[<span class="string">&quot;$sf&quot;</span>] = {};  </span><br><span class="line">        <span class="keyword">if</span> (b &amp;&amp; <span class="keyword">typeof</span> b == </span><br><span class="line">        <span class="string">&quot;function&quot;</span>) {  </span><br><span class="line">        <span class="keyword">try</span> { b(); } <span class="keyword">catch</span> (e) </span><br><span class="line">        { }  </span><br><span class="line">        } <span class="keyword">else</span> {  </span><br><span class="line">        <span class="built_in">document</span>.write(<span class="string">&quot;&lt;scr&quot;</span>,<span class="string">&quot;ipt type=&apos;text/javascript&apos; src=&apos;sf-host.js&apos;&gt;&lt;/scr&quot;</span>,<span class="string">&quot;ipt&gt;&quot;</span>)</span><br><span class="line">        ;  </span><br><span class="line">        }  </span><br><span class="line">    })();  </span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- Above script code will only load in </span><br><span class="line">    host library one time, call boot for each </span><br><span class="line">    tag --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">valign</span>=<span class="string">&apos;top&apos;</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- SafeFrame Inline Tag 2 --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/x-safeframe&apos;</span> </span><br><span class="line">    <span class="attr">class</span>=<span class="string">&apos;sf_data&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line">    {  </span><br><span class="line">    id: <span class="string">&quot;LREC2&quot;</span>,  </span><br><span class="line">    src: </span><br><span class="line">    <span class="string">&quot;http://externalserver.com/data-tag&quot;</span>,  </span><br><span class="line">    conf:  </span><br><span class="line">    {  </span><br><span class="line">        w: <span class="number">300</span>,  </span><br><span class="line">        h: <span class="number">250</span>  </span><br><span class="line">    }  </span><br><span class="line">    }  </span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- b/c a &quot;dest&quot; tag exists (the overall div </span><br><span class="line">    container) container tags will be rendered here </span><br><span class="line">    --&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- optional noscript section for fall back --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>= <span class="string">&quot;http://ext.server.com/img.gif&quot;</span> /&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span>  </span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{  </span><br><span class="line">        <span class="keyword">var</span> w = <span class="built_in">window</span>, s = w[<span class="string">&quot;$sf&quot;</span>], </span><br><span class="line">        b = s &amp;&amp; s.boot;  </span><br><span class="line">        <span class="keyword">if</span> (!s) s = w[<span class="string">&quot;$sf&quot;</span>] = {};  </span><br><span class="line">        <span class="keyword">if</span> (b &amp;&amp; <span class="keyword">typeof</span> b == <span class="string">&quot;function&quot;</span>) {   </span><br><span class="line">        <span class="keyword">try</span> { b(); } <span class="keyword">catch</span> (e) </span><br><span class="line">        { }  </span><br><span class="line">        } <span class="keyword">else</span> {  </span><br><span class="line">        <span class="built_in">document</span>.write(<span class="string">&quot;&lt;scr&quot;</span>,<span class="string">&quot;ipt type=&apos;text/javascript&apos; src=&apos;sf-host.js&apos;&gt;&lt;/scr&quot;</span>,<span class="string">&quot;ipt&gt;&quot;</span>);  </span><br><span class="line">        }  </span><br><span class="line">    })();  </span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line">    <span class="comment">&lt;!-- Above script code will only load in host library one time, call boot for each tag --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="4-&#x7F51;&#x7AD9;API&#x5B9E;&#x65BD;&#x7EC6;&#x5219;"><a href="#4-&#x7F51;&#x7AD9;API&#x5B9E;&#x65BD;&#x7EC6;&#x5219;" class="headerlink" title="4. &#x7F51;&#x7AD9;API&#x5B9E;&#x65BD;&#x7EC6;&#x5219;"></a>4. &#x7F51;&#x7AD9;API&#x5B9E;&#x65BD;&#x7EC6;&#x5219;</h2><p>SafeFrame&#x7F51;&#x7AD9;API&#x4F7F;&#x7528;&#x7B2C;4.1&#x8282;&#x81F3;&#x7B2C;4.11&#x8282;&#x5230;&#x5B9A;&#x4E49;&#x7684;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x51FD;&#x6570;&#xFF0C;&#x548C;&#x7C7B;&#x3002;</p>
<h3 id="4-1-&#x547D;&#x540D;&#x7A7A;&#x95F4;-sf-host"><a href="#4-1-&#x547D;&#x540D;&#x7A7A;&#x95F4;-sf-host" class="headerlink" title="4.1 &#x547D;&#x540D;&#x7A7A;&#x95F4;$sf.host"></a>4.1 &#x547D;&#x540D;&#x7A7A;&#x95F4;<code>$sf.host</code></h3><p>&#x6B64;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x7528;&#x6765;&#x5B9A;&#x4E49;&#x7F51;&#x7AD9;&#x7F51;&#x9875;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x4E0E;SafeFrame&#x5BB9;&#x5668;&#x4EA4;&#x4E92;&#x7684;JavaScript&#x7C7B;&#xFF0C;&#x5BF9;&#x8C61;&#x548C;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x5728;<code>$sf.host</code>&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x662F;SafeFrame&#x914D;&#x7F6E;&#xFF0C;&#x6E32;&#x67D3;&#xFF0C;&#x68C0;&#x67E5;&#xFF0C;&#x5E76;&#x4E0E;SafeFrame&#x5BB9;&#x5668;&#x4E92;&#x52A8;&#x7684;SafeFrame&#x8D77;&#x59CB;&#x70B9;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x7A7A;&#x95F4;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x5207;&#x90FD;&#x662F;&#x516C;&#x5F00;&#xFF0C;&#x9664;&#x975E;&#x53E6;&#x5916;&#x63D0;&#x53CA;&#x3002;</p>
<h3 id="4-2-&#x547D;&#x540D;&#x7A7A;&#x95F4;-sf-host-conf"><a href="#4-2-&#x547D;&#x540D;&#x7A7A;&#x95F4;-sf-host-conf" class="headerlink" title="4.2 &#x547D;&#x540D;&#x7A7A;&#x95F4;$sf.host.conf"></a>4.2 &#x547D;&#x540D;&#x7A7A;&#x95F4;<code>$sf.host.conf</code></h3><p>&#x6307;&#x5B9A;<code>host.conf</code>&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x5185;&#x8054;&#x5C06;&#x5141;&#x8BB8;SafeFrame&#x5BB9;&#x5668;&#xFF08;&#x5305;&#x62EC;SafeFrame&#x6807;&#x7B7E;&#xFF09;&#x4E0E;&#x4F60;&#x6307;&#x5B9A;&#x7684;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x88AB;&#x52A0;&#x8F7D;&#xFF08;&#x6216;&#x5F15;&#x5BFC;&#xFF09;&#x3002;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x662F;<code>$sf.host.Config</code>&#x5BF9;&#x8C61;&#x7684;&#x5B57;&#x9762;&#x7248;&#x672C;&#x3002;</p>
<p><strong>&#x76F8;&#x5173;&#x7AE0;&#x8282;</strong></p>
<ul>
<li>3 SafeFrame&#x6807;&#x7B7E;</li>
<li>4.4 &#x7C7B; <code>$sf.host.Config</code></li>
</ul>
<p><strong>&#x4F8B;&#x5B50;1</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">    </span><br><span class="line"> </span><br><span class="line"><span class="comment">//JavaScript inline host config, used mainly for SafeFrame tags which want to auto boot the SafeFrame host API and render 3rd party content.    </span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], pub = sf &amp;&amp; sf.host;   </span><br><span class="line"><span class="keyword">if</span> (!sf) sf = w[<span class="string">&quot;$sf&quot;</span>] = {};  </span><br><span class="line"><span class="keyword">if</span> (!pub) pub = sf.host = {};   </span><br><span class="line"> </span><br><span class="line">host.conf  =  </span><br><span class="line">{  </span><br><span class="line">    debug:    <span class="literal">true</span>,  </span><br><span class="line">    ver:    <span class="string">&quot;2-3-4&quot;</span>,  </span><br><span class="line">    positions:  </span><br><span class="line">{  </span><br><span class="line">    LREC:  </span><br><span class="line">    {  </span><br><span class="line">        id:   <span class="string">&quot;LREC&quot;</span>,  </span><br><span class="line">        dest:  <span class="string">&quot;tgtLREC&quot;</span>,  </span><br><span class="line">        tgt:  <span class="string">&quot;_self&quot;</span>,  </span><br><span class="line">        w:  <span class="number">300</span>,  </span><br><span class="line">        h:  <span class="number">250</span>    </span><br><span class="line">    }  </span><br><span class="line">}  </span><br><span class="line">};      </span><br><span class="line"> </span><br><span class="line"><span class="comment">//Assuming a SafeFrame tag is placed below this configuration, it will read the config defined and use those values as the logic for the tag.  </span></span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>&#x4F8B;&#x5B50;2</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SafeFrame Inline Tag --&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tgtLREC&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/x-safeframe&apos;</span> <span class="attr">class</span>=<span class="string">&apos;sf_data&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line">{  </span><br><span class="line">id:    <span class="string">&quot;LREC&quot;</span>,  </span><br><span class="line">src:<span class="string">&quot;http://ext.server.com/sf&quot;</span>,   </span><br><span class="line">conf:  </span><br><span class="line">{  </span><br><span class="line">    dest:  <span class="string">&quot;tgtLREC&quot;</span>,  </span><br><span class="line">    size:  <span class="string">&quot;300x250&quot;</span>  </span><br><span class="line">},   </span><br><span class="line"> </span><br><span class="line">meta:  </span><br><span class="line">{    </span><br><span class="line">    rmx:  </span><br><span class="line">    {  </span><br><span class="line">        sectionID:  <span class="string">&quot;14800347&quot;</span>,  </span><br><span class="line">        siteID:  <span class="string">&quot;140509&quot;</span>   </span><br><span class="line">    }  </span><br><span class="line">}    </span><br><span class="line">}    </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line"><span class="keyword">try</span> {  </span><br><span class="line">    $sf.host.boot();  </span><br><span class="line">} <span class="keyword">catch</span> (e) {  }  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-3-&#x547D;&#x540D;&#x7A7A;&#x95F4;-sf-info"><a href="#4-3-&#x547D;&#x540D;&#x7A7A;&#x95F4;-sf-info" class="headerlink" title="4.3 &#x547D;&#x540D;&#x7A7A;&#x95F4;$sf.info"></a>4.3 &#x547D;&#x540D;&#x7A7A;&#x95F4;<code>$sf.info</code></h3><p>&#x8BE5;&#x4FE1;&#x606F;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x88AB;&#x4FDD;&#x7559;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x6709;&#x5173;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
<ul>
<li><code>&lt;static&gt; {Array} $sf.info.errs</code><br>&#x5305;&#x542B;&#x6709;&#x5173;&#x53D1;&#x751F;&#x5728;SafeFrame API&#x7684;&#x7F51;&#x7AD9;&#x7AEF;&#x7684;&#x4EFB;&#x4F55;&#x9519;&#x8BEF;&#x4FE1;&#x606F;;&#x7EC6;&#x8282;&#x662F;<strong>&#x53EA;&#x8BFB;</strong>&#x7684;&#x3002;</li>
<li><code>&lt;static&gt; {Array} $sf.info.list</code><br>&#x5305;&#x542B;&#x4E86;&#x5173;&#x4E8E;&#x6BCF;&#x4E2A;SafeFrame&#x7684;&#x5BB9;&#x5668;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8981;&#x4E48;&#x662F;&#x8981;&#x6E32;&#x67D3;&#x7684;&#xFF0C;&#x6E32;&#x67D3;&#xFF0C;&#x8981;&#x4E48;&#x662F;&#x6B63;&#x5728;&#x5904;&#x7406;&#x7684;;&#x7EC6;&#x8282;&#x662F;<strong>&#x53EA;&#x8BFB;</strong>&#x7684;&#x3002;</li>
</ul>
<p>&#x65E0;&#x8BBA;&#x4F55;&#x65F6;SafeFrame&#x7F51;&#x7AD9;API&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x5B83;&#x4F1A;&#x9002;&#x5F53;&#x5730;&#x66F4;&#x65B0;&#x8FD9;&#x4E9B;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x5B57;&#x6BB5;&#xFF0C;&#x5141;&#x8BB8;&#x68C0;&#x67E5;&#x548C;/&#x6216;&#x8C03;&#x8BD5;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x3002;</p>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">   </span><br><span class="line"> </span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{   </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], pub = sf &amp;&amp; sf.host, Config = pub </span><br><span class="line">    &amp;&amp; host.Config,    </span><br><span class="line">     </span><br><span class="line">    CONF_CDN   = <span class="string">&quot;http://l.yimg.com&quot;</span>,  </span><br><span class="line">    CONF_ROOT   = <span class="string">&quot;/sf&quot;</span>,  </span><br><span class="line">    CONF_VER  = <span class="string">&quot;2-3-4&quot;</span>,  </span><br><span class="line">    CONF_RFILE  = <span class="string">&quot;/html/render.html&quot;</span>,  </span><br><span class="line">    CONF_TO  = <span class="number">30</span>;   </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on_endposrender</span>(<span class="params">posID, success</span>)  </span><br><span class="line">    </span>{  </span><br><span class="line">    <span class="comment">//a render action success  </span></span><br><span class="line">    }   </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on_posmsg</span>(<span class="params">posID, msg, data</span>)  </span><br><span class="line">    </span>{  </span><br><span class="line">    <span class="comment">//listen for messages </span></span><br><span class="line">    }  </span><br><span class="line">     </span><br><span class="line">    w.render_content  = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span><br><span class="line">    </span>{  </span><br><span class="line">    <span class="keyword">var</span> conf, posConf, pos,confDesc;   </span><br><span class="line">     </span><br><span class="line">    <span class="keyword">if</span> (Config) {  </span><br><span class="line">    conf = Config();  </span><br><span class="line">    <span class="keyword">if</span> (!conf) {  </span><br><span class="line">    confDesc  =  </span><br><span class="line">    {  </span><br><span class="line">    debug:       <span class="literal">true</span>,  </span><br><span class="line">    cdn:        CONF_CDN,  </span><br><span class="line">    root:       CONF_ROOT,    </span><br><span class="line">    ver:        CONF_VER,  </span><br><span class="line">    renderFile:      CONF_RFILE,   </span><br><span class="line">    &#xA9; <span class="number">2014</span> Interactive Advertising Bureau  <span class="number">36</span>  SafeFrame_v1<span class="number">.1</span> </span><br><span class="line">    to:        CONF_TO  </span><br><span class="line">    onEndPosRender:    on_endposrender,  </span><br><span class="line">    onPosMsg:      on_posmsg  </span><br><span class="line">    };  </span><br><span class="line">    conf = <span class="keyword">new</span> Config(confDesc);  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">if</span> (conf) {  </span><br><span class="line">    posConf = <span class="keyword">new</span> host.PosConfig(<span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;tgtLREC&quot;</span>);  </span><br><span class="line">    posConf.w  = <span class="number">300</span>;  </span><br><span class="line">    posConf.h  = <span class="number">250</span>;  </span><br><span class="line">    posConf.z  = <span class="number">1000</span>;  </span><br><span class="line">    pos    = <span class="keyword">new</span> host.Position(<span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;&lt;h1&gt;Hello World I&apos;m an Ad&lt;h1&gt;&quot;</span>,<span class="literal">null</span>,posConf);  </span><br><span class="line">    host.render(pos);  </span><br><span class="line">    }  </span><br><span class="line">    }  </span><br><span class="line">    }   </span><br><span class="line">    w.remove_content  = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span><br><span class="line">    </span>{  </span><br><span class="line">    <span class="keyword">var</span> skipID = <span class="string">&quot;LREC&quot;</span>,  <span class="comment">// we want to skip the LREC position, </span></span><br><span class="line">    and leave it <span class="keyword">in</span> the page  </span><br><span class="line">    list   = $sf.info.list,  </span><br><span class="line">    cnt     = list.length,  </span><br><span class="line">    to_rem = [],  </span><br><span class="line">    idx     = <span class="number">0</span>,  </span><br><span class="line">    pos;   </span><br><span class="line">    <span class="keyword">while</span> (cnt--)  </span><br><span class="line">    {  </span><br><span class="line">    pos = list[idx++];  <span class="comment">//$sf.host.Position  </span></span><br><span class="line">    <span class="keyword">if</span> (pos.id == skipID) <span class="keyword">continue</span>;  </span><br><span class="line">    to_rem.push(pos.id);  </span><br><span class="line">    }  </span><br><span class="line">    $host.nuke(to_rem); } <span class="comment">//remove all but the LREC position; </span></span><br><span class="line">})();  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-4-&#x7C7B;-sf-host-Config"><a href="#4-4-&#x7C7B;-sf-host-Config" class="headerlink" title="4.4 &#x7C7B;$sf.host.Config"></a>4.4 &#x7C7B;<code>$sf.host.Config</code></h3><p><code>$sf.host.Config(conf)</code><br>&#x7F51;&#x7AD9;&#x914D;&#x7F6E;&#x7C7B;&#x662F;&#x7528;&#x6765;&#x63CF;&#x8FF0;&#x4E86;SafeFrame &#x7F51;&#x7AD9;API&#x7684;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x7684;&#x3002;&#x8BE5;&#x7C7B;&#x914D;&#x7F6E;&#x7F51;&#x7AD9;&#x4F7F;&#x7528;&#x7684;&#x6574;&#x4F53;&#x529F;&#x80FD;&#x548C;&#x8BBE;&#x7F6E;&#x3002;</p>
<blockquote>
<p> <strong>&#x7F51;&#x7AD9;&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br> &#x7F51;&#x7AD9;&#x7C7B;<code>$sf.host.Config</code>&#x53EA;&#x5E94;&#x5728;&#x7684;SafeFrame&#x7F51;&#x7AD9;API&#x4E2D;&#x5B58;&#x5728;&#x4E00;&#x6B21;&#xFF0C;&#x5E76;&#x5E94;&#x5728;SafeFrame&#x5BB9;&#x5668;&#x5904;&#x4E8E;&#x975E;&#x6D3B;&#x52A8;&#x72B6;&#x6001;&#x7684;&#x65F6;&#x5019;&#x88AB;&#x6784;&#x9020;&#x6765;&#x542F;&#x52A8;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x3002;<br>&#x5F53;&#x6784;&#x5EFA;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x5148;&#x524D;&#x5B9A;&#x4E49;&#x7684;&#x8BDD;&#xFF0C;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x5C06;&#x5199;&#x5165;&#x5185;&#x5D4C;<code>$sf.host.conf</code>&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4E2D;&#x3002;</p>
</blockquote>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x521D;&#x59CB;&#x53C2;&#x6570;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x73B0;&#x6709;&#x914D;&#x7F6E;&#x3002;&#x5982;&#x679C;&#x8FD4;&#x56DE;&#x503C;&#x4E3A;null&#xFF0C;&#x5219;&#x4E0D;&#x5B58;&#x5728;&#x6709;&#x6548;&#x7684;&#x914D;&#x7F6E;&#x3002;</p>
<p>&#x5F53;<code>$sf.host.Config</code>&#x88AB;&#x6784;&#x9020;&#xFF0C;&#x5176;&#x4ED6;SafeFrame&#x7F51;&#x7AD9;&#x7C7B;&#x4ECE;&#x5F97;&#x5230;&#x7684;&#x914D;&#x7F6E;&#x8BFB;&#x53D6;&#xFF0C;&#x4EE5;&#x786E;&#x5B9A;&#x5BB9;&#x5668;&#x7684;&#x6E32;&#x67D3;&#x65B9;&#x5F0F;&#x3002;&#x5982;&#x679C;&#x5148;&#x524D;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#xFF0C;&#x4EFB;&#x4F55;&#x6240;&#x5F97;&#x7684;&#x503C;&#x4F1A;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x5185;&#x8054;<code>$sf.host.conf</code>&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4E2D;&#x3002;<br><strong>&#x53C2;&#x6570;</strong></p>
<ul>
<li><code>{Object} conf</code><br>A list of key value pairs to use for the configuration. </li>
</ul>
<p><strong>&#x5B57;&#x6BB5;</strong><br>&#x4EE5;&#x4E0B;&#x5B57;&#x6BB5;&#x53EF;&#x4EE5;&#x5728;<code>conf</code>&#x53C2;&#x6570;&#x4E2D;&#x8FD4;&#x56DE;&#xFF1A;</p>
<ul>
<li><code>{String}</code> <strong>conf.cdn</strong><br>Host of the CDN used to fetch SafeFrame resources. This value should always be a different domain than your web page<br>&#x3000;Sample value: <code>&quot;http://l.yimg.com&quot;</code></li>
<li><code>{String}</code> <strong>conf.ver</strong><br>The version number of the SafeFrame to be used, provided in the format [number]-[number]-[number].<br>&#x3000;Sample value: `&#x201D;2-3-4&#x201D;</li>
<li><code>{String}</code> <strong>conf.renderFile</strong><br>The partial path and filename of the file from the cdn property that is used as the base document for external party content to be rendered using the SafeFrame. </li>
<li><code>{String}</code> <strong>conf.hostFile</strong><br>The URL string to the Host-side JavaScript file to be used. </li>
<li><code>{String}</code> <strong>extFile</strong><br>The URL string to the External Party-side JavaScript file to be used. </li>
<li><code>{String}</code> <strong>bootFile</strong><br>The URL string to the External Party-side JaveScript file to be used for bootstrapping the SafeFrames library, processing SafeFrames tags, and rendering content. </li>
<li><code>{Number}</code> <strong>conf.to</strong><br>The maximum amount of time (in seconds) that a render process can take before the operation can be aborted.<br>Rendering the external party content in a SafeFrame container is an asynchronous process, which is done by rendering an x-domain iframe tag. This number defines the maximum amount of time that the render operation can spend in the &#x201C;loading&#x201D; state before a time-out error is generated.<br>&#x3000; Sample value: <code>30</code> </li>
<li><code>{Object}</code> <strong>conf.positions</strong><br>An object defining literal representations of <code>$sf.host.PosConfig</code> objects, keyed by id, to be used to configure each position in the page  </li>
<li><code>{Boolean}</code> <strong>conf.auto</strong> <em>(Optional)</em><br>Whether or not automatic bootstrapping and rendering of SafeFrame tags should occur. Default is true. If set to false, SafeFrame tags will just add to the <code>$sf.info object</code>. </li>
<li><code>{String}</code> <strong>conf.msgFile</strong> <em>(Optional)</em><br>The partial path and filename of the file from the cdn property that is used to as a proxy for x-domain communication. Only required for older browsers that do not support HTML 5. </li>
<li>`{Boolean} conf.debug<em>* </em>(Optional)*<br>Whether or not to run the SDK in debug mode, which will also use un-minified JS code, separated files, etc. </li>
</ul>
<p><strong>&#x4E8B;&#x4EF6;</strong></p>
<ul>
<li><code>onBeforePosMsg(id, msgName, data)</code><br>A function that gets called each time a position sends a request for some functionality. Returning true cancels the command request.<br><strong>&#x53C2;&#x6570;: </strong><br>&#x3000;<code>{String}</code> <strong>id</strong><br>&#x3000;The id of the position that has started its render process<br>&#x3000;<code>{String}</code> <strong>msgName</strong><br>&#x3000;The type of message being sent<br>&#x3000;<code>{String}</code> <strong>data</strong> <em>(Optional)</em><br>&#x3000;Data that gets passed through </li>
<li><code>onEndPosRender(id)</code><br>A  function which gets called each time a position has finished rendering<br><strong>&#x53C2;&#x6570;: </strong><br>&#x3000;<code>{String}</code> <strong>id</strong><br>&#x3000; The id of the position that has started its render process </li>
<li><code>onFailure(id)</code><br>A  function which gets called anytime a render call has failed or timed out<br><strong>&#x53C2;&#x6570;: </strong><br>&#x3000; <code>{String}</code> <strong>id</strong><br>&#x3000; The id of the position that has started its render process </li>
<li><code>onPosMsg(id, msgName, data)</code><br>A callback function which gets called each time a position sends a message up to your web page<br><strong>&#x53C2;&#x6570;: </strong><br>&#x3000; <code>{String}</code> <strong>id</strong><br>&#x3000; The id of the position that has started its render process<br>&#x3000; <code>{String}</code> <strong>msgName</strong><br>&#x3000;The name / type of message being sent<br>&#x3000;<code>{String}</code> <strong>data</strong> <em>(Optional)</em><br>&#x3000;Data that gets passed through </li>
<li><code>onStartPosRender(id)</code><br>A callback function which gets called each time a position is about to be rendered<br><strong>&#x53C2;&#x6570;: </strong><br>&#x3000; <code>{String}</code> <strong>id</strong><br>&#x3000;The id of the position that has started its render process </li>
<li><code>onSuccess(id)</code><br>A callback function which gets called anytime a render call has successfully completed.<br><strong>&#x53C2;&#x6570;: </strong><br>&#x3000;<code>{String}</code> <strong>id</strong><br>&#x3000; The id of the position that has started its render process</li>
</ul>
<p><strong>&#x76F8;&#x5173;&#x7AE0;&#x8282;</strong>: </p>
<ul>
<li>4.2 &#x547D;&#x540D;&#x7A7A;&#x95F4; <code>$sf.host.conf</code></li>
<li>4.5 &#x7C7B; <code>$sf.host.PosConfig</code> </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line"> </span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{     </span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], pub = sf &amp;&amp; sf.host, Config = pub </span><br><span class="line">    &amp;&amp; host.Config,    </span><br><span class="line">     </span><br><span class="line">    CONF_CDN   = <span class="string">&quot;http://l.yimg.com&quot;</span>,    </span><br><span class="line">    CONF_ROOT   = <span class="string">&quot;/sf&quot;</span>,    </span><br><span class="line">    CONF_VER  = <span class="string">&quot;2-3-4&quot;</span>,    </span><br><span class="line">    CONF_RFILE  = <span class="string">&quot;/html/render.html&quot;</span>,    </span><br><span class="line">    CONF_TO    = <span class="number">30</span>;     </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on_endposrender</span>(<span class="params">posID, success</span>)    </span><br><span class="line">    </span>{      </span><br><span class="line">    <span class="comment">//a render action success    </span></span><br><span class="line">    }     </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on_posmsg</span>(<span class="params">posID, msg, data</span>)    </span><br><span class="line">    </span>{        </span><br><span class="line">    <span class="comment">//listen for messages    </span></span><br><span class="line">    }     </span><br><span class="line">     </span><br><span class="line">    w.init_SafeFrame  = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)    </span><br><span class="line">     </span><br><span class="line">    </span>{        </span><br><span class="line">    <span class="keyword">var</span> conf, confDesc;       </span><br><span class="line">     </span><br><span class="line">    <span class="keyword">if</span> (Config) {        </span><br><span class="line">        conf = Config();       </span><br><span class="line">        <span class="keyword">if</span> (!conf) {          </span><br><span class="line">            confDesc  =          </span><br><span class="line">            {            </span><br><span class="line">                debug:       <span class="literal">true</span>, </span><br><span class="line">                cdn:        CONF_CDN,  </span><br><span class="line">                root:       CONF_ROOT,  </span><br><span class="line">                ver:        CONF_VER,  </span><br><span class="line">                renderFile:      CONF_RFILE,  </span><br><span class="line">                to:        CONF_TO  </span><br><span class="line">                onEndPosRender:    on_endposrender,  </span><br><span class="line">                onPosMsg:      on_posmsg,  </span><br><span class="line">                positions:            </span><br><span class="line">                {  </span><br><span class="line">                    <span class="string">&quot;LREC&quot;</span>:  </span><br><span class="line">                    {  </span><br><span class="line">                    id:    <span class="string">&quot;LREC&quot;</span>,  </span><br><span class="line">                    w:    <span class="number">300</span>,  </span><br><span class="line">                    h:    <span class="number">250</span>,  </span><br><span class="line">                    z:    <span class="number">1000</span>,  </span><br><span class="line">                    dest:  <span class="string">&quot;tgtLREC&quot;</span>  </span><br><span class="line">                    }  </span><br><span class="line">                }  </span><br><span class="line">            };  </span><br><span class="line">            conf = <span class="keyword">new</span> Config(confDesc);  </span><br><span class="line">            <span class="keyword">if</span> (conf) {  </span><br><span class="line">                alert(<span class="string">&quot;SafeFrame Host Config successful&quot;</span>);  </span><br><span class="line">            }  </span><br><span class="line">        }  </span><br><span class="line">    }    </span><br><span class="line">    }   </span><br><span class="line">})();  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-5-&#x7C7B;-sf-host-PosConfig"><a href="#4-5-&#x7C7B;-sf-host-PosConfig" class="headerlink" title="4.5 &#x7C7B;$sf.host.PosConfig"></a>4.5 &#x7C7B;<code>$sf.host.PosConfig</code></h3><p><strong>$sf.host.PosConfig</strong><code>(posIDorObj, destID, baseConf)</code></p>
<p>&#x4F4D;&#x7F6E;&#x914D;&#x7F6E;&#x7C7B;&#x63CF;&#x8FF0;&#x4E86;&#x4E00;&#x4E2A;<code>$sf.host.Position</code>&#x5BF9;&#x8C61;&#x5E94;&#x8BE5;&#x5982;&#x4F55;&#x88AB;&#x6E32;&#x67D3;&#x3002;&#x6BCF;&#x4E2A;&#x552F;&#x4E00;ID&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;<code>PosConfig</code>&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x5B58;&#x5728;&#x3002;&#x5982;&#x679C;&#x591A;&#x4E8E;&#x4E00;&#x4E2A;<code>PosConfig</code>&#x5BF9;&#x8C61;&#x7531;&#x76F8;&#x540C;&#x7684;ID&#x5EFA;&#x9020;&#xFF0C;&#x539F;&#x6765;&#x7684;PosConfig&#x7684;&#x521D;&#x59CB;&#x503C;&#x5C06;&#x88AB;&#x8986;&#x76D6;&#x3002;&#x7F51;&#x7AD9;&#x4E3B;&#x673A;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7279;&#x5F81;&#x7684;&#x591A;&#x4E2A;&#x5E7F;&#x544A;&#x4F4D;&#xFF08;&#x5373;&#x4E24;&#x4E2A;&#x552F;&#x4E00;&#x7684;LREC&#xFF09;;&#x4ED6;&#x4EEC;&#x53EA;&#x662F;&#x9700;&#x8981;&#x6709;&#x4E0D;&#x540C;&#x7684;ID&#xFF08;&#x5373;LREC1&#x548C;LREC2&#xFF09;</p>
<p>&#x7C7B;&#x7ED3;&#x6784;&#x53EF;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#xFF0C;&#x5176;&#x4E2D;&#xFF0C;&#x5728;&#x5185;&#x90E8;&#xFF0C;&#x6784;&#x6210;&#x7684;&#x6240;&#x6709;&#x5B9E;&#x4F8B;&#x90FD;&#x88AB;&#x76D1;&#x89C6;&#xFF0C;&#x4EE5;&#x4FBF;&#x81EA;&#x52A8;&#x8FDE;&#x63A5;&#x6574;&#x4F53;&#x914D;&#x7F6E;&#x9009;&#x9879;&#x548C;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x53D1;&#x751F;&#x3002;</p>
<p><strong>&#x53C2;&#x6570;&#xFF1A;</strong></p>
<ul>
<li><code>{String|Object}</code> <strong>posIDorObj</strong><br>If this value is provided as a string, then it is used as the id property of the instance. If the value is returned as an object, then it is a descriptor that populates the properties of the instance. </li>
<li><code>{String}</code> <strong>destID</strong><br>The HTML element ID attribute string into which the content is to be rendered. </li>
<li><code>{Object}</code> <strong>baseConf</strong>,<em>(Optional)</em><br>An optional object that defines a representation of an <code>$sf.host.Config</code> object and is used in cases where no initial Host configuration was pre-defined. This option enables a shortcut for automatic host configuration if necessary and is usually used in conjunction with SafeFrame tags. If specified when a Host configuration already exists, this parameter is ignored. </li>
</ul>
<p><strong>&#x5B57;&#x6BB5;</strong></p>
<ul>
<li><code>bg</code><br>The background color to be used inside the safe frame. Default value is &#x201C;transparent&#x201D;. </li>
<li><code>css</code><br>Style-sheet text or a URI to a CSS file that defines additional CSS to be used inside the SafeFrame iframe. Default value is &#x201C;&#x201D;. </li>
<li><code>dest</code><br>The HTML element ID into which the content is to be rendered. </li>
<li><code>H</code><br>The height (in pixels) of the SafeFrame iframe to be created for the content specified.  </li>
<li><code>id</code><br>A unique identifier for the position or content. Used to link the <code>$sf.host.Position</code> object with a configuration. Specifying the id as &#x201C;DEFAULT&#x201D; means that this configuration will be used as the default values for other <code>$sf.Position</code> objects created. </li>
<li><code>size</code><br>A string representing the width and height (in pixels) of the safe frame to be created for the content specified. Setting this value also sets the w and h properties respectively Example: <code>&quot;300x250&quot;</code> </li>
<li><code>tgt</code><br>The target window name for where hyperlink clicks should be routed to unless otherwise specified. Default value is &#x201C;_blank&#x201D;. If a URL is provided, it opens in a new window. The values &#x201C;_self&#x201D; and &#x201C;_parent&#x201D; are NOT allowed and if provided the value &#x201C;_top&#x201D; is used instead. </li>
<li><code>w</code><br>The width (in pixels) of the SafeFrame iframe to be created for the content specified. </li>
<li><code>z</code><br>The z-index value to be used for the SafeFrame iframe. </li>
<li><code>supports</code><br>An object identifying the features that the host supports relative to the content specified.  </li>
</ul>
<p><strong>&#x65B9;&#x6CD5;</strong></p>
<ul>
<li><code>toString()</code><br>A method that serializes the position into a string using query-string encoded syntax. </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br> <code>//See $sf.host.Config example</code></p>
<h3 id="4-6-&#x7C7B;-sf-host-Position"><a href="#4-6-&#x7C7B;-sf-host-Position" class="headerlink" title="4.6 &#x7C7B;$sf.host.Position"></a>4.6 &#x7C7B;<code>$sf.host.Position</code></h3><p><code>**$sf.host.Position**(posIDorObj, html, meta, config)</code></p>
<p>&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x5728;&#x4E00;&#x4E2A;&#x5B89;&#x5168;&#x7684;&#x6846;&#x67B6;&#x4E2D;&#x6E32;&#x67D3;&#x7684;HTML&#x5185;&#x5BB9;&#x7684;&#x7C7B;&#x3002;</p>
<p><strong>&#x53C2;&#x6570;</strong></p>
<ul>
<li><code>{String|Object}</code> <strong>posIDorObj</strong><br>REQUIRED, if is a string, used as the id property of the instance. If is an object, it is used as a descriptor to fill out the properties of the instance. </li>
<li><code>{String}</code> <strong>html</strong><br>REQUIRED, the string content to be rendered into the safe frame described by this instance </li>
<li><code>{Object}</code> <strong>meta Optional</strong><br>An object with key/value pairs defining customizable metadata about the position </li>
<li><code>{Object}</code> <strong>config Optional</strong><br>An object representing position config overrides </li>
</ul>
<p><strong>&#x5B57;&#x6BB5;</strong></p>
<ul>
<li><code>{Object}</code> <strong>config</strong><br>Config information defines how SafeFrame renders a position. This object can override values already set in the associated config. </li>
<li><code>{String}</code> <strong>html</strong><br>The HTML content to be rendered inside the safe frame, or a URL to HTML content returned that is returned using a SCRIPT tag. </li>
<li><code>{String}</code> <strong>id</strong><br>A unique identifier for the position. If present, this value is used to lookup a<br><code>$sf.host.PosConfig</code> object. </li>
<li><code>{Object}</code> <strong>meta</strong><br>Metadata information in the form of an object of any number, combination key, or value pairs to store host or content-related metadata. </li>
<li><code>{String}</code> <strong>src</strong><br>A URI to be used as a SCRIPT tag that renders the contents in the SafeFrame. Setting this value changes the value of the HTML property and is used mostly for short-hand purposes.<br>The purpose of this field is to enable content to be fetched when the HTML content is no readily available. Setting this property creates an HTTP request for content to the URI specified. Because the URI provided is in a SCRIPT context, content must be returned in JavaScript form. This process prevents the creation of other iframes that would otherwise damage the system because content within any created iframes is denied access to the external content API.<br>The URI provided may contain MACRO place holders that SafeFrame will populate. This feature can be used to gather information from a Web browser that can be passed in the HTTP request and is useful for cases when retrieved content requires information about the Web browser environment only available to the host.<br>SafeFrame populates the following values:<br>&#x3000;- <code>{String} ${sf_ver}</code><br>&#x3000;The string representation of the current version of SafeFrame<br>&#x3000;- <code>{Number} ${ck_on}</code><br>&#x3000;Indicates whether cookies are enabled on the browser: 1 for true, 0 for false.<br>&#x3000;- <code>{String} ${flash_ver}</code><br>&#x3000;Identifies which version of Flash is enabled in the browser. If Flash is not detected, the value is set to 0.</li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">define_content</span>(<span class="params"></span>) </span><br><span class="line"></span>{ </span><br><span class="line"><span class="keyword">var</span> pub = $sf.host, PosConfig = host.PosConfig, PosMeta = host.PosMeta, </span><br><span class="line">Pos = host.Position, pos, posConf, posMeta; </span><br><span class="line"> </span><br><span class="line">  posConf   = <span class="keyword">new</span> PosConfig(<span class="string">&quot;LREC&quot;</span>, <span class="string">&quot;tgtLREC&quot;</span>); </span><br><span class="line">  posConf.w   = <span class="number">300</span>; </span><br><span class="line">  posConf.h  = <span class="number">250</span>; </span><br><span class="line">  posConf.z  = <span class="number">1000</span>; </span><br><span class="line"> </span><br><span class="line">posMeta    = <span class="keyword">new</span> PosMeta({<span class="string">&quot;context&quot;</span>:<span class="string">&quot;Music&quot;</span>}); </span><br><span class="line"> </span><br><span class="line">  <span class="comment">//a shared meta object will now contain </span></span><br><span class="line">  <span class="comment">//  context:   &quot;Music&quot; </span></span><br><span class="line">  <span class="comment">//  sf_ver:   &quot;1-0-1&quot;, </span></span><br><span class="line">  <span class="comment">//  flash_ver:  11 </span></span><br><span class="line"> </span><br><span class="line">  pos     = <span class="keyword">new</span> Pos(<span class="string">&quot;LREC&quot;</span>, </span><br><span class="line"><span class="string">&quot;http://getsomeads.com?pos=LREC&amp;f=${flash_ver}&amp;sf=${sf_ver}&quot;</span>, posMeta, </span><br><span class="line">posConf); </span><br><span class="line">  <span class="comment">//note that the ${flash_ver} and ${sf_ver} macros will get filled out </span></span><br><span class="line">automatically </span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="comment">//so if flash 11 is installed, and we are using SafeFrame version 1 </span></span><br><span class="line">  <span class="comment">//the URI for the script tag created will be </span></span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="comment">// &quot;http://getsomeads.com?pos=LREC&amp;f=11&amp;sf=1-0-1&quot; </span></span><br><span class="line"> </span><br><span class="line">  host.render(pos);</span><br></pre></td></tr></table></figure></p>
<p><strong>&#x65B9;&#x6CD5;</strong></p>
<ul>
<li><code>toString()</code><br>A method that serializes the position into a string using query-string encoded syntax </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">   </span><br><span class="line"> </span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{  </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], pub = sf &amp;&amp; sf.host, Config = pub </span><br><span class="line">    &amp;&amp; host.Config,   </span><br><span class="line">     </span><br><span class="line">    CONF_CDN   = <span class="string">&quot;http://l.yimg.com&quot;</span>,  </span><br><span class="line">    CONF_ROOT   = <span class="string">&quot;/sf&quot;</span>,  </span><br><span class="line">    CONF_VER  = <span class="string">&quot;2-3-4&quot;</span>,  </span><br><span class="line">    CONF_RFILE  = <span class="string">&quot;/html/render.html&quot;</span>,  </span><br><span class="line">    CONF_TO    = <span class="number">30</span>;   </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on_endposrender</span>(<span class="params">posID, success</span>)  </span><br><span class="line">    </span>{  </span><br><span class="line">    <span class="comment">//a render action success  </span></span><br><span class="line">    }   </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on_posmsg</span>(<span class="params">posID, msg, data</span>)  </span><br><span class="line">    </span>{  </span><br><span class="line">     <span class="comment">//listen for messages  </span></span><br><span class="line">    }     </span><br><span class="line">     </span><br><span class="line">    w.init_render  = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span><br><span class="line">    </span>{  </span><br><span class="line">     <span class="keyword">var</span> conf, confDesc, posConf, pos;      </span><br><span class="line">     </span><br><span class="line">    <span class="keyword">if</span> (Config) {  </span><br><span class="line">        conf = Config();  </span><br><span class="line">        <span class="keyword">if</span> (!conf) {  </span><br><span class="line">            confDesc  =  </span><br><span class="line">            {          </span><br><span class="line">                debug:       <span class="literal">true</span>,  </span><br><span class="line">                cdn:        CONF_CDN,  </span><br><span class="line">                root:       CONF_ROOT,  </span><br><span class="line">                ver:        CONF_VER,  </span><br><span class="line">                renderFile:      CONF_RFILE,  </span><br><span class="line">                to:        CONF_TO  </span><br><span class="line">                onEndPosRender:    on_endposrender,  </span><br><span class="line">                onPosMsg:      on_posmsg  </span><br><span class="line">            };          </span><br><span class="line">            conf = <span class="keyword">new</span> Config(confDesc);  </span><br><span class="line">            <span class="keyword">if</span> (conf) {  </span><br><span class="line">                posConf    = <span class="keyword">new</span> </span><br><span class="line">                host.PosConfig(<span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;tgtLREC&quot;</span>);  </span><br><span class="line">                posConf.w  = <span class="number">300</span>;  </span><br><span class="line">                posConf.h  = <span class="number">250</span>;  </span><br><span class="line">                posConf.z  = <span class="number">1000</span>;    </span><br><span class="line">                pos    = <span class="keyword">new</span> </span><br><span class="line">                host.Position(<span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;&lt;h1&gt;Hello World, I&apos;m an Ad&lt;/h1&gt;&quot;</span>);  </span><br><span class="line">                <span class="comment">//note that b/c you constructed a </span></span><br><span class="line">                PosConfig object already <span class="keyword">with</span> an id <span class="keyword">of</span> </span><br><span class="line">                <span class="string">&quot;LREC&quot;</span>, the configuration will be </span><br><span class="line">                grabbed   </span><br><span class="line">                 </span><br><span class="line">                host.render(pos);  </span><br><span class="line">            }        </span><br><span class="line">        }      </span><br><span class="line">    }    </span><br><span class="line">    }   </span><br><span class="line">})();  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-7-&#x7C7B;-sf-host-PosMeta"><a href="#4-7-&#x7C7B;-sf-host-PosMeta" class="headerlink" title="4.7 &#x7C7B;$sf.host.PosMeta"></a>4.7 &#x7C7B;<code>$sf.host.PosMeta</code></h3><p><strong>$sf.host.PosMeta</strong><code>(shared_obj, ownerKey, obj)</code><br>&#x6B64;&#x7C7B;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;&#x5143;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x88AB;&#x5171;&#x4EAB;&#xFF0C;&#x6216;&#x952E;&#x5165;&#xFF0C;&#x5230;&#x7279;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x6240;&#x6709;&#x8005;&#xFF08;&#x5982;&#x679C;&#x9700;&#x8981;&#x7684;&#x8BDD;&#xFF0C;&#x5141;&#x8BB8;&#x9690;&#x85CF;&#xFF09;&#x3002;&#x6B64;&#x5BF9;&#x8C61;&#x4E2D;&#x5B58;&#x50A8;&#x7684;&#x503C;&#xFF0C;&#x4E0D;&#x80FD;&#x6539;&#x53D8;;&#x88AB;&#x6784;&#x9020;&#x5B8C;&#x65F6;&#xFF0C;&#x4ED6;&#x4EEC;&#x624D;&#x53EF;&#x4EE5;&#x88AB;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E14;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#x3002;&#x5178;&#x578B;&#x5730;&#x5B58;&#x50A8;&#x5728;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x6570;&#x636E;&#x7528;&#x4E8E;&#x4E13;&#x6709;&#x7528;&#x9014;&#x3002;</p>
<p>&#x5F53;&#x4E00;&#x4E2A;SafeFrame&#x5BB9;&#x5668;&#x88AB;&#x6784;&#x9020;&#x548C;&#x6E32;&#x67D3;&#xFF0C;&#x8FD9;&#x91CC;&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;&#x5C06;&#x63D0;&#x4F9B;&#x7ED9;&#x5916;&#x90E8;&#x65B9;API&#x3002;&#x5728;&#x67D0;&#x4E9B;&#x5143;&#x6570;&#x636E;&#x9700;&#x8981;&#x88AB;&#x4FDD;&#x62A4;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5171;&#x4EAB;&#x548C;&#x975E;&#x5171;&#x4EAB;&#x5185;&#x90E8;&#x5BF9;&#x8C61;&#x88AB;&#x521B;&#x5EFA;&#x3002;&#x4F8B;&#x5982;&#xFF0C;<code>ownerKey</code>&#x5C5E;&#x6027;&#x53EF;&#x80FD;&#x662F;&#x4ECE;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x751F;&#x6210;&#x7684;&#x7B7E;&#x540D;&#x3002;</p>
<p>&#x5728;SafeFrame&#x7684;&#x5BB9;&#x5668;&#x5185;&#xFF0C;&#x51FD;&#x6570;&#x7528;&#x4E8E;&#x8BBF;&#x95EE;&#x5143;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x5916;&#x90E8;&#x5404;&#x65B9;&#x4E0D;&#x80FD;&#x7528;&#x8FED;&#x4EE3;&#x53D1;&#x73B0;&#x5B83;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7528;&#x4F5C;<code>ownerKey</code>&#x7684;&#x7B7E;&#x540D;&#x53EF;&#x4EE5;&#x5728;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#x88AB;&#x7528;&#x6765;&#x8BBF;&#x95EE;&#x5B83;&#xFF0C;&#x4E14;&#x53EA;&#x5141;&#x8BB8;&#x5411;&#x53EF;&#x4FE1;&#x65B9;&#x8BBF;&#x95EE;&#x3002;</p>
<p>&#x6BCF;&#x5F53;<code>$sf.host.PosMeta</code>&#x5BF9;&#x8C61;&#x88AB;&#x521B;&#x5EFA;&#x4E86;&#xFF0C;&#x4EE5;&#x4E0B;&#x4FE1;&#x606F;&#x4F1A;&#x603B;&#x662F;&#x9ED8;&#x8BA4;&#x5728;&#x201D;&#x5171;&#x4EAB;&#x201D;&#x90E8;&#x5206;&#x4E2D;&#x51FA;&#x73B0;&#x3002;</p>
<ul>
<li><code>{String} sf_ver</code><br>The string representation of the current version of SafeFrame </li>
<li><code>{Number} ck_on</code><br>Identified whether cookies are enabled on the browser: 1 for true, 0 for false. </li>
<li><p><code>{String} flash_ver</code><br>Identifies which version of Flash is enabled in the browser. If Flash is not detected, the value is set to 0. </p>
<p>&#x6211;&#x4EEC;&#x4E5F;&#x770B;&#x770B;<code>$sf.host.Position</code>&#x7684;&#x201D;src&#x201D;&#x5C5E;&#x6027;&#x3002;&#x5F53;<code>PosMeta</code>&#x5BF9;&#x8C61;&#x88AB;&#x6784;&#x9020;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x4E3A;&#x4E86;&#x4F5C;&#x4E3A;&#x5B8F;&#x89C2;&#x5B57;&#x6BB5;&#x7684;&#x201D;src&#x201D;&#x5C5E;&#x6027;&#x5728;URL&#x4E0A;&#x81EA;&#x52A8;&#x88AB;&#x4F20;&#x9012;&#xFF0C;&#x4E0A;&#x8FF0;&#x7684;&#x503C;&#x88AB;&#x5B9A;&#x4E49;&#x3002;</p>
</li>
</ul>
<p><strong>&#x53C2;&#x6570;&#xFF1A;</strong></p>
<ul>
<li><code>{Object}</code> <strong>shared_obj</strong> <em>(Optional)</em><br>An object containing key /value pairs for shared metadata </li>
<li><code>{String}</code> <strong>ownerKey</strong> <em>(Optional)</em><br>A key name to identify the owner or a particular set of metadata. </li>
<li><code>{Object}</code> <strong>obj</strong> <em>(Optional)</em><br>An object containing the key value pairs of metadata<br>&#x6B32;&#x77E5;&#x5173;&#x4E8E;&#x4F20;&#x9012;&#x5143;&#x6570;&#x636E;&#x7684;&#x8BE6;&#x60C5;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x76F8;&#x5173;&#x7684;&#x51FD;&#x6570;<code>$sf.ext.meta</code>&#x3002; </li>
</ul>
<p><strong>&#x65B9;&#x6CD5;</strong></p>
<ul>
<li><code>{String|Number|Boolean}</code> <strong>value</strong><code>(propKey, ownerKey)</code><br>A method retrieves a metadata value from this object.<br>&#x65B9;&#x6CD5;&#x53C2;&#x6570;: </li>
<li><code>{String}</code> <strong>propKey</strong><br>The name of the value to retrieve </li>
<li><code>{String}</code> <strong>ownerKey</strong> (Optional)<br>The name of the owner key of the metadata value. By default, it is assumed to be shared, so nothing needs to be passed in unless looking for a specific proprietary value </li>
</ul>
<p><strong>&#x8FD4;&#x56DE;:</strong> </p>
<ul>
<li><code>{String|Number|Boolean}</code> </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Host Side tags --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], pub = sf &amp;&amp; sf.host, Config = pub &amp;&amp; </span><br><span class="line">host.Config, conf, posConf, posMeta, shared, non_shared, pos; </span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (Config) { </span><br><span class="line"> </span><br><span class="line">  conf = Config(); </span><br><span class="line"><span class="keyword">if</span> (!conf) conf = <span class="keyword">new</span> </span><br><span class="line">Config({debug:<span class="literal">true</span>,cdn:<span class="string">&quot;http://l.yimg.com&quot;</span>,root:<span class="string">&quot;/sf&quot;</span>,</span><br><span class="line">    ver:<span class="string">&quot;2-3-4&quot;</span>,renderFile:<span class="string">&quot;/html/render.html&quot;</span>,to:<span class="number">30</span>}) </span><br><span class="line">  <span class="keyword">if</span> (conf) { </span><br><span class="line">    posConf    = <span class="keyword">new</span> host.PosConfig(<span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;tgtLREC&quot;</span>); </span><br><span class="line">    posConf.w  = <span class="number">300</span>; </span><br><span class="line">    posConf.h  = <span class="number">250</span>; </span><br><span class="line">    posConf.z  = <span class="number">1000</span>; </span><br><span class="line">    shared   = {<span class="string">&quot;context&quot;</span>: <span class="string">&quot;Music&quot;</span>}; </span><br><span class="line">    non_shared = {spaceID: <span class="number">90900909090</span>, adID: <span class="number">3423423432423</span>}; </span><br><span class="line">    posMeta  = <span class="keyword">new</span> host.PosMeta(shared,<span class="string">&quot;y&quot;</span>,non_shared); </span><br><span class="line">    <span class="comment">//Use a signature for a key name (instead of &quot;y&quot;), </span></span><br><span class="line">    <span class="comment">//if you don&apos;t want 3rd parties accessing this data  </span></span><br><span class="line">    pos    = <span class="keyword">new</span> host.Position(<span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;&lt;Hello World I&apos;m an Ad&gt;&quot;</span>,posMeta,posConf); </span><br><span class="line">    host.render(pos); </span><br><span class="line">  } </span><br><span class="line">} </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- External Party tag --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], ext = sf &amp;&amp; sf.ext, cntxt = ext &amp;&amp; </span><br><span class="line">ext.meta(<span class="string">&quot;context&quot;</span>), yspaceID = ext &amp;&amp; ext.meta(<span class="string">&quot;spaceID&quot;</span>,<span class="string">&quot;y&quot;</span>); </span><br><span class="line"> </span><br><span class="line">alert(cntxt); <span class="comment">//will say Music; </span></span><br><span class="line"> </span><br><span class="line">alert(yspaceID); <span class="comment">//will say 90900909090 </span></span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-8-&#x51FD;&#x6570;-sf-host-boot"><a href="#4-8-&#x51FD;&#x6570;-sf-host-boot" class="headerlink" title="4.8 &#x51FD;&#x6570; $sf.host.boot"></a>4.8 &#x51FD;&#x6570; <code>$sf.host.boot</code></h3><p>boot&#x51FD;&#x6570;&#x7528;&#x4E8E;&#x67E5;&#x627E;&#xFF0C;&#x5904;&#x7406;&#x548C;&#x81EA;&#x52A8;&#x6E32;&#x67D3;&#x6570;&#x636E;&#x7684;&#x6807;&#x7B7E;&#x3002;&#x5B83;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x54CD;&#x5E94;&#x662F;&#x5426;&#x5DF2;&#x53D1;&#x73B0;&#x4EFB;&#x4F55;&#x65B0;&#x7684;&#xFF0C;&#x672A;&#x7ECF;&#x52A0;&#x5DE5;&#x7684;&#x9879;&#x3002;&#x4E00;&#x65E6;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5C06;&#x6240;&#x5F97;&#x7684;SafeFrame&#x6570;&#x636E;&#x88AB;&#x6DFB;&#x52A0;&#x5230;<code>$sf.info</code>&#x3002;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x81EA;&#x52A8;&#x5B57;&#x6BB5;&#x5728;<code>$sf.host.config</code>&#x7C7B;&#x4E2D;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;true&#xFF0C;boot&#x51FD;&#x6570;&#x542F;&#x52A8;&#x5728;&#x6570;&#x636E;&#x5B9A;&#x4E49;&#x7684;&#x5185;&#x5BB9;&#x7684;&#x6E32;&#x67D3;&#x8FC7;&#x7A0B;&#x3002;</p>
<p><strong>&#x8FD4;&#x56DE;&#x503C;</strong> </p>
<ul>
<li><code>{Boolean}</code><br>Indicates whether any new, unprocessed items have been found </li>
</ul>
<p><strong>&#x76F8;&#x5173;&#x7AE0;&#x8282;</strong></p>
<ul>
<li>3   SafeFrame&#x6807;&#x7B7E;</li>
<li>4.3 &#x547D;&#x540D;&#x7A7A;&#x95F4;<code>$sf.info</code> </li>
<li>4.2 &#x547D;&#x540D;&#x7A7A;&#x95F4;<code>$sf.host.conf</code> </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SafeFrame Inline Tag --&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tgtLREC&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/x-safeframe&apos;</span> <span class="attr">class</span>=<span class="string">&apos;sf_data&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line">{  </span><br><span class="line">    id: <span class="string">&quot;LREC&quot;</span>,  </span><br><span class="line">    src: <span class="string">&quot;http://secondarydomain.com/safeframe&quot;</span>,   </span><br><span class="line">    conf:  </span><br><span class="line">    {    </span><br><span class="line">    dest: <span class="string">&quot;tgtLREC&quot;</span>,  </span><br><span class="line">    size: <span class="string">&quot;300x250&quot;</span>  </span><br><span class="line">    }   </span><br><span class="line">    meta:  </span><br><span class="line">    {    </span><br><span class="line">        rmx:  </span><br><span class="line">        {  </span><br><span class="line">            sectionID:<span class="string">&quot;14800347&quot;</span>,   </span><br><span class="line">            siteID: <span class="string">&quot;140509&quot;</span>   </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">}  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line"><span class="keyword">try</span> {  </span><br><span class="line">$sf.host.boot();  </span><br><span class="line">} <span class="keyword">catch</span> (e) {  }  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-9-&#x51FD;&#x6570;-sf-host-status"><a href="#4-9-&#x51FD;&#x6570;-sf-host-status" class="headerlink" title="4.9 &#x51FD;&#x6570;$sf.host.status"></a>4.9 &#x51FD;&#x6570;<code>$sf.host.status</code></h3><p>status&#x51FD;&#x6570;&#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x4F4D;&#x7F6E;&#x7684;&#x72B6;&#x6001;&#x3002;&#x5B83;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6307;&#x793A;&#x9875;&#x9762;&#x4E2D;&#x7684;&#x662F;&#x5426;&#x6709;&#x4EFB;&#x4F55;&#x4F4D;&#x7F6E;&#x5F53;&#x524D;&#x5728;&#x6240;&#x6E32;&#x67D3;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6216;&#x8005;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E9B;&#x5176;&#x5B83;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x8BF8;&#x5982;&#x6269;&#x5C55;&#xFF0C;&#x6B63;&#x5728;&#x53D1;&#x751F;&#x7684;&#x5E03;&#x5C14;&#x503C;&#x54CD;&#x5E94;&#x3002;<br><strong>&#x53C2;&#x6570;</strong></p>
<ul>
<li><code>{Object} positions</code><br>&#x53EF;&#x9009;&#x7684;&#x5BF9;&#x8C61;&#x53C2;&#x6570;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x53EF;&#x7531;&#xFF0C;&#x4EE3;&#x8868;&#x6BCF;&#x4E2A;SafeFrame&#x6B63;&#x5728;&#x7BA1;&#x7406;&#x7684;$sf.host.Position&#x5BF9;&#x8C61;&#xFF08;&#x4F7F;&#x7528;&#x5176;ID&#x5C5E;&#x6027;&#xFF09;&#x7684;&#x5BC6;&#x94A5;&#x5217;&#x8868;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x586B;&#x5145;&#x3002;&#x6BCF;&#x4E2A;&#x952E;&#x7684;&#x503C;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6709;&#x4E00;&#x4E2A;&#x4EE3;&#x8868;&#x5BB9;&#x5668;&#x7684;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x7684;&#x72B6;&#x6001;&#x4EE3;&#x7801;&#x4E32;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5728;&#x6B64;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x53EF;&#x80FD;&#x503C;&#x5982;&#x4E0B;&#xFF1A;<br>&#x3000;&#x2022;  ready: the container is available for rendering but has not yet been rendered<br>&#x3000;&#x2022;  loading: the container is currently in the process of being rendered<br>&#x3000;&#x2022;  expanding: the container is currently in the process of expanding<br>&#x3000;&#x2022;  expanded: the container is currently in expanded state<br>&#x3000;&#x2022;  collapsing: the container is currently in the process of collapsing<br>&#x3000;&#x2022;  error: the container has experienced an error that is preventing any interaction </li>
</ul>
<p><strong>&#x8FD4;&#x56DE;&#x503C;</strong></p>
<ul>
<li><code>{Boolean}</code><br>Indicates whether or not the SafeFrame SDK is busy with an operation where the configuration cannot be updated </li>
</ul>
<p><strong>&#x76F8;&#x5173;&#x7AE0;&#x8282;</strong></p>
<ul>
<li>5.1  &#x547D;&#x540D;&#x7A7A;&#x95F4;<code>$sf.ext</code> </li>
<li>5.7  &#x51FD;&#x6570;<code>$sf.ext.status</code> </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">   </span><br><span class="line"><span class="keyword">var</span> posDetail = {};  </span><br><span class="line"><span class="keyword">var</span> isBusy    = $sf.host.status(posDetail);  </span><br><span class="line"><span class="keyword">var</span> posID    = <span class="string">&quot;&quot;</span>;  </span><br><span class="line"><span class="keyword">var</span> posInfo, posInfoStatus, posInfoDesc, posIDProc;    </span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (isBusy) {  </span><br><span class="line"><span class="comment">//Cannot change configuration while operations are ongoing, </span></span><br><span class="line">inspect object to determine what is going on   </span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> (posID <span class="keyword">in</span> posDetail)  </span><br><span class="line">{  </span><br><span class="line">    posInfo = posDetail[posID];  </span><br><span class="line">    <span class="comment">//object has &quot;status&quot;, &quot;id&quot;, and &quot;desc&quot; properties   </span></span><br><span class="line">     </span><br><span class="line">    posInfoStatus = posInfo.status;  </span><br><span class="line">    <span class="keyword">switch</span> (posInfoStatus)  </span><br><span class="line">    {  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;expanding&quot;</span>:  </span><br><span class="line">        posIDProc = posID;  </span><br><span class="line">        <span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;collapsing&quot;</span>:  </span><br><span class="line">        posIDProc = posID;  </span><br><span class="line">        <span class="keyword">break</span>;  </span><br><span class="line">    }  </span><br><span class="line">    <span class="keyword">if</span> (posIDProc) <span class="keyword">break</span>;  </span><br><span class="line">}   </span><br><span class="line"><span class="keyword">if</span> (posIDProc) alert(posIDProc + <span class="string">&quot;, is &quot;</span> + posInfoStatus);  </span><br><span class="line">}  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-10-&#x51FD;&#x6570;-sf-host-nuke"><a href="#4-10-&#x51FD;&#x6570;-sf-host-nuke" class="headerlink" title="4.10 &#x51FD;&#x6570;$sf.host.nuke"></a>4.10 &#x51FD;&#x6570;<code>$sf.host.nuke</code></h3><p>nuke&#x51FD;&#x6570;&#x7528;&#x4E8E;&#x4ECE;&#x9875;&#x9762;&#x53BB;&#x9664;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x5373;&#x4F7F;&#x4E92;&#x52A8;&#x6B63;&#x5728;&#x5BA1;&#x7406;&#x6216;&#x6B63;&#x5728;&#x53D1;&#x751F;&#xFF0C;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x4E5F;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#xFF0C;&#x4E14;&#x5C06;&#x4E2D;&#x6B62;&#x672A;&#x5B8C;&#x6210;&#x7684;&#x64CD;&#x4F5C;&#x6216;&#x6E32;&#x67D3;&#x3002;</p>
<p>nuke&#x51FD;&#x6570;&#x88AB;&#x63D0;&#x4F9B;&#x4EE5;&#x8FC1;&#x5C31;SafeFrame&#x5BB9;&#x5668;&#x4F4D;&#x7F6E;&#x4E0D;&#x80FD;&#x5BB9;&#x6613;&#x5730;&#x5728;&#x5E38;&#x89C4;&#x60C5;&#x51B5;&#x4E0B;&#x9664;&#x53BB;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x4F8B;&#x5982;&#xFF0C;nuke&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x88AB;&#x7528;&#x6765;&#x53BB;&#x9664;&#x5728;&#x4E0D;&#x5177;&#x6709;&#x53EF;&#x4EE5;&#x50CF;&#x5B83;&#x5728;Web&#x6D4F;&#x89C8;&#x5668;&#x90A3;&#x6837;&#x88AB;&#x5173;&#x95ED;&#x7684;&#x7F51;&#x9875;&#x7684;&#x672C;&#x673A;&#x5E94;&#x7528;&#x4E2D;&#x7684;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>
<p>Nuke&#x4E0D;&#x9700;&#x8981;&#x628A;&#x65B0;&#x7684;&#x5185;&#x5BB9;&#x52A0;&#x8F7D;&#x5230;&#x73B0;&#x6709;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x6E32;&#x67D3;&#x51FD;&#x6570;&#x4F1A;&#x5904;&#x7406;&#x8BBE;&#x7F6E;&#x65B0;&#x7684;&#x5185;&#x5BB9;&#x4F4D;&#x7F6E;&#x3002;</p>
<p><strong>&#x53C2;&#x6570;</strong></p>
<ul>
<li><code>{String|String[]}</code> <strong>id</strong><br>The id of the position to be removed; use &#x201C;*&#x201D; to remove all positions. </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">   </span><br><span class="line"> </span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{   </span><br><span class="line"><span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], pub = sf &amp;&amp; sf.host, Config = pub </span><br><span class="line">&amp;&amp; host.Config,   </span><br><span class="line"> </span><br><span class="line">CONF_CDN   = <span class="string">&quot;http://l.yimg.com&quot;</span>,  </span><br><span class="line">CONF_ROOT   = <span class="string">&quot;/sf&quot;</span>,  </span><br><span class="line">CONF_VER  = <span class="string">&quot;2-3-4&quot;</span>,  </span><br><span class="line">CONF_RFILE  = <span class="string">&quot;/html/render.html&quot;</span>,  </span><br><span class="line">CONF_TO  = <span class="number">30</span>;   </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">on_endposrender</span>(<span class="params">posID, success</span>)  </span><br><span class="line"></span>{  </span><br><span class="line"><span class="comment">//a render action total failure  </span></span><br><span class="line">} </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">on_posmsg</span>(<span class="params">posID, msg, data</span>) </span><br><span class="line"></span>{  </span><br><span class="line"><span class="comment">//listen for messages  </span></span><br><span class="line">}   </span><br><span class="line">w.render_content  = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span><br><span class="line"></span>{  </span><br><span class="line">    <span class="keyword">var</span> conf, posConf, pos,confDesc;   </span><br><span class="line">     </span><br><span class="line">    <span class="keyword">if</span> (Config) {  </span><br><span class="line">        conf = Config();  </span><br><span class="line">        <span class="keyword">if</span> (!conf) {  </span><br><span class="line">        confDesc  =  </span><br><span class="line">        {  </span><br><span class="line">        debug: <span class="literal">true</span>,  </span><br><span class="line">        cdn:    CONF_CDN,  </span><br><span class="line">        root:    CONF_ROOT,  </span><br><span class="line">        ver:    CONF_VER,  </span><br><span class="line">        renderFile:  CONF_RFILE,  </span><br><span class="line">        to:    CONF_TO  </span><br><span class="line">        onEndPosRender:  on_endposrender,  </span><br><span class="line">        onPosMsg:    on_posmsg  </span><br><span class="line">        };  </span><br><span class="line">        conf = <span class="keyword">new</span> Config(confDesc);  </span><br><span class="line">        }  </span><br><span class="line">        <span class="keyword">if</span> (conf) {  </span><br><span class="line">            posConf    = <span class="keyword">new</span> host.PosConfig(<span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;tgtLREC&quot;</span>);  </span><br><span class="line">            posConf.w  = <span class="number">300</span>;  </span><br><span class="line">            posConf.h  = <span class="number">250</span>;  </span><br><span class="line">            posConf.z  = <span class="number">1000</span>;  </span><br><span class="line">            pos      = <span class="keyword">new</span> host.Position(<span class="string">&quot;LREC&quot;</span>,</span><br><span class="line">                <span class="string">&quot;&lt;h1&gt;Hello World I&apos;m an Ad&lt;h1&gt;&quot;</span>,<span class="literal">null</span>,posConf);  </span><br><span class="line">            host.render(pos);  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">}   </span><br><span class="line"> </span><br><span class="line">w.remove_content  = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)   </span><br><span class="line"></span>{  </span><br><span class="line">    host.nuke(<span class="string">&quot;*&quot;</span>); <span class="comment">//will remove all positions rendered or in </span></span><br><span class="line">    process <span class="keyword">of</span> rendering.  </span><br><span class="line">    <span class="comment">//could also pass &quot;LREC&quot; in this case, or </span></span><br><span class="line">    <span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;SKY&quot;</span> <span class="keyword">if</span> <span class="string">&quot;LREC&quot;</span> and <span class="string">&quot;SKY&quot;</span> ads were </span><br><span class="line">    configured.  </span><br><span class="line">}  </span><br><span class="line">})();  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-11-&#x51FD;&#x6570;-sf-host-get"><a href="#4-11-&#x51FD;&#x6570;-sf-host-get" class="headerlink" title="4.11 &#x51FD;&#x6570;$sf.host.get"></a>4.11 &#x51FD;&#x6570;<code>$sf.host.get</code></h3><p>get&#x51FD;&#x6570;&#x7528;&#x4E8E;&#x83B7;&#x53D6;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x4F4D;&#x7F6E;&#x914D;&#x7F6E;&#x7684;&#x53C2;&#x8003;&#x3002;&#x5F53;SafeFrame&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E4B;&#x4E00;&#x901A;&#x77E5;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x7684;&#x7F51;&#x7AD9;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x88AB;&#x7528;&#x6765;&#x83B7;&#x53D6;&#x4E0E;&#x6709;&#x7591;&#x95EE;&#x7684;&#x4F4D;&#x7F6E;&#x5173;&#x8054;&#x7684;PosConfig&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#x3002;</p>
<p><strong>&#x53C2;&#x6570;</strong></p>
<ul>
<li><code>{String}</code> <strong>id</strong><br>The id of the position to get. </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">   </span><br><span class="line"> </span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{   </span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], pub = sf &amp;&amp; sf.host, Config = pub </span><br><span class="line">    &amp;&amp; host.Config,   </span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Configuration omitted for brevity   </span></span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on_endposrender</span>(<span class="params">posID, success</span>)  </span><br><span class="line">    </span>{  </span><br><span class="line">        <span class="keyword">var</span> adPos = host.get(posID); </span><br><span class="line">        <span class="keyword">if</span>(!success) { </span><br><span class="line">          host.nuke(posID); </span><br><span class="line">        } </span><br><span class="line">    }</span><br><span class="line">})();</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-12-&#x51FD;&#x6570;-sf-host-render"><a href="#4-12-&#x51FD;&#x6570;-sf-host-render" class="headerlink" title="4.12 &#x51FD;&#x6570;$sf.host.render"></a>4.12 &#x51FD;&#x6570;<code>$sf.host.render</code></h3><p>&#x6E32;&#x67D3;&#x51FD;&#x6570;&#x7528;&#x4E8E;&#x5448;&#x73B0;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7684;SafeFrame&#x4F4D;&#x7F6E;&#x3002;</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;<code>$sf.host.Position</code>&#x5BF9;&#x8C61;&#xFF08;&#x6216;&#x5BF9;&#x8C61;&#x7684;&#x8868;&#x73B0;&#x5F62;&#x5F0F;&#xFF09;&#x4EE5;&#x6E32;&#x67D3;&#x4E00;&#x7EC4;&#x5BB9;&#x5668;&#x3002;&#x5982;&#x679C;&#x60A8;&#x4F20;&#x9012;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7ED9;<code>$sf.host.Config</code>&#x7C7B;&#xFF0C;&#x4F60;&#x4F1A;&#x770B;&#x5230;&#x4EE5;&#x4EE5;&#x4E0B;&#x987A;&#x5E8F;&#x8C03;&#x7528;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF1A;</p>
<ol>
<li>onStartPosRender </li>
<li>onEndPosRender (success / failure) </li>
<li>onBeforePosMsg (if ad sends commands such as for expansion etc, allows you to return true to reject the message) </li>
<li>onPosMsg (if ad sends commands such as for expansion, etc.) </li>
</ol>
<blockquote>
<p><strong>&#x7F51;&#x7AD9;&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br>&#x5F53;<code>$sf.host.nuke</code>&#x5DF2;&#x88AB;&#x8C03;&#x7528;&#x7ED9;&#x5F53;&#x524D;&#x6E32;&#x67D3;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;<code>onEndPosRender</code>&#x56DE;&#x8C03;&#x4E0D;&#x80FD;&#x521D;&#x59CB;&#x5316;&#x3002;</p>
</blockquote>
<p><strong>&#x53C2;&#x6570;</strong></p>
<ul>
<li><code>{Object|Object[]|$sf.host.Position|$sf.host.Position[]}</code> <strong>data</strong><br>A representation of a $sf.host.Position object to be rendered</li>
</ul>
<p><strong>&#x76F8;&#x5173;&#x7AE0;&#x8282;</strong></p>
<ul>
<li>4.4 &#x7C7B;<code>$sf.host.Config</code> </li>
<li>4.5 &#x7C7B;<code>$sf.host.PosConfig</code></li>
<li>4.6 &#x7C7B;<code>$sf.host.Position</code> </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{   </span><br><span class="line"><span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], pub = sf &amp;&amp; sf.host, Config = pub </span><br><span class="line">&amp;&amp; host.Config,   </span><br><span class="line"> </span><br><span class="line">CONF_CDN   = <span class="string">&quot;http://l.yimg.com&quot;</span>,  </span><br><span class="line">CONF_ROOT   = <span class="string">&quot;/sf&quot;</span>,  </span><br><span class="line">CONF_VER  = <span class="string">&quot;2-3-4&quot;</span>,  </span><br><span class="line">CONF_RFILE  = <span class="string">&quot;/html/render.html&quot;</span>,  </span><br><span class="line">CONF_TO  = <span class="number">30</span>;   </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">on_endposrender</span>(<span class="params">posID, success</span>)  </span><br><span class="line"></span>{  </span><br><span class="line"><span class="comment">//a render action success  </span></span><br><span class="line">}  </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">on_posmsg</span>(<span class="params">posID, msg, data</span>)  </span><br><span class="line"></span>{  </span><br><span class="line"><span class="comment">//listen for messages  </span></span><br><span class="line">} </span><br><span class="line">w.render_content  = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span><br><span class="line"></span>{  </span><br><span class="line">    <span class="keyword">var</span> conf, posConf, pos,confDesc;   </span><br><span class="line">     </span><br><span class="line">    <span class="keyword">if</span> (Config) {  </span><br><span class="line">        conf = Config();  </span><br><span class="line">        <span class="keyword">if</span> (!conf) {  </span><br><span class="line">        confDesc =  </span><br><span class="line">        {    </span><br><span class="line">            debug:       <span class="literal">true</span>,  </span><br><span class="line">            cdn:        CONF_CDN,  </span><br><span class="line">            root:        CONF_ROOT,  </span><br><span class="line">            ver:        CONF_VER,  </span><br><span class="line">            renderFile:      CONF_RFILE,  </span><br><span class="line">            to:        CONF_TO  </span><br><span class="line">            onEndPosRender:    on_endposrender,  </span><br><span class="line">            onPosMsg:      on_posmsg  </span><br><span class="line">        };  </span><br><span class="line">        conf = <span class="keyword">new</span> Config(confDesc);  </span><br><span class="line">        }  </span><br><span class="line">        <span class="keyword">if</span> (conf) {  </span><br><span class="line">            posConf    = <span class="keyword">new</span> host.PosConfig(<span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;tgtLREC&quot;</span>);  </span><br><span class="line">            posConf.w  = <span class="number">300</span>;  </span><br><span class="line">            posConf.h  = <span class="number">250</span>;  </span><br><span class="line">            posConf.z  = <span class="number">1000</span>;  </span><br><span class="line">            pos    = <span class="keyword">new</span> host.Position(<span class="string">&quot;LREC&quot;</span>,</span><br><span class="line">                <span class="string">&quot;&lt;h1&gt;Hello World I&apos;m an Ad&lt;h1&gt;&quot;</span>,<span class="literal">null</span>,posConf);  </span><br><span class="line">            host.render(pos);        </span><br><span class="line">        }  </span><br><span class="line">    } </span><br><span class="line">}  </span><br><span class="line"> </span><br><span class="line">w.remove_content  = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span><br><span class="line"></span>{  </span><br><span class="line">    host.nuke(<span class="string">&quot;*&quot;</span>); <span class="comment">//will remove all positions rendered or in </span></span><br><span class="line">    process <span class="keyword">of</span> rendering.  </span><br><span class="line">    <span class="comment">//could also pass &quot;LREC&quot; in this case, or </span></span><br><span class="line">    <span class="string">&quot;LREC&quot;</span>,<span class="string">&quot;SKY&quot;</span> <span class="keyword">if</span> <span class="string">&quot;LREC&quot;</span> and <span class="string">&quot;SKY&quot;</span> ads </span><br><span class="line">    were configured.  </span><br><span class="line">}  </span><br><span class="line">})();  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&apos;tgtLREC&apos;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript">  </span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{   </span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], pub = sf &amp;&amp; sf.host, Config = pub </span><br><span class="line">    &amp;&amp; host.Config,   </span><br><span class="line">     </span><br><span class="line">    CONF_CDN   = <span class="string">&quot;http://l.yimg.com&quot;</span>,  </span><br><span class="line">    CONF_ROOT   = <span class="string">&quot;/sf&quot;</span>,  </span><br><span class="line">    CONF_VER  = <span class="string">&quot;2-3-4&quot;</span>,  </span><br><span class="line">    CONF_RFILE  = <span class="string">&quot;/html/render.html&quot;</span>,  </span><br><span class="line">    CONF_TO  = <span class="number">30</span>;   </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on_endposrender</span>(<span class="params">posID, success</span>)  </span><br><span class="line">    </span>{  </span><br><span class="line">    <span class="comment">//a render action success  </span></span><br><span class="line">    }  </span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on_posmsg</span>(<span class="params">posID, msg, data</span>)  </span><br><span class="line">    </span>{  </span><br><span class="line">    <span class="comment">//listen for messages  </span></span><br><span class="line">    }</span><br><span class="line">})();  </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="5-&#x5916;&#x90E8;&#x65B9;API&#x5B9E;&#x65BD;"><a href="#5-&#x5916;&#x90E8;&#x65B9;API&#x5B9E;&#x65BD;" class="headerlink" title="5.&#x5916;&#x90E8;&#x65B9;API&#x5B9E;&#x65BD;"></a>5.&#x5916;&#x90E8;&#x65B9;API&#x5B9E;&#x65BD;</h2><p>SafeFrame&#x5916;&#x90E8;&#x65B9;API&#x4F7F;&#x7528;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x548C;&#x51FD;&#x6570;&#x5728;&#x7B2C;5.1&#x81F3;5.10&#x8282;&#x4E2D;&#x63CF;&#x8FF0;&#x3002;</p>
<h3 id="5-1-&#x547D;&#x540D;&#x7A7A;&#x95F4;-sf-ext"><a href="#5-1-&#x547D;&#x540D;&#x7A7A;&#x95F4;-sf-ext" class="headerlink" title="5.1 &#x547D;&#x540D;&#x7A7A;&#x95F4;$sf.ext"></a>5.1 &#x547D;&#x540D;&#x7A7A;&#x95F4;<code>$sf.ext</code></h3><p><code>$sf.ext</code></p>
<p>&#x547D;&#x540D;&#x7A7A;&#x95F4;ext&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x7528;&#x4E8E;&#x68C0;&#x7D22;&#x5173;&#x4E8E;&#x6240;&#x8FF0;&#x5BB9;&#x5668;&#x7684;&#x5404;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x4FE1;&#x606F;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5916;&#x90E8;&#x65B9;&#x4F7F;&#x7528;&#x6B64;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x6765;&#x5B9A;&#x4E49;JavaScript&#x7C7B;&#x548C;&#x5BF9;&#x8C61;&#xFF0C;&#x5916;&#x90E8;&#x65B9;&#x5E7F;&#x544A;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5728;&#x4E00;&#x4E2A;SafeFrame&#x7684;&#x73AF;&#x5883;&#x4E2D;&#x4E0E;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x3002;</p>
<p>&#x88AB;&#x7528;&#x4E8E;&#x6267;&#x884C;&#x4EA4;&#x4E92;&#x4F5C;&#x7528;&#x7684;SafeFrame&#x65B9;&#x6CD5;&#x662F;&#x5F02;&#x6B65;&#x7684;&#xFF0C;&#x4F7F;&#x5F97;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x6765;&#x81EA;API&#x7684;&#x56DE;&#x8C03;&#x6765;&#x786E;&#x5B9A;&#x4EFB;&#x4F55;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#x3002;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x4E5F;&#x53EF;&#x4FDD;&#x6301;&#x5176;&#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5B83;&#x4EEC;&#x88AB;&#x4FDD;&#x62A4;&#x4EE5;&#x514D;&#x91CD;&#x590D;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF1A;</p>
<ul>
<li><code>$sf.ext.expand</code>&#x8C03;&#x7528;&#x88AB;&#x521D;&#x59CB;&#x5316;. </li>
<li>&#x5728;&#x540E;&#x53F0;&#xFF0C;SafeFrame&#x5904;&#x7406;<code>$ sf.ext.expand</code>&#x5E76;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x5230;&#x7F51;&#x7AD9;&#x3002; </li>
<li>&#x5982;&#x679C;<code>$ sf.ext.expand</code>&#x518D;&#x6B21;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5904;&#x7406;&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x7528;&#x4E4B;&#x524D;&#xFF0C;&#x56E0;&#x4E3A;&#x53EA;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5904;&#x7406;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#xFF0C;&#x5B83;&#x4F1A;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x3002; </li>
<li>&#x5982;&#x679C;&#x662F;&#x4F7F;&#x7528;<code>$ sf.ext.register</code>&#x63D0;&#x4F9B;&#x7684;<code>$ sd.ext.expand</code>&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x800C;&#x4E14;&#x4E00;&#x65E6;&#x5904;&#x7406;&#xFF0C;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#x7684;&#x901A;&#x77E5;&#x4F1A;&#x53D1;&#x51FA;&#x3002;</li>
<li>&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#x7684;&#x7ED3;&#x679C;&#x4EA7;&#x751F;&#x4E4B;&#x540E;&#xFF0C;<code>$ sf.ext.expand</code>&#x53EF;&#x4EE5;&#x518D;&#x6B21;&#x8C03;&#x7528;&#x3002;</li>
</ul>
<p><strong>&#x4E8B;&#x4EF6;</strong><br><code>&lt;static&gt;  $sf.ext.__status_update(status, data)</code></p>
<p>&#x6B64;&#x4E8B;&#x4EF6;&#x63D0;&#x4F9B;&#x5916;&#x90E8;&#x65B9;&#x5E7F;&#x544A;&#x5185;&#x5BB9;&#x7684;&#x72B6;&#x6001;&#x3002;&#x4E8B;&#x4EF6;&#x662F;&#x4ECE;&#x5916;&#x90E8;&#x65B9;SDK&#x53D1;&#x5C04;&#x7684;&#xFF0C;&#x4EE5;&#x4FBF;&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>$ sf.ext.register</code>&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x3002;</p>
<blockquote>
<p><strong>&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br><code>$ sf.ext.__ status_update</code>&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4EC5;&#x4EC5;&#x662F;&#x9690;&#x5F0F;&#x7684;&#xFF0C;&#x5728;JavaScript&#x7684;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x4F46;&#x5B83;&#x5728;&#x8FD9;&#x91CC;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x4EE5;&#x8BB0;&#x5F55;&#x5F53;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5E76;&#x63D0;&#x4EA4;&#x7ED9;<code>$ sf.ext.register</code>&#x7684;&#x53EF;&#x80FD;&#x7684;&#x53C2;&#x6570;&#x3002;</p>
</blockquote>
<p>&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E0E;&#x81F3;&#x5C11;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x88AB;&#x8C03;&#x7528;&#xFF1A;&#x7B2C;&#x4E00;&#xFF0C;&#x4E00;&#x4E2A;&#x8868;&#x793A;&#x72B6;&#x6001;&#x7684;&#x53D8;&#x5316;&#x7684;&#x5B57;&#x7B26;&#x4E32;;&#x7B2C;&#x4E8C;&#xFF0C;&#x4E00;&#x4E2A;&#x8868;&#x793A;&#x751F;&#x6210;&#x72B6;&#x6001;&#x66F4;&#x65B0;&#x4E8B;&#x4EF6;&#x7684;&#x547D;&#x4EE4;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x662F;&#x7531;&#x751F;&#x6210;&#x7684;&#x72B6;&#x6001;&#x66F4;&#x65B0;&#x4E8B;&#x4EF6;&#x7684;&#x5916;&#x90E8;&#x65B9;API&#x521D;&#x59CB;&#x5316;&#x7684;&#x547D;&#x4EE4;&#x53D1;&#x51FA;&#x7684;&#x3002;&#x5982;&#x679C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5176;&#x542B;&#x4E49;&#x662F;&#x7F51;&#x7AD9;&#x5DF2;&#x5F3A;&#x5236;&#x72B6;&#x6001;&#x66F4;&#x65B0;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7531;&#x5916;&#x90E8;&#x65B9;API&#x6B63;&#x5728;&#x53D1;&#x8D77;&#x7684;&#x547D;&#x4EE4;&#x542F;&#x52A8;&#x7684;&#x3002;</p>
<p><strong>&#x4E8B;&#x4EF6;&#x53C2;&#x6570;&#xFF1A;</strong></p>
<ul>
<li><code>{String}</code> <strong>status</strong><br>The status code string notifying external content of container updates. The following status codes are available:<br>&#x3000;<strong>expanded</strong><br>&#x3000;The container has been expanded.<br>&#x3000;<strong>collapsed</strong><br>&#x3000;The container is in the default collapsed state.<br>&#x3000;<strong>failed</strong><br>&#x3000;A command initiated by the external party API did not succeed.<br>&#x3000;<strong>geom-update</strong><br>&#x3000;The container geometry information has changed. Sent for events such when the  browser window is resized, parent container scrolls, or other geometric changes.<br>&#x3000;<strong><em>focus-change</em></strong><br>&#x3000;<em>The browser window / tab has become active (&#x201C;focus&#x201D;), or become in-active  (&#x201C;blur&#x201D;).</em> </li>
<li><p><code>{Object}</code> <strong>data</strong> <em>(Optional)</em><br>Contains information about the original message or action requested of the Host or supplied by the host as a result of changes in the page. The following objects may be issued:<br>&#x3000;<strong>cmd</strong><br>&#x3000;The original command sent with possible values such as: exp-ovr, exp-push, read-cookie, write-cookie, etc.<br>&#x3000;<strong>reason</strong><br>&#x3000;Description information about whether the command succeeded or failed.<br>&#x3000;<strong>info</strong><br>&#x3000;The information sent as part of the command echoed back to the caller, such as dimensions for expansion, the data to set for a cookie, etc. </p>
<p><strong>&#x76F8;&#x5173;&#x7AE0;&#x8282;</strong></p>
<ul>
<li>5.2 &#x51FD;&#x6570;<code>$sf.ext.register</code> </li>
<li>5.5 &#x51FD;&#x6570;<code>$sf.ext.expand</code></li>
</ul>
</li>
</ul>
<h3 id="5-2-&#x51FD;&#x6570;-sf-ext-register"><a href="#5-2-&#x51FD;&#x6570;-sf-ext-register" class="headerlink" title="5.2 &#x51FD;&#x6570;$sf.ext.register"></a>5.2 &#x51FD;&#x6570;<code>$sf.ext.register</code></h3><p><code>$sf.ext.register(initWidth, initHeight, cb)</code></p>
<p>&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x540C;&#x6B65;&#xFF08;&#x53EF;&#x968F;&#x65F6;&#x8BF7;&#x6C42;&#xFF09;</p>
<p>&#x5916;&#x90E8;&#x515A;&#x6CE8;&#x518C;&#x51FD;&#x6570;&#x6CE8;&#x518C;SafeFrame&#x5E73;&#x53F0;&#xFF0C;&#x4EE5;&#x63A5;&#x53D7;SafeFrame&#x5916;&#x90E8;&#x65B9;API&#x8C03;&#x7528;&#x3002;&#x5916;&#x90E8;&#x65B9;&#x5E7F;&#x544A;&#x58F0;&#x660E;&#x521D;&#x59CB;&#x7684;&#xFF08;&#x6298;&#x53E0;&#x7684;&#xFF09;&#x7684;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#x3002;&#x9664;&#x4E86;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#xFF0C;&#x6B64;&#x51FD;&#x6570;&#x8FD8;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x901A;&#x77E5;&#x6709;&#x5173;&#x5404;&#x79CD;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x7684;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x6700;&#x521D;&#x7684;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#x53C2;&#x6570;&#x662F;&#x5FC5;&#x9700;&#x7684;&#xFF0C;&#x4EE5;&#x4FBF;SafeFrame&#x901A;&#x77E5;&#x7F51;&#x7AD9;&#x6E32;&#x67D3;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x6240;&#x9700;&#x7684;&#x5448;&#x73B0;&#x7A7A;&#x95F4;&#x3002;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x662F;&#x8FD4;&#x56DE;&#x6BCF;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x5904;&#x7406;&#x7684;&#x6210;&#x529F;&#x6216;&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#xFF0C;&#x901A;&#x77E5;&#x5916;&#x90E8;&#x65B9;&#x53D1;&#x9001;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x72B6;&#x6001;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x5916;&#x90E8;&#x65B9;&#x53EF;&#x505A;&#x51FA;&#x76F8;&#x5E94;&#x7684;&#x53CD;&#x5E94;&#x3002;&#x5728;&#x7B49;&#x5F85;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#x901A;&#x77E5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x547D;&#x4EE4;&#x5E94;&#x8BE5;&#x53EA;&#x88AB;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#x3002;&#x5728;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;&#x901A;&#x77E5;&#x4E4B;&#x524D;&#xFF0C;&#x4EFB;&#x4F55;&#x540E;&#x7EED;&#x7684;&#x8C03;&#x7528;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p>
<p><strong>&#x53C2;&#x6570;</strong></p>
<ul>
<li><code>{Number}</code> <strong>initWidth</strong><br>The initial / original width of the 3rd party content </li>
<li><code>{Number}</code> <strong>initHeight</strong><br>The initial / original height of the 3rd party content </li>
<li><code>{Event}</code> <strong>cb</strong><br>An optional callback function that will be called as a notification of event status</li>
</ul>
<p><strong>&#x8FD4;&#x56DE;&#xFF1A;</strong></p>
<ul>
<li><code>void</code></li>
</ul>
<p><strong>&#x76F8;&#x5173;&#x7AE0;&#x8282;</strong></p>
<ul>
<li>&#x7B2C;5.1&#x8282;&#x91CC;&#x7684;&#x4E8B;&#x4EF6;&#x7EC6;&#x8282;</li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- External Party tag --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&apos;text/javascript&apos;</span>&gt;</span><span class="javascript"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], ext = sf &amp;&amp; sf.ext; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">status_update</span>(<span class="params">status, data</span>) </span><br><span class="line"></span>{ </span><br><span class="line"> </span><br><span class="line">} </span><br><span class="line"><span class="keyword">if</span> (ext) { </span><br><span class="line">  <span class="keyword">try</span> { </span><br><span class="line">    ext.register(<span class="number">300</span>, <span class="number">250</span>, status_update); </span><br><span class="line"> </span><br><span class="line">alert(ext.meta(<span class="string">&quot;context&quot;</span>));  </span><br><span class="line"><span class="comment">//read some metadata passed in from the host side </span></span><br><span class="line">  } <span class="keyword">catch</span> (e) { </span><br><span class="line">    alert(<span class="string">&quot;no SafeFrame available&quot;</span>); </span><br><span class="line">  } </span><br><span class="line">} </span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="5-3-&#x51FD;&#x6570;-sf-ext-supports"><a href="#5-3-&#x51FD;&#x6570;-sf-ext-supports" class="headerlink" title="5.3 &#x51FD;&#x6570; $sf.ext.supports"></a>5.3 &#x51FD;&#x6570; <code>$sf.ext.supports</code></h3><p><code>$sf.ext.supports()</code></p>
<p>&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x540C;&#x6B65;&#xFF08;&#x53EF;&#x968F;&#x65F6;&#x8BF7;&#x6C42;&#xFF09;</p>
<p>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6709;&#x4EE3;&#x8868;&#x8FD9;&#x4E2A;&#x7279;&#x5B9A;&#x5BB9;&#x5668;&#x7684;&#x4EC0;&#x4E48;&#x529F;&#x80FD;&#x5DF2;&#x88AB;&#x6253;&#x5F00;&#x6216;&#x5173;&#x95ED;&#x7684;&#x952E;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p><strong>&#x8FD4;&#x56DE;</strong></p>
<ul>
<li><code>{Object}</code><br>An object containing a list of SafeFrame container features that are available, defined as follows:<br>&#x3000;<code>{Boolean} exp-ovr</code><br>Whether or not expansion is allowed in overlay mode. Default value is true.<br>&#x3000;<code>{Boolean} exp-push</code><br>&#x3000;Whether or not expansion is allowed in push mode. Push expansion, a method of content expansion in which Host content is &#x201C;pushed&#x201D; instead of expanding over the content, is not yet supported in SafeFrame but may be supported separately by the Host. Default value is false.<br>&#x3000;<code>{Boolean} read-cookie</code><br>&#x3000;Whether or not the host allows external party content to read host cookies. Default value is false.<br>&#x3000;<code>{Boolean} write-cookie</code><br>&#x3000;Whether or not the host allows external party content to write cookies to the host domain. Despite value of true, the host may reject cookie values when offered if deemed appropriate. Default value is false. </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Sample JavaScript implementation </span></span><br><span class="line"><span class="comment">//Let&apos;s say that a 300x250 ad has been declared to fully expand to 400 </span></span><br><span class="line">pixels to the left and <span class="number">200</span> pixels to the top. </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">function feature_check(which) </span><br><span class="line">{ </span><br><span class="line">  <span class="keyword">var</span> o = $sf.ext.supports(); </span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> (o &amp;&amp; o[which]); </span><br><span class="line">} </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">expand</span>(<span class="params"></span>) </span><br><span class="line"></span>{ </span><br><span class="line">  <span class="keyword">if</span> (feature_check(<span class="string">&quot;exp_push&quot;</span>)) { </span><br><span class="line">    $sf.ext.expand({l:<span class="number">400</span>,t:<span class="number">200</span>,push:<span class="literal">true</span>}); </span><br><span class="line">  } </span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="5-4-&#x51FD;&#x6570;-sf-ext-geom"><a href="#5-4-&#x51FD;&#x6570;-sf-ext-geom" class="headerlink" title="5.4 &#x51FD;&#x6570;$sf.ext.geom"></a>5.4 &#x51FD;&#x6570;<code>$sf.ext.geom</code></h3><p><code>$sf.ext.geom()</code></p>
<p>&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x540C;&#x6B65;&#xFF08;&#x53EF;&#x968F;&#x65F6;&#x8BF7;&#x6C42;&#xFF09;</p>
<p>&#x6240;&#x8FF0;&#x7684;geom&#x51FD;&#x6570;&#x4F7F;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x51E0;&#x4F55;&#x5C3A;&#x5BF8;&#x548C;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E0E;&#x5B83;&#x7684;&#x4E0E;&#x6D4F;&#x89C8;&#x5668;&#x6216;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7A97;&#x53E3;&#x548C;&#x5176;&#x4E2D;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x6B63;&#x5728;&#x88AB;&#x89C2;&#x770B;&#x7684;&#x8BBE;&#x5907;&#x7684;&#x5C4F;&#x5E55;&#x8FB9;&#x754C;&#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#x4EA4;&#x6362;&#x3002;</p>
<blockquote>
<p><strong>&#x7F51;&#x7AD9;&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br>&#x5982;&#x679C;&#x8C03;&#x7528;&#xFF0C;&#x7F51;&#x7AD9;&#x9700;&#x8981;&#x8FD4;&#x56DE;&#x6240;&#x8BF7;&#x6C42;&#x7684;&#x503C;&#x3002;</p>
</blockquote>
<p>&#x8BE5;&#x4FE1;&#x606F;&#x53EF;&#x7528;&#x4E8E;&#xFF1A;</p>
<ul>
<li>&#x51B3;&#x5B9A;&#x5185;&#x5BB9;&#x6269;&#x5C55;&#x7684;&#x53EF;&#x7528;&#x7684;&#x65B9;&#x5411;&#x548C;&#x5C3A;&#x5BF8;</li>
<li>&#x786E;&#x5B9A;SafeFrame&#x5BB9;&#x5668;&#x662F;&#x5426;&#x201C;&#x5728;&#x89C6;&#x56FE;&#x4E2D;&#x201D;</li>
</ul>
<blockquote>
<p><strong>&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x6CE8;</strong><br>SafeFrame&#x63D0;&#x4F9B;&#x4E86;&#x53EF;&#x5728;&#x6839;&#x636E;&#x63A5;&#x53D7;&#x7684;&#x5DE5;&#x4E1A;&#x5EFA;&#x8BAE;&#x7684;&#x53EF;&#x7528;&#x6027;&#x65B9;&#x9762;&#x62A5;&#x544A;&#x7684;&#x4FE1;&#x606F;&#xFF1B;&#x7136;&#x800C;&#xFF0C;SafeFrame&#x4E0D;&#x76F4;&#x63A5;&#x62A5;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x6307;&#x6807;&#x3002;&#x4E00;&#x4E2A;&#x5BF9;&#x4E8E;&#x62A5;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x662F;&#x5FC5;&#x8981;&#x7684;&#x6307;&#x6807;&#x662F;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#xFF0C;&#x5B83;&#x5FC5;&#x987B;&#x901A;&#x8FC7;&#x6CE8;&#x518C;&#x72B6;&#x6001;&#x66F4;&#x65B0;&#x76D1;&#x542C;&#x5668;&#x6765;&#x5F97;&#x5230;&#xFF0C;&#x4EE5;&#x786E;&#x5B9A;&#x4E3A;<code>self.iv</code>&#x88AB;&#x6CE8;&#x518C;&#x4E3A;<code>true</code>&#x8981;&#x7528;&#x591A;&#x4E45;&#x7684;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x8981;&#x4E86;&#x89E3;&#x5173;&#x4E8E;<code>$ sf.ext.register</code>&#x529F;&#x80FD;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x67E5;&#x9605;&#x7B2C;5.2&#x8282;&#x3002;</p>
</blockquote>
<p><strong>&#x8FD4;&#x56DE;</strong></p>
<ul>
<li><p><code>{Object} g</code><br>An object containing sub objects with geometric information about the container. Geometric information may be returned as described in the following lists</p>
<p><strong>win</strong><br>Identifies the location, width, and height (in pixels) of the browser or application window boundaries relative to the device screen.<br>&#x3000;&#x2022;  {Number} t<br>&#x3000;The y coordinate (in pixels) of the top boundary of the browser or application window relative to the screen<br>&#x3000;&#x2022;  {Number} b<br>&#x3000;The y coordinate (in pixels) of the bottom boundary of the browser or application window relative to the screen<br>&#x3000;&#x2022;  {Number} l<br>&#x3000;The x coordinate (in pixels) of the left boundary of the browser or application window relative to the screen<br>&#x3000;&#x2022;  {Number} r<br>&#x3000;The x coordinate (in pixels) of the right boundary of the browser or application window relative to the screen<br>&#x3000;&#x2022;  {Number} w<br>&#x3000;The width (in pixels) of the browser or application window (win.r &#x2013; win.l)<br>&#x3000;&#x2022;  {Number} h<br>&#x3000;&#x2022;  The height (in pixels) of the browser or application window (win.b &#x2013; win.t)<br>&#x3000;<br><strong>self</strong><br>Identifies the z-index and location, width, and height (in pixels) of the SafeFrame container relative to the browser or application window (win). In addition, width, height, and area percentage of SafeFrame content in view is provided, based on how much of the container is located within the boundaries of the browser or application window (win).<br>&#x3000;&#x2022;  {Number} t<br>&#x3000;The y coordinate (in pixels) of the top boundary of the SafeFrame container<br>&#x3000;&#x2022;  {Number} l<br>&#x3000;The x coordinate (in pixels) of the left side boundary of the SafeFrame container<br>&#x3000;&#x2022;  {Number} r<br>&#x3000;The x coordinate (in pixels) of the right side boundary of the SafeFrame container (self.l + width of container)<br>&#x3000;&#x2022;  {Number} b<br>&#x3000;The y coordinate (in pixels) of the bottom boundary of the SafeFrame container (self.t + height of container)<br>&#x3000;&#x2022;  {Number} xiv<br>&#x3000;The percentage (%) of width for the SafeFrame container that is in view (formatted as &#x201C;0.14&#x201D; or &#x201C;1&#x201D;)<br>&#x3000;&#x2022;  {Number} yiv<br>&#x3000;&#x2022;  The percentage (%) of height for the SafeFrame container that is in view (formatted as &#x201C;0.14&#x201D; or &#x201C;1&#x201D;)<br>&#x3000;&#x2022;  {Number} iv<br>&#x3000;The percentage (%) of area for the SafeFrame container that is in view (formatted as &#x201C;0.14&#x201D; or &#x201C;1&#x201D;)<br>&#x3000;&#x2022;  {Number} z<br>&#x3000;The Z-index of the SafeFrame container<br>&#x3000;&#x2022;  {Number} w<br>&#x3000;The width (in pixels) of the SafeFrame container<br>&#x3000;&#x2022;  {Number} h<br>&#x3000;The height (in pixels) of the SafeFrame container<br>&#x3000;<br><strong>exp</strong><br>Identifies the expected distance available for expansion within the host content along with information about whether controls allow the end user to scroll the page. If &#x201C;scrollable,&#x201D; the SafeFrame content can expand to dimensions greater than those provided.<br>&#x3000;&#x2022;  {Number} t<br>&#x3000;The number of pixels that can be expanded upwards<br>&#x3000;&#x2022;  {Number} l<br>&#x3000;The number of pixels that can be expanded left<br>&#x3000;&#x2022;  {Number} r<br>&#x3000;The number of pixels that can be expanded right<br>&#x3000;&#x2022;  {Number} b<br>&#x3000;The number of pixels that can be expanded down<br>&#x3000;&#x2022;  {Number/Boolean} xs<br>&#x3000;A response that indicates whether the host content is scrollable along the x-axis (1 = scrollable; 0 = not scrollable)<br>&#x3000;&#x2022;  {Number/Boolean} yx<br>&#x3000;A response that indicates whether the host content is scrollable along the y-axis (1 = scrollable; 0 = not scrollable)<br>&#x3000;<br>&#x7531;&#x4E8E;&#x8BA1;&#x7B97;&#x51E0;&#x4F55;&#x4FE1;&#x606F;&#x548C;&#x4EA4;&#x6362;&#x6D88;&#x606F;&#x4F1A;&#x5F71;&#x54CD;&#x6027;&#x80FD;&#xFF0C;&#x51E0;&#x4F55;&#x4FE1;&#x606F;&#x5E94;&#x53EA;&#x5728;&#x4EE5;&#x4E0B;&#x65F6;&#x95F4;&#x6BB5;&#x66F4;&#x65B0;&#xFF1A;</p>
<p>&#x3000;<strong>SafeFrame&#x5BB9;&#x5668;&#x7684;&#x9996;&#x6B21;&#x6E32;&#x67D3;</strong><br>&#x3000;&#x5F53;SafeFrame&#x5BB9;&#x5668;&#x9996;&#x6B21;&#x88AB;&#x6E32;&#x67D3;&#x65F6;&#xFF0C;<code>$sf.ext.geom</code>&#x5E94;&#x88AB;&#x5904;&#x7406;&#xFF0C;&#x5E76;&#x4E0E;&#x8981;&#x6E32;&#x67D3;&#x7684;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x4E00;&#x8D77;&#x53D1;&#x9001;&#x7ED3;&#x679C;&#x3002;<br>&#x3000;<br>&#x3000;<strong>&#x5F53;&#x6539;&#x53D8;SafeFrame&#x5BB9;&#x5668;&#x7684;&#x5927;&#x5C0F;&#x6216;&#x4F4D;&#x7F6E;&#x65F6;</strong><br>&#x3000;&#x5F53;&#x4F7F;&#x7528;&#x4E0B;&#x5217;&#x529F;&#x80FD;&#x4E4B;&#x4E00;&#x6539;&#x53D8;&#x5BB9;&#x5668;&#x5C3A;&#x5BF8;&#x6216;&#x4F4D;&#x7F6E;&#x65F6;&#xFF0C;<code>$ sf.ext.geom</code>&#x51FD;&#x6570;&#x5E94;&#x8BE5;&#x88AB;&#x5904;&#x7406;&#xFF1A;<br>&#x3000;&#x3000;o  <code>$sf.ext.expand</code><br>&#x3000;&#x3000;o  <code>$sf.ext.collapse</code><br>&#x3000;&#x3000;<br>&#x3000;<strong>&#x5F53;&#x6765;&#x6E90;&#x4E8E;&#x7F51;&#x7AD9;&#x7684;&#x5916;&#x90E8;&#x66F4;&#x65B0;&#x88AB;&#x63A5;&#x6536;&#x65F6;</strong><br>&#x3000;&#x3000;o  &#x6536;&#x5230;&#x6765;&#x81EA;&#x4ECE;&#x5176;&#x4E2D;&#x8BE5;&#x5BB9;&#x5668;&#x7684;&#x51E0;&#x4F55;&#x5F62;&#x72B6;&#x5DF2;&#x7ECF;&#x88AB;&#x7F51;&#x7AD9;&#x81EA;&#x5DF1;&#x66F4;&#x65B0;&#x7684;&#x7F51;&#x7AD9;&#x7AEF;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;&#x5F3A;&#x5236;&#x5185;&#x5BB9;&#x6298;&#x53E0;&#x3002;&#x67E5;&#x770B;&#x6CE8;&#x518C;&#x56DE;&#x8C03;&#x6D88;&#x606F;&#x3002;<br>&#x3000;&#x3000;o  &#x5728;&#x6240;&#x6709;&#x53EF;&#x89C6;&#x9762;&#x79EF;&#x7684;&#x6EDA;&#x52A8;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x5141;&#x8BB8;&#x6BCF;&#x79D2;&#x4E00;&#x4E2A;&#x66F4;&#x65B0;&#xFF08;&#x8282;&#x6D41;&#xFF09;&#x3002;<br>&#x3000;&#x3000;o  &#x5728;&#x6240;&#x6709;&#x53EF;&#x89C6;&#x9762;&#x79EF;&#x7684;&#x5927;&#x5C0F;&#x8C03;&#x6574;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x5141;&#x8BB8;&#x6BCF;&#x79D2;&#x4E00;&#x4E2A;&#x66F4;&#x65B0;&#xFF08;&#x8282;&#x6D41;&#xFF09;&#x3002;</p>
</li>
</ul>
<blockquote>
<p><strong>&#x7F51;&#x7AD9;&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br>&#x5BF9;&#x4E8E;&#x6EDA;&#x52A8;&#x6216;&#x8C03;&#x6574;&#x4E8B;&#x4EF6;&#xFF0C;SafeFrames&#x7F51;&#x7AD9;&#x5B9E;&#x65BD;&#x5E94;&#x8BE5;&#x53EA;&#x4FA6;&#x542C;&#x8981;&#x4E48;&#x662F;&#x88C1;&#x526A;&#x6216;&#x6EDA;&#x52A8;&#x4E0A;&#x9762;&#x7684;SafeFrame&#x5BB9;&#x5668;&#x4E0A;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7236;HTML&#x5143;&#x7D20;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>
</blockquote>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Sample JavaScript implementation </span></span><br><span class="line"><span class="comment">//Let&apos;s say that a 300x250 ad has been declared to fully expand to 400 pixels </span></span><br><span class="line">to the left and <span class="number">200</span> pixels to the top. </span><br><span class="line"> </span><br><span class="line">function expand() </span><br><span class="line">{ </span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], ext = sf &amp;&amp; sf.ext, g, ex; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (ext) { </span><br><span class="line">      <span class="keyword">try</span> { </span><br><span class="line">        g  = ext.geom(); </span><br><span class="line">        ex  = g &amp;&amp; g.exp; </span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(ex.l) &gt;= <span class="number">400</span> &amp;&amp; <span class="built_in">Math</span>.abs(ex.t) &gt;= <span class="number">200</span>) { </span><br><span class="line">            ext.expand({l:<span class="number">400</span>,t:<span class="number">200</span>}); </span><br><span class="line">        } </span><br><span class="line">      } <span class="keyword">catch</span> (e) { </span><br><span class="line">        <span class="comment">//do not expand, not enough room </span></span><br><span class="line">      } </span><br><span class="line">    } <span class="keyword">else</span> { </span><br><span class="line">      <span class="comment">//api expansion not supported </span></span><br><span class="line">    } </span><br><span class="line">  } </span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">status_update_handler</span>(<span class="params">status</span>) </span><br><span class="line">  </span>{ </span><br><span class="line">   <span class="keyword">if</span> (status == <span class="string">&quot;expanded&quot;</span>) { </span><br><span class="line">      <span class="comment">// The ad has finished expanding </span></span><br><span class="line">    } </span><br><span class="line">  }</span><br></pre></td></tr></table></figure></p>
<h3 id="5-5-&#x51FD;&#x6570;-sf-ext-expand"><a href="#5-5-&#x51FD;&#x6570;-sf-ext-expand" class="headerlink" title="5.5 &#x51FD;&#x6570;$sf.ext.expand"></a>5.5 &#x51FD;&#x6570;<code>$sf.ext.expand</code></h3><p><code>$sf.ext.expand(obj)</code></p>
<p>&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x5F02;&#x6B65;&#xFF08;&#x4EC5;&#x7B2C;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x88AB;&#x63A5;&#x53D7;;&#x53E6;&#x5916;&#x7684;&#x8BF7;&#x6C42;&#x88AB;&#x62D2;&#x7EDD;&#xFF0C;&#x76F4;&#x5230;&#x6700;&#x521D;&#x7684;&#x8BF7;&#x6C42;&#x88AB;&#x5904;&#x7406;&#xFF09;</p>
<p>&#x6B64;&#x65B9;&#x6CD5;&#x6269;&#x5C55;SafeFrame&#x5BB9;&#x5668;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x51E0;&#x4F55;&#x4F4D;&#x7F6E;&#xFF0C;&#x5141;&#x8BB8;&#x5A92;&#x4ECB;&#x6269;&#x5F20;&#x3002;&#x6BCF;&#x4E2A;&#x65B9;&#x5411;&#x4E0A;&#x7684;&#x50CF;&#x7D20;&#x662F;&#x76F8;&#x5BF9;&#x4E8E;&#x7531;init&#x5BC4;&#x5B58;&#x5668;&#x65B9;&#x6CD5;&#x58F0;&#x660E;&#x7684;&#x539F;&#x59CB;&#x504F;&#x79FB;&#x503C;&#x7684;&#x7EDD;&#x5BF9;&#x4F4D;&#x7F6E;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;&#x5C31;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x629B;&#x51FA;&#xFF0C;&#x800C;&#x4E14;&#x5B83;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;&#x6269;&#x5C55;&#x65B9;&#x6CD5;&#x53EA;&#x80FD;&#x4ECE;&#x521D;&#x59CB;&#x5927;&#x5C0F;&#x8C03;&#x7528;&#xFF0C;&#x4EE5;&#x4FDD;&#x6301;&#x6027;&#x80FD;&#x3002;</p>
<p>SafeFrame&#x4E2D;&#x4E0D;&#x652F;&#x6301;&#x8865;&#x95F4;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x5F53;&#x5B83;&#x9700;&#x8981;&#x6269;&#x5927;&#x5230;&#x5176;&#x6700;&#x5927;&#x5C3A;&#x5BF8;&#x65F6;&#xFF0C;&#x4EFB;&#x4F55;&#x52A8;&#x753B;&#x5FC5;&#x987B;&#x7531;&#x5916;&#x90E8;&#x65B9;&#x5728;&#x5BB9;&#x5668;&#x5185;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x548C;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x81F3;&#x5C11;&#x6240;&#x8FF0;&#x504F;&#x79FB;&#x53C2;&#x6570;&#x4E4B;&#x4E00;&#x662F;&#x5F3A;&#x5236;&#x6027;&#x7684;&#x3002;&#x5982;&#x679C;&#x6240;&#x6709;&#x7684;&#x53C2;&#x6570;&#x4E22;&#x5931;&#xFF0C;&#x8C03;&#x7528;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x80FD;&#x4F1A;&#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x5916;&#x90E8;&#x65B9;&#x6CE8;&#x518C;&#x6267;&#x884C;&#x7684;&#x72B6;&#x6001;&#x3002;&#x5982;&#x679C;SafeFrame&#x7684;iframe&#x662F;&#x5DF2;&#x7ECF;&#x5728;&#x6700;&#x5927;&#x5C3A;&#x5BF8;&#xFF0C;&#x8C03;&#x7528;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p>
<p><strong>&#x53C2;&#x6570;&#xFF1A;</strong></p>
<ul>
<li><code>{Object}</code> <strong>obj</strong><br>A descriptor object that defines the top, left, bottom, right coordinates for expansion. At minimum, 1 value must be specified. </li>
<li><code>{Number}</code> <strong>obj.t</strong><br>The new top coordinate (y) relative to the current top coordinate. </li>
<li><code>{Number}</code> <strong>obj.l</strong><br>The new left coordinate (x) relative to the current left coordinate. </li>
<li><code>{Number}</code> <strong>obj.r</strong><br>The new right coordinate (x+width) relative to the current right coordinate (x+width). </li>
<li><code>{Number}</code> <strong>obj.b</strong><br>The new bottom coordinate (y+height) relative to the current top coordinate (y+height). </li>
<li><p><code>{Boolean}</code> <strong>obj.push</strong><br>Whether or not expansion should push the host content, rather than overlay. </p>
<blockquote>
<p><strong>&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br>&#x201C;&#x63A8;&#x201D;&#x7684;&#x529F;&#x80FD;&#x662F;&#x4E00;&#x79CD;&#x5728;&#x5728;&#x5916;&#x90E8;&#x5185;&#x5BB9;&#x6269;&#x5C55;&#x65B9;&#x5411;&#xFF08;&#x6216;&#x591A;&#x4E2A;&#xFF09;&#x4E0A;&#x201C;&#x63A8;&#x52A8;&#x201D;&#x7F51;&#x7AD9;&#x5185;&#x5BB9;&#x7684;&#x62D3;&#x5C55;&#x529F;&#x80FD;&#x3002;&#x5BF9;&#x4E8E;&#x652F;&#x6301;&#x63A8;&#x52A8;&#x6269;&#x5927;&#x529F;&#x80FD;&#x7684;&#x6280;&#x672F;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x7531;SafeFrame1.0&#x89C4;&#x5B9A;&#x7684;&#x3002;&#x7F51;&#x7AD9;&#x5FC5;&#x987B;&#x660E;&#x786E;&#x58F0;&#x660E;Push&#x662F;&#x5426;&#x5728;<code>$ sf.host.posConfig</code>&#x5BF9;&#x8C61;&#x7684;<code>supports</code>&#x5C5E;&#x6027;&#x4E2D;&#x88AB;&#x5141;&#x8BB8;&#x3002;&#x5982;&#x679C;&#x5141;&#x8BB8;&#xFF0C;&#x7F51;&#x7AD9;&#x5FC5;&#x987B;&#x80FD;&#x591F;&#x5728;&#x6280;&#x672F;&#x4E0A;&#x652F;&#x6301;&#x8BE5;&#x529F;&#x80FD;&#x3002;</p>
</blockquote>
</li>
</ul>
<p><strong>&#x8FD4;&#x56DE;&#xFF1A;</strong></p>
<ul>
<li><strong><em>void</em></strong></li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Sample JavaScript implementation </span></span><br><span class="line"><span class="comment">//Let&apos;s say that a 300x250 ad has been declared to fully expand to 400 </span></span><br><span class="line">pixels to the left and <span class="number">200</span> pixels to the top. </span><br><span class="line"> </span><br><span class="line">var expansionPending = <span class="literal">false</span>; </span><br><span class="line"><span class="keyword">var</span> expanded      = <span class="literal">false</span>; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">expand</span>(<span class="params"></span>) </span><br><span class="line"></span>{ </span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], ext = sf &amp;&amp; sf.ext; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (ext) { </span><br><span class="line">      ext.expand({l:<span class="number">400</span>,t:<span class="number">200</span>}); </span><br><span class="line">    } <span class="keyword">else</span> { </span><br><span class="line">      <span class="comment">//api expansion not supported </span></span><br><span class="line">    } </span><br><span class="line">  } </span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">status_update_handler</span>(<span class="params">status</span>) </span><br><span class="line">  </span>{ </span><br><span class="line">  <span class="keyword">if</span> (status == <span class="string">&quot;expanded&quot;</span>) { </span><br><span class="line">      <span class="comment">// The ad has finished expanding </span></span><br><span class="line">} </span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="5-6-&#x51FD;&#x6570;-sf-ext-collapse"><a href="#5-6-&#x51FD;&#x6570;-sf-ext-collapse" class="headerlink" title="5.6 &#x51FD;&#x6570;$sf.ext.collapse"></a>5.6 &#x51FD;&#x6570;<code>$sf.ext.collapse</code></h3><p><code>$sf.ext.collapse()</code></p>
<p>&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x5F02;&#x6B65;&#xFF08;&#x4EC5;&#x7B2C;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x88AB;&#x63A5;&#x53D7;;&#x53E6;&#x5916;&#x7684;&#x8BF7;&#x6C42;&#x88AB;&#x62D2;&#x7EDD;&#xFF0C;&#x76F4;&#x5230;&#x6700;&#x521D;&#x7684;&#x8BF7;&#x6C42;&#x88AB;&#x5904;&#x7406;&#xFF09;</p>
<p>&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x6298;&#x53E0;SafeFrame&#x5BB9;&#x5668;&#x5230;&#x539F;&#x6765;&#x7684;&#x51E0;&#x4F55;&#x4F4D;&#x7F6E;&#x3002;&#x8FD9;&#x4E2A;&#x521D;&#x59CB;&#x5927;&#x5C0F;&#x5E94;&#x5DF2;&#x5728;&#x5728;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#x7684;&#x521D;&#x59CB;&#x5316;&#x6CE8;&#x518C;&#x65B9;&#x6CD5;&#x4E2D;&#x88AB;&#x58F0;&#x660E;&#x3002;&#x5982;&#x679C;&#x6B64;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x4F34;&#x968F;&#x7740;&#x521D;&#x59CB;&#x5316;&#x6CE8;&#x518C;&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5B83;&#x53EF;&#x80FD;&#x4F1A;&#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x5E76;&#x4E14;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#x3002;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x5728;&#x521D;&#x59CB;&#x5927;&#x5C0F;&#x4E86;&#xFF0C;&#x8C03;&#x7528;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p>
<p><strong>&#x8FD4;&#x56DE;</strong></p>
<ul>
<li><code>Void</code></li>
</ul>
<p><strong>&#x4F8B;&#x5B50;</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Sample JavaScript implementation </span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">collapse</span>(<span class="params"></span>) </span><br><span class="line"></span>{ </span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[<span class="string">&quot;$sf&quot;</span>], ext = sf &amp;&amp; sf.ext; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (ext) { </span><br><span class="line">      ext.collapse(); </span><br><span class="line">    } <span class="keyword">else</span> { </span><br><span class="line">      <span class="comment">//api expansion not supported </span></span><br><span class="line">    } </span><br><span class="line">  } </span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">status_update_handler</span>(<span class="params">status</span>) </span><br><span class="line">  </span>{ </span><br><span class="line">   <span class="keyword">if</span> (status == <span class="string">&quot;expanded&quot;</span>) { </span><br><span class="line">      <span class="comment">// Expanded </span></span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (status == <span class="string">&quot;collapsed&quot;</span>) { </span><br><span class="line">      <span class="comment">//we called collapse </span></span><br><span class="line">    } </span><br><span class="line">  }</span><br></pre></td></tr></table></figure></p>
<h3 id="5-7-&#x51FD;&#x6570;-sf-ext-status"><a href="#5-7-&#x51FD;&#x6570;-sf-ext-status" class="headerlink" title="5.7 &#x51FD;&#x6570;$sf.ext.status"></a>5.7 &#x51FD;&#x6570;<code>$sf.ext.status</code></h3><p><code>$sf.ext.status()</code></p>
<p>&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x540C;&#x6B65;&#xFF08;&#x53EF;&#x968F;&#x65F6;&#x8BF7;&#x6C42;&#xFF09;</p>
<p>&#x8FD4;&#x56DE;&#x5173;&#x4E8E;&#x5BB9;&#x5668;&#x7684;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x6269;&#x5C55;&#x547D;&#x4EE4;&#x662F;&#x5426;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x5904;&#x7406;&#x7B49;&#x7B49;&#x3002;&#x4EE5;&#x4E0B;&#x7684;&#x662F;&#x53EF;&#x88AB;&#x8FD4;&#x56DE;&#xFF08;&#x66F4;&#x53EF;&#x80FD;&#x5728;&#x540E;&#x7EED;&#x7248;&#x672C;&#x4E2D;&#x6DFB;&#x52A0;&#xFF09;&#x7684;&#x72B6;&#x6001;&#x4EE3;&#x7801;&#x4E32;&#x7684;&#x5217;&#x8868;&#x3002;&#x4E00;&#x4E9B;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x4F3C;&#x4E8E;&#x5728;&#x60A8;&#x8C03;&#x7528;<code>$ sf.ext.register</code>&#x63D0;&#x4F9B;&#x7684;&#x7684;&#x51FD;&#x6570;&#x4E2D;&#x6536;&#x5230;&#x7684;&#x72B6;&#x6001;&#x66F4;&#x65B0;&#x3002;</p>
<p><strong>&#x8FD4;&#x56DE;</strong></p>
<ul>
<li><code>{String}</code> One of the following strings may be returned<br><strong>expanded</strong><br>Denotes that the container has been expanded.<br><strong>expanding</strong><br>Denotes that an expansion command is pending.<br><strong>collapsed</strong><br>Denotes that the container is in the default collapsed state.<br><strong>collapsing</strong><br>Denotes that a collapse command is pending. </li>
</ul>
<p><strong>&#x76F8;&#x5173;&#x7AE0;&#x8282;</strong></p>
<ul>
<li>5.2 &#x51FD;&#x6570;<code>$sf.ext.register</code></li>
</ul>
<h3 id="5-8-&#x51FD;&#x6570;-sf-ext-meta"><a href="#5-8-&#x51FD;&#x6570;-sf-ext-meta" class="headerlink" title="5.8 &#x51FD;&#x6570;$sf.ext.meta"></a>5.8 &#x51FD;&#x6570;<code>$sf.ext.meta</code></h3><p><code>$sf.ext.meta(propName, ownerKey)</code></p>
<p>&#x7528;&#x4E8E;&#x68C0;&#x7D22;&#x5173;&#x4E8E;&#x7531;&#x7F51;&#x7AD9;&#x6307;&#x5B9A;&#x7684;SafeFrame&#x7684;&#x4F4D;&#x7F6E;&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;&#x7F51;&#x7AD9;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x6709;&#x5173;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x7684;&#x5176;&#x4ED6;&#x5143;&#x6570;&#x636E;&#x3002;&#x7F51;&#x7AD9;&#x6307;&#x5B9A;&#x4F7F;&#x7528;<code>$sf.host.PosMeta</code>&#x7C7B;&#x6B64;&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x4E3B;&#x673A;&#x53EF;&#x80FD;&#x60F3;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x6570;&#x636E;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x76EE;&#x7684;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4E0E;&#x5916;&#x65B9;&#x5171;&#x4EAB;&#xFF0C;&#x5916;&#x90E8;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x6B64;&#x529F;&#x80FD;&#x6765;&#x8BBF;&#x95EE;&#x5143;&#x6570;&#x636E;&#x4FE1;&#x606F;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5916;&#x90E8;&#x7B2C;&#x4E09;&#x65B9;&#x5185;&#x5BB9;&#x65E0;&#x6CD5;&#x626B;&#x63CF;&#x4EFB;&#x4F55;&#x7F51;&#x7AD9;&#x4E0D;&#x5E0C;&#x671B;&#x5206;&#x4EAB;&#x7684;&#x503C;&#x3002;</p>
<p><strong>&#x53C2;&#x6570;</strong></p>
<ul>
<li><code>{String} propName</code><br>The name of the metadata value you want to read </li>
<li><code>{String} ownerKey</code> <em>(Optional)</em><br>The name of the owner object from which to read the property. By default this value is &#x201C;shared&#x201D; meaning look in common data. </li>
</ul>
<p><strong>&#x8FD4;&#x56DE;&#xFF1A;</strong></p>
<ul>
<li><code>{String|Number|Boolean}</code></li>
</ul>
<p>**&#x4F8B;&#x5B50;&#xFF1A;1 -&#x68C0;&#x7D22;&#x5171;&#x4EAB;&#x7684;&#x5143;&#x6570;&#x636E;&#x503C;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//External Party JavaScript code (inside SafeFrame container) </span></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> posID  = $sf.ext.meta(<span class="string">&quot;pos&quot;</span>);</span><br></pre></td></tr></table></figure></p>
<p>**&#x4F8B;&#x5B50;&#xFF1A;2 -&#x68C0;&#x7D22;&#x975E;&#x5171;&#x4EAB;&#x7684;&#x5143;&#x6570;&#x636E;&#x503C;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//External Party JavaScript code (inside SafeFrame container) </span></span><br><span class="line"><span class="comment">//&quot;rmx&quot; == owner of metadata blob, &quot;sectionID&quot; is key to retrieve </span></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> sectionID  = $sf.ext.meta(<span class="string">&quot;sectionID&quot;</span>, <span class="string">&quot;rmx&quot;</span>);</span><br></pre></td></tr></table></figure></p>
<p><strong>&#x76F8;&#x5173;&#x7AE0;&#x8282;</strong></p>
<ul>
<li>5.8 &#x51FD;&#x6570; <code>$sf.ext.meta</code></li>
</ul>
<h3 id="5-9-&#x51FD;&#x6570;-sf-ext-cookie"><a href="#5-9-&#x51FD;&#x6570;-sf-ext-cookie" class="headerlink" title="5.9 &#x51FD;&#x6570;$sf.ext.cookie"></a>5.9 &#x51FD;&#x6570;<code>$sf.ext.cookie</code></h3><p><code>$sf.ext.cookie(cookieName, cookieData)</code></p>
<p>&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x5F02;&#x6B65;&#xFF08;&#x8BFB;/&#x5199;&#x8981;&#x6C42;&#x4F20;&#x9012;&#x51FD;&#x6570;&#x5230;<code>$sf.ext.register</code>&#xFF09;</p>
<p>&#x5C06;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x5230;&#x7F51;&#x7AD9;&#x4EE5;&#x5728;&#x7F51;&#x7AD9;&#x57DF;&#x540D;&#x8BFB;&#x6216;&#x5199;cookie&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5982;&#x679C;&#x7F51;&#x7AD9;&#x652F;&#x6301;&#x6B64;&#x529F;&#x80FD;&#xFF0C;cookie&#x6570;&#x636E;&#x662F;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4ECE;&#x8BE5;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x5F02;&#x6B65;&#x7684;&#x3002;&#x4F60;&#x5FC5;&#x987B;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5230;<code>$sf.ext.register</code>&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x5C06;&#x5728;Cookie&#x6570;&#x636E;&#x8BBE;&#x7F6E;&#x6216;&#x68C0;&#x7D22;&#x65F6;&#x88AB;&#x8C03;&#x7528;&#x3002;</p>
<blockquote>
<p><strong>&#x7F51;&#x7AD9;&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br>&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x5916;&#x90E8;&#x65B9;&#x6765;&#x8BFB;&#x53D6;&#x6216;&#x8BBE;&#x7F6E;cookies&#xFF0C;&#x4F1A;&#x5E26;&#x6765;&#x67D0;&#x4E9B;&#x5B89;&#x5168;&#x9875;&#x9762;&#xFF0C;&#x5982;&#x767B;&#x5F55;&#x9875;&#x9762;&#xFF0C;&#x7684;&#x5B89;&#x5168;&#x98CE;&#x9669;&#x3002;&#x5728;&#x5141;&#x8BB8;&#x4E4B;&#x524D;&#xFF0C;&#x8003;&#x8651;&#x5141;&#x8BB8;cookie&#x7684;&#x8BFB;&#x53D6;&#x6216;&#x8BBE;&#x7F6E;&#x5BF9;&#x4E8E;&#x7F51;&#x9875;&#x662F;&#x5426;&#x5B89;&#x5168;&#x3002;</p>
</blockquote>
<p><strong>&#x53C2;&#x6570;</strong></p>
<ul>
<li><code>{String} cookieName</code><br>The name of the cookie to set or read.   </li>
<li><code>{Object} cookieData</code>  <em>(Optional)</em><br>An object that contains the value, and potentially an expiration date, of a cookie to be set.  If not set, the Host assumes that External Party content is only interested in reading the Host cookie value. If set but no expiration date is given, the Host assumes that any cookie written to the Host domain is intended to remain indefinitely.<br>&#x5982;&#x679C;&#x63D0;&#x4F9B;&#x4E86;&#x4EE5;&#x4E0B;&#x53C2;&#x6570;:<br>&#x3000;<code>{String} cookieData.info</code> <em>(Required)</em><br>&#x3000;A string value for the cookie.<br>&#x3000;<code>{Date} cookieData.expires</code> <em>(Optional)</em><br>&#x3000;A date for when the cookie should expire. </li>
</ul>
<p><strong>&#x4F8B;&#x5B50;1&#xFF1A;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x7F51;&#x7AD9;cookie</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Sample JavaScript implementation </span></span><br><span class="line"><span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[&#x201C;$sf&#x201D;], sfAPI = sf &amp;&amp; sf.ext, myPubCookieName = </span><br><span class="line">&#x201C;foo&#x201D;, myPubCookieValue = &#x201C;&#x201D;, fetchingCookie = <span class="literal">false</span>; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">register_content</span>(<span class="params"></span>) </span><br><span class="line"></span>{ </span><br><span class="line">  <span class="keyword">var</span> e; </span><br><span class="line">  <span class="keyword">try</span> { </span><br><span class="line">    <span class="keyword">if</span> (sfAPI) sfAPI.register(<span class="number">300</span>,<span class="number">250</span>,status_update_handler); </span><br><span class="line">  } <span class="keyword">catch</span> (e) { </span><br><span class="line">    <span class="comment">//console.log(&#x201C;no sfAPI -- &gt; &#x201C; + e.message); </span></span><br><span class="line">       sfAPI = <span class="literal">null</span>; </span><br><span class="line">    } </span><br><span class="line">} </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_host_cookie</span>(<span class="params"></span>) </span><br><span class="line"></span>{ </span><br><span class="line">  <span class="keyword">var</span> e; </span><br><span class="line"> </span><br><span class="line">       <span class="keyword">try</span> { </span><br><span class="line">      <span class="keyword">if</span> (sfAPI &amp;&amp; sfAPI.supports(&#x201C;read-cookie&#x201D;)) { </span><br><span class="line">fetchingCookie = sfAPI.cookie(&#x201C;foo&#x201D;); </span><br><span class="line">      } </span><br><span class="line">    } <span class="keyword">catch</span> (e) { </span><br><span class="line">      fetchingCookie = <span class="literal">false</span>; </span><br><span class="line">    } </span><br><span class="line">} </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">status_update_handler</span>(<span class="params">status, data</span>) </span><br><span class="line"></span>{ </span><br><span class="line">   <span class="keyword">if</span> (status == <span class="string">&quot;read-cookie&quot;</span>) {  </span><br><span class="line">    myPubCookieValue = data; </span><br><span class="line">    <span class="comment">//now do whatever here since you have the cookie data </span></span><br><span class="line">  }  </span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><strong>&#x4F8B;&#x5B50;2&#xFF1A;&#x5199;&#x4E00;&#x4E2A;&#x7F51;&#x7AD9;cookie</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Sample JavaScript implementation </span></span><br><span class="line"><span class="keyword">var</span> w = <span class="built_in">window</span>, sf = w[&#x201C;$sf&#x201D;], sfAPI = sf &amp;&amp; sf.ext, myPubCookieName = </span><br><span class="line">&#x201C;foo&#x201D;, myPubCookieValue = &#x201C;&#x201D;, settingCookie = <span class="literal">false</span>; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">register_content</span>(<span class="params"></span>) </span><br><span class="line"></span>{ </span><br><span class="line">  <span class="keyword">var</span> e; </span><br><span class="line">  <span class="keyword">try</span> { </span><br><span class="line">    <span class="keyword">if</span> (sfAPI) sfAPI.register(<span class="number">300</span>,<span class="number">250</span>,status_update_handler); </span><br><span class="line">  } <span class="keyword">catch</span> (e) { </span><br><span class="line">    <span class="comment">//console.log(&#x201C;no sfAPI -- &gt; &#x201C; + e.message); </span></span><br><span class="line">       sfAPI = <span class="literal">null</span>; </span><br><span class="line">    } </span><br><span class="line">} </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">set_host_cookie</span>(<span class="params">newVal</span>) </span><br><span class="line"></span>{ </span><br><span class="line">  <span class="keyword">var</span> e, cookieData = {value:newVal,expires:<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2020</span>, <span class="number">11</span>, <span class="number">1</span>)}; </span><br><span class="line"> </span><br><span class="line">       <span class="keyword">try</span> { </span><br><span class="line">      <span class="keyword">if</span> (sfAPI &amp;&amp; sfAPI.supports(&#x201C;write-cookie&#x201D;)) { </span><br><span class="line">settingCookie = sfAPI.cookie(&#x201C;foo&#x201D;, cookieData); </span><br><span class="line">      } </span><br><span class="line">    } <span class="keyword">catch</span> (e) { </span><br><span class="line">      settingCookie = <span class="literal">false</span>; </span><br><span class="line">    } </span><br><span class="line">} </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">status_update_handler</span>(<span class="params">status, data</span>) </span><br><span class="line"></span>{ </span><br><span class="line">   <span class="keyword">if</span> (status == <span class="string">&quot;write-cookie&quot;</span>) { </span><br><span class="line">    myPubCookieValue = data.info; </span><br><span class="line">    <span class="comment">//now do whatever here since the write was successful </span></span><br><span class="line">  } <span class="keyword">else</span> <span class="keyword">if</span> (status == &#x201C;failed&#x201D; &amp;&amp; data.cmd == &#x201C;write-cookie&#x201D;) { </span><br><span class="line">    <span class="comment">//data.cmd contains original command sent </span></span><br><span class="line">       <span class="comment">//data.reason contains a description of failure </span></span><br><span class="line">    <span class="comment">//data.info contains the object of information sent to host </span></span><br><span class="line">    settingCookie = <span class="literal">false</span>; </span><br><span class="line">    <span class="comment">//cookie not allowed to be set </span></span><br><span class="line">  } </span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="5-10-&#x51FD;&#x6570;-sf-ext-inViewPercentage"><a href="#5-10-&#x51FD;&#x6570;-sf-ext-inViewPercentage" class="headerlink" title="5.10 &#x51FD;&#x6570;$sf.ext.inViewPercentage"></a>5.10 &#x51FD;&#x6570;<code>$sf.ext.inViewPercentage</code></h3><p><code>$sf.ext.inViewPercentage()</code></p>
<p>&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x540C;&#x6B65;&#xFF08;&#x53EF;&#x968F;&#x65F6;&#x8BF7;&#x6C42;&#xFF09;</p>
<p>&#x8FD4;&#x56DE;&#x5176;&#x4E2D;&#x5BB9;&#x5668;&#x662F;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x89C6;&#x56FE;&#x5185;&#x7684;&#x533A;&#x57DF;&#x7684;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x4F5C;&#x4E3A;0&#x5230;100&#x4E4B;&#x95F4;&#x7684;&#x6574;&#x6570;&#x3002;</p>
<blockquote>
<p><strong>&#x5B9E;&#x65BD;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</strong><br>&#x5728;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x63D0;&#x4F9B;&#x7684;&#x4FE1;&#x606F;&#x5728;<code>$ sf.ext.geom</code>&#x51FD;&#x6570;&#x5185;&#x662F;&#x53EF;&#x7528;&#x7684;&#xFF0C;&#x4F5C;&#x4E3A;<code>self.iv</code>&#x503C;&#x8FD4;&#x56DE;&#x3002;&#x6B64;&#x9644;&#x52A0;&#x51FD;&#x6570;&#x88AB;&#x63D0;&#x4F9B;&#x4F5C;&#x4E3A;&#x66F4;&#x65B9;&#x4FBF;&#x8BBF;&#x95EE;&#x8BE5;&#x4FE1;&#x606F;&#x7684;&#x4FBF;&#x5229;&#x3002;</p>
</blockquote>
<p><strong>&#x8FD4;&#x56DE;&#xFF1A;</strong></p>
<ul>
<li><code>{Number}</code> The percentage of area that a container is in view on the screen </li>
</ul>
<p><strong>&#x884C;&#x4E1A;&#x6807;&#x51C6;&#x53EF;&#x5E7F;&#x544A;&#x89C1;&#x5EA6;</strong><br>&#x4E1A;&#x754C;&#x516C;&#x8BA4;&#x7684;&#x53EF;&#x89C1;&#x5EA6;&#x6307;&#x6807;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x62A5;&#x544A;&#x7684;&#x53EF;&#x89C1;&#x66DD;&#x5149;&#x7684;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x7EC4;&#x4EF6;&#x3002;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BA1;&#x7B97;<code>$ sf.ext.inViewPercentage</code>&#x503C;&#x591A;&#x4E45;&#x8FBE;&#x5230;&#x6216;&#x8D85;&#x8FC7;&#x4E00;&#x4E2A;&#x53EF;&#x89C1;&#x66DD;&#x5149;&#x7684;&#x6700;&#x5C0F;&#x767E;&#x5206;&#x6BD4;&#x6765;&#x51B3;&#x5B9A;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#x6F14;&#x793A;&#x4E86;&#x6CE8;&#x518C;&#x7684;&#x201D;&#x76D1;&#x542C;&#x8005;&#x201D;&#x662F;&#x600E;&#x6837;&#x53EF;&#x80FD;&#x4F1A;&#x786E;&#x5B9A;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#xFF08;&#x7C97;&#x4F53;&#x503C;&#x6307;&#x88AB;&#x4E1A;&#x754C;&#x516C;&#x8BA4;&#x7684;&#x5E7F;&#x544A;&#x80FD;&#x89C1;&#x5EA6;&#x503C;&#x4EE3;&#x66FF;&#xFF09;&#xFF1A;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> viewableTimerId = <span class="number">0</span>; </span><br><span class="line"><span class="keyword">var</span> viewableFired = <span class="literal">false</span>; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nodifyViewablePassed</span>(<span class="params"></span>) </span><br><span class="line"></span>{ </span><br><span class="line"><span class="keyword">if</span>(viewableFired) <span class="keyword">return</span>; <span class="comment">// fire beacon </span></span><br><span class="line">viewableFired = <span class="literal">true</span>; </span><br><span class="line">viewableTimerId = <span class="number">0</span>; </span><br><span class="line">}  </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">status_update</span>(<span class="params">status, data</span>)  </span><br><span class="line"></span>{  </span><br><span class="line"><span class="comment">// notify if 50% in view for 1 second  </span></span><br><span class="line"><span class="keyword">if</span>($sf.ext.inViewPercentage() &gt; <span class="number">50</span>) </span><br><span class="line">{   </span><br><span class="line"><span class="keyword">if</span>(viewableTimerId == <span class="number">0</span>){ </span><br><span class="line">viewableTimerId = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span><br><span class="line"></span>{notifyViewablePassed(); }, <span class="number">1000</span>);} </span><br><span class="line">}  </span><br><span class="line"><span class="keyword">else</span>{ </span><br><span class="line">clearTimeout(viewableTimerId); </span><br><span class="line">}  </span><br><span class="line">} </span><br><span class="line"> </span><br><span class="line">$sf.ext.register(<span class="number">160</span>, <span class="number">650</span>, status_update)</span><br></pre></td></tr></table></figure></p>
<h3 id="5-11-&#x51FD;&#x6570;-sf-ext-winHasFocus"><a href="#5-11-&#x51FD;&#x6570;-sf-ext-winHasFocus" class="headerlink" title="5.11 &#x51FD;&#x6570;$sf.ext.winHasFocus"></a>5.11 &#x51FD;&#x6570;<code>$sf.ext.winHasFocus</code></h3><p><code>$sf.ext.winHasFocus()</code></p>
<p>&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x540C;&#x6B65;&#xFF08;&#x53EF;&#x968F;&#x65F6;&#x8BF7;&#x6C42;&#xFF09;</p>
<p>&#x8FD4;&#x56DE;&#x662F;&#x5426;&#x6D4F;&#x89C8;&#x5668;&#x7A97;&#x53E3;&#x6216;&#x5305;&#x542B;SafeFrame&#x805A;&#x7126;&#xFF0C;&#x6216;&#x5F53;&#x524D;&#x6D3B;&#x52A8;&#x7684;&#x6807;&#x7B7E;&#x3002;</p>
<p><strong>&#x8FD4;&#x56DE;&#xFF1A;</strong></p>
<ul>
<li><code>{Boolean} True if the browser window / tab has focus, otherwise false</code></li>
</ul>
<p><strong>&#x7248;&#x672C;&#x8981;&#x6C42;</strong></p>
<ul>
<li>&#x201C;1.1&#x201D; Requires specVersion 1.1 as opposed to original functionality in &#x201C;1.0&#x201D;</li>
</ul>
<p><strong>&#x4E0E;&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x7684;&#x5173;&#x7CFB;</strong><br>&#x9664;&#x4E86;&#x51E0;&#x4F55;&#x5750;&#x6807;&#xFF0C;&#x4E00;&#x4E2A;SafeFrame&#x5185;&#x7684;&#x5185;&#x5BB9;&#x53EF;&#x80FD;&#x60F3;&#x77E5;&#x9053;&#x4E3B;&#x7A97;&#x53E3;&#x662F;&#x5F53;&#x524D;&#x6D3B;&#x52A8;&#xFF0C;&#x6216;&#x805A;&#x7126;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x63D0;&#x4F9B;&#x4E86;&#x4FE1;&#x606F;&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x62A5;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x6307;&#x6807;&#x65F6;&#x53EF;&#x4EE5;&#x88AB;&#x8003;&#x8651;&#x3002;</p>
<blockquote>
<p><strong>&#x5E7F;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x6CE8;</strong><br><code>winHasFocus</code>&#x51FD;&#x6570;&#x63D0;&#x4F9B;&#x4E86;&#x53EF;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x53EF;&#x89C1;&#x5EA6;&#x6307;&#x6807;&#x7684;&#x90E8;&#x5206;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x62A5;&#x544A;&#x7684;&#x4FE1;&#x606F;&#x5E76;&#x4E0D;&#x80FD;&#x51B3;&#x5B9A;&#x6216;&#x62A5;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x3002;&#x53EF;&#x89C1;&#x5EA6;&#x6307;&#x6807;&#x662F;&#x7531;&#x884C;&#x4E1A;&#x548C;&#x53C2;&#x4E0E;&#x62A5;&#x544A;&#x53EF;&#x89C1;&#x5EA6;&#x7684;&#x5A92;&#x4F53;&#x7684;&#x5404;&#x65B9;&#x786E;&#x5B9A;&#x3002;</p>
</blockquote>
<p>&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#x6F14;&#x793A;&#x4E86;&#x4E00;&#x4E2A;&#x6CE8;&#x518C;&#x7684;&#x76D1;&#x542C;&#x5668;&#x4F1A;&#x5982;&#x4F55;&#x786E;&#x5B9A;&#x4E3B;&#x6D4F;&#x89C8;&#x5668;&#x7A97;&#x53E3;&#x6216;&#x9009;&#x9879;&#x5361;&#x662F;&#x5426;&#x805A;&#x7126;&#x3002;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> win_has_focus = <span class="literal">false</span>; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">status_update</span>(<span class="params">status, data</span>) </span><br><span class="line"></span>{ </span><br><span class="line"><span class="comment">// notify if 50% in view for 1 second </span></span><br><span class="line"><span class="keyword">if</span>(status == &#x201C;focus-change&#x201D;) { </span><br><span class="line">    win_has_focus = $sf.ext.winHasFocus(); </span><br><span class="line">} </span><br><span class="line">} </span><br><span class="line"> </span><br><span class="line">$sf.ext.register(<span class="number">160</span>, <span class="number">650</span>, status_update)</span><br></pre></td></tr></table></figure></p>
<hr>
<p>end</p>

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/xfe/tags/translate/" rel="tag">#translate</a>
          
            <a href="/xfe/tags/safeframe/" rel="tag">#safeframe</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/xfe/2016/07/13/untitled/" rel="next" title="">
                <i class="fa fa-chevron-left"></i> 
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/08/29/safeframe-v1-1-final/"
     data-title="safeframe-v1-1-final"
     data-content=""
     data-url="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/08/29/safeframe-v1-1-final/"
           data-title="safeframe-v1-1-final" data-url="http://sinaad.github.io/xfe/2016/08/29/safeframe-v1-1-final/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://tp4.sinaimg.cn/2231440955/180/5749469848/1"
               alt="SINA FE Team" />
          <p class="site-author-name" itemprop="name">SINA FE Team</p>
          <p class="site-description motion-element" itemprop="description">我们一直努力贴好小广告</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/xfe/archives">
              <span class="site-state-item-count">30</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>
          
          
            <div class="site-state-item site-state-categories">
              <a href="/xfe/categories">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/xfe/tags">
                <span class="site-state-item-count">43</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/xfe/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/orgs/sinaad/teams/xfe" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/acelan" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#iab-Interactive-Advertising-Bureau"><span class="nav-number">1.</span> <span class="nav-text">iab.(Interactive Advertising Bureau)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安全框架"><span class="nav-number">1.0.1.</span> <span class="nav-text">安全框架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#版本1-1-草案"><span class="nav-number">1.0.2.</span> <span class="nav-text">版本1.1 草案</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2014年8月发布"><span class="nav-number">1.0.2.1.</span> <span class="nav-text">2014年8月发布</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#目录"><span class="nav-number">1.1.</span> <span class="nav-text">目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#执行摘要"><span class="nav-number">1.1.1.</span> <span class="nav-text">执行摘要</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#目标受众"><span class="nav-number">1.1.2.</span> <span class="nav-text">目标受众</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#规格更新"><span class="nav-number">1.1.3.</span> <span class="nav-text">规格更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-概况"><span class="nav-number">1.2.</span> <span class="nav-text">1. 概况</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-SafeFrames组件"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.1 SafeFrames组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-1-Host"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">1.1.1 Host</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-2-第三方"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">1.1.2 第三方</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-3-API"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">1.1.3 API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-4-二级域名"><span class="nav-number">1.2.1.4.</span> <span class="nav-text">1.1.4 二级域名</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-优点"><span class="nav-number">1.2.2.</span> <span class="nav-text">1.2 优点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-1-第三方和Host之间的透明度"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">1.2.1 第三方和Host之间的透明度</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-2-统一规范的API"><span class="nav-number">1.2.3.</span> <span class="nav-text">1.2.2 统一规范的API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-3-“沙箱化”第三方内容"><span class="nav-number">1.2.4.</span> <span class="nav-text">1.2.3 “沙箱化”第三方内容</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-4-Host自定义和控制"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">1.2.4 Host自定义和控制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-SafeFrames和广告可见曝光"><span class="nav-number">1.2.5.</span> <span class="nav-text">1.3 SafeFrames和广告可见曝光</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-1-支持3MS广告可见度"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">1.3.1 支持3MS广告可见度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-2-可见度特性对第三方是可选的"><span class="nav-number">1.2.5.2.</span> <span class="nav-text">1.3.2 可见度特性对第三方是可选的</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-SafeFrames和视频插播广告"><span class="nav-number">1.2.6.</span> <span class="nav-text">1.4 SafeFrames和视频插播广告</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-SafeFrames和移动端"><span class="nav-number">1.2.7.</span> <span class="nav-text">1.5 SafeFrames和移动端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-报告SafeFrame的数据"><span class="nav-number">1.2.8.</span> <span class="nav-text">1.6 报告SafeFrame的数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-7-区别于其他规范"><span class="nav-number">1.2.9.</span> <span class="nav-text">1.7 区别于其他规范</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-1-IAB友好的iframe"><span class="nav-number">1.2.9.1.</span> <span class="nav-text">1.7.1 IAB友好的iframe</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7-2-跨源资源共享（CORS）"><span class="nav-number">1.2.9.2.</span> <span class="nav-text">1.7.2 跨源资源共享（CORS）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-8-超出范围的项"><span class="nav-number">1.2.10.</span> <span class="nav-text">1.8 超出范围的项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-9-操作注意事项"><span class="nav-number">1.2.11.</span> <span class="nav-text">1.9 操作注意事项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Host的实施"><span class="nav-number">1.3.</span> <span class="nav-text">2. Host的实施</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-SafeFrames是如何运作的"><span class="nav-number">1.3.1.</span> <span class="nav-text">2.1 SafeFrames是如何运作的</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-1-传递模式A：网站转换外部内容"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">2.1.1 传递模式A：网站转换外部内容</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-2-传递模式B：外部内容直接传递"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">2.1.2 传递模式B：外部内容直接传递</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-3-渲染SafeFrame"><span class="nav-number">1.3.1.3.</span> <span class="nav-text">2.1.3 渲染SafeFrame</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-4通过API进行页内通讯"><span class="nav-number">1.3.1.4.</span> <span class="nav-text">2.1.4通过API进行页内通讯</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2要求"><span class="nav-number">1.3.2.</span> <span class="nav-text">2.2要求</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1-JavaScript-Host库和API"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">2.2.1 JavaScript Host库和API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-2-副host域名"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">2.2.2 副host域名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-3-资源公约"><span class="nav-number">1.3.2.3.</span> <span class="nav-text">2.2.3 资源公约</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-4-SafeFrame的URI公约"><span class="nav-number">1.3.2.4.</span> <span class="nav-text">2.2.4 SafeFrame的URI公约</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-实现注意事项"><span class="nav-number">1.3.3.</span> <span class="nav-text">2.3 实现注意事项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-SafeFrame的渲染细节"><span class="nav-number">1.3.4.</span> <span class="nav-text">2.4 SafeFrame的渲染细节</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-通信机制的细节"><span class="nav-number">1.3.5.</span> <span class="nav-text">2.5 通信机制的细节</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-SafeFrame-标签"><span class="nav-number">1.4.</span> <span class="nav-text">3. SafeFrame 标签</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-SafeFrame-标签结构-amp-要求"><span class="nav-number">1.4.1.</span> <span class="nav-text">3.1 SafeFrame 标签结构&要求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1-SCRIPT标签"><span class="nav-number">1.4.2.</span> <span class="nav-text">3.1.1 SCRIPT标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-2-使用JavaScript处理数据标签"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.1.2 使用JavaScript处理数据标签</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-2-1-例子：一次性处理所有标签"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">3.1.2.1 例子：一次性处理所有标签</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-2-3-伴随着自动引导的兄弟标签的SafeFrame数据标签"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">3.1.2.3 伴随着自动引导的兄弟标签的SafeFrame数据标签</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-网站API实施细则"><span class="nav-number">1.5.</span> <span class="nav-text">4. 网站API实施细则</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-命名空间-sf-host"><span class="nav-number">1.5.1.</span> <span class="nav-text">4.1 命名空间$sf.host</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-命名空间-sf-host-conf"><span class="nav-number">1.5.2.</span> <span class="nav-text">4.2 命名空间$sf.host.conf</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-命名空间-sf-info"><span class="nav-number">1.5.3.</span> <span class="nav-text">4.3 命名空间$sf.info</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-类-sf-host-Config"><span class="nav-number">1.5.4.</span> <span class="nav-text">4.4 类$sf.host.Config</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-类-sf-host-PosConfig"><span class="nav-number">1.5.5.</span> <span class="nav-text">4.5 类$sf.host.PosConfig</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6-类-sf-host-Position"><span class="nav-number">1.5.6.</span> <span class="nav-text">4.6 类$sf.host.Position</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-7-类-sf-host-PosMeta"><span class="nav-number">1.5.7.</span> <span class="nav-text">4.7 类$sf.host.PosMeta</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-8-函数-sf-host-boot"><span class="nav-number">1.5.8.</span> <span class="nav-text">4.8 函数 $sf.host.boot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-9-函数-sf-host-status"><span class="nav-number">1.5.9.</span> <span class="nav-text">4.9 函数$sf.host.status</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-10-函数-sf-host-nuke"><span class="nav-number">1.5.10.</span> <span class="nav-text">4.10 函数$sf.host.nuke</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-11-函数-sf-host-get"><span class="nav-number">1.5.11.</span> <span class="nav-text">4.11 函数$sf.host.get</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-12-函数-sf-host-render"><span class="nav-number">1.5.12.</span> <span class="nav-text">4.12 函数$sf.host.render</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-外部方API实施"><span class="nav-number">1.6.</span> <span class="nav-text">5.外部方API实施</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-命名空间-sf-ext"><span class="nav-number">1.6.1.</span> <span class="nav-text">5.1 命名空间$sf.ext</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-函数-sf-ext-register"><span class="nav-number">1.6.2.</span> <span class="nav-text">5.2 函数$sf.ext.register</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-函数-sf-ext-supports"><span class="nav-number">1.6.3.</span> <span class="nav-text">5.3 函数 $sf.ext.supports</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-函数-sf-ext-geom"><span class="nav-number">1.6.4.</span> <span class="nav-text">5.4 函数$sf.ext.geom</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-函数-sf-ext-expand"><span class="nav-number">1.6.5.</span> <span class="nav-text">5.5 函数$sf.ext.expand</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6-函数-sf-ext-collapse"><span class="nav-number">1.6.6.</span> <span class="nav-text">5.6 函数$sf.ext.collapse</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-7-函数-sf-ext-status"><span class="nav-number">1.6.7.</span> <span class="nav-text">5.7 函数$sf.ext.status</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-8-函数-sf-ext-meta"><span class="nav-number">1.6.8.</span> <span class="nav-text">5.8 函数$sf.ext.meta</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-9-函数-sf-ext-cookie"><span class="nav-number">1.6.9.</span> <span class="nav-text">5.9 函数$sf.ext.cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-10-函数-sf-ext-inViewPercentage"><span class="nav-number">1.6.10.</span> <span class="nav-text">5.10 函数$sf.ext.inViewPercentage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-11-函数-sf-ext-winHasFocus"><span class="nav-number">1.6.11.</span> <span class="nav-text">5.11 函数$sf.ext.winHasFocus</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SINA FE Team</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  


  



  <script type="text/javascript" src="/xfe/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/xfe/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/xfe/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/xfe/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/xfe/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/xfe/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/xfe/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/xfe/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="/xfe/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="/xfe/js/src/schemes/pisces.js?v=0.5.0"></script>



  
  
<script type="text/javascript" src="/xfe/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/xfe/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"sinaad-xfe"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>

  <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
      MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
        //  do something with the error.  message[2] is the Error object that records the problem.
        console.log(message);
      });
  </script>

  <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
          var all = MathJax.Hub.getAllJax(), i;
          for(i=0; i < all.length; i += 1) {
              all[i].SourceElement().parentNode.className += ' has-jax';
          }
      });
  </script>

  <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  
  


</body>
</html>
